#!/bin/sh
# postrm script for mongodb
#
# see: dh_installdeb(1)

set -e

# summary of how this script can be called:
#        * <postrm> `remove'
#        * <postrm> `purge'
#        * <old-postrm> `upgrade' <new-version>
#        * <new-postrm> `failed-upgrade' <old-version>
#        * <new-postrm> `abort-install'
#        * <new-postrm> `abort-install' <old-version>
#        * <new-postrm> `abort-upgrade' <old-version>
#        * <disappearer's-postrm> `disappear' <overwriter>
#          <overwriter-version>
# for details, see http://www.debian.org/doc/debian-policy/ or
# the debian-policy package


case "$1" in
    purge|remove|upgrade|failed-upgrade|abort-install|abort-upgrade|disappear)
    ;;

    *)
        echo "postrm called with unknown argument \`$1'" >&2
        exit 1
    ;;
esac

# dh_installdeb will replace this with shell code automatically
# generated by other debhelper scripts.

#DEBHELPER#

exit 0



#!/bin/sh
# preinst script for mongodb
#
# see: dh_installdeb(1)

set -e

# summary of how this script can be called:
#        * <new-preinst> `install'
#        * <new-preinst> `install' <old-version>
#        * <new-preinst> `upgrade' <old-version>
#        * <old-preinst> `abort-upgrade' <new-version>
# for details, see http://www.debian.org/doc/debian-policy/ or
# the debian-policy package


case "$1" in
    install|upgrade)
    ;;

    abort-upgrade)
    ;;

    *)
        echo "preinst called with unknown argument \`$1'" >&2
        exit 1
    ;;
esac

# dh_installdeb will replace this with shell code automatically
# generated by other debhelper scripts.

#DEBHELPER#

exit 0



#!/bin/sh
# prerm script for mongodb
#
# see: dh_installdeb(1)

set -e

# summary of how this script can be called:
#        * <prerm> `remove'
#        * <old-prerm> `upgrade' <new-version>
#        * <new-prerm> `failed-upgrade' <old-version>
#        * <conflictor's-prerm> `remove' `in-favour' <package> <new-version>
#        * <deconfigured's-prerm> `deconfigure' `in-favour'
#          <package-being-installed> <version> `removing'
#          <conflicting-package> <version>
# for details, see http://www.debian.org/doc/debian-policy/ or
# the debian-policy package

case "$1" in
    remove|upgrade|deconfigure)
    ;;

    failed-upgrade)
    ;;

    *)
        echo "prerm called with unknown argument \`$1'" >&2
        exit 1
    ;;
esac

# dh_installdeb will replace this with shell code automatically
# generated by other debhelper scripts.

#DEBHELPER#

exit 0



# Example watch control file for uscan
# Rename this file to "watch" and then you can run the "uscan" command
# to check for upstream updates and more.
# See uscan(1) for format

# Compulsory line, this is a version 3 file
version=3

# examine a Webserver directory
http://downloads.mongodb.org/linux/mongodb-linux-(.*)\.tar\.gz

mongodb (2.5.4) unstable; urgency=low

  * see http://jira.mongodb.org/browse/SERVER/fixforversion/12898

 -- Ernie Hershey <ernie.hershey@mongodb.com>  Thu, 19 Dec 2013 00:41:46 -0500

mongodb (2.1.2) unstable; urgency=low

  * see http://jira.mongodb.org/browse/SERVER/fixforversion/10894

 -- Richard Kreuter <richard@10gen.com>  Tue, 26 Jun 2012 16:56:28 -0500

mongodb (1.9.2) unstable; urgency=low

  * see http://jira.mongodb.org/browse/SERVER/fixforversion/10261

 -- Richard Kreuter <richard@10gen.com>  Thu, 11 Aug 2011 16:56:28 -0500

mongodb (1.9.1) unstable; urgency=low

  * see http://jira.mongodb.org/browse/SERVER/fixforversion/10261

 -- Richard Kreuter <richard@10gen.com>  Tue, 26 Jul 2011 16:56:28 -0500

mongodb (1.9.0) unstable; urgency=low

  * see http://jira.mongodb.org/browse/SERVER/fixforversion/10232

 -- Richard Kreuter <richard@10gen.com>  Sun, 01 May 2011 16:56:28 -0500

mongodb (1.8.0-rc0) unstable; urgency=low

  * see http://jira.mongodb.org/browse/SERVER/fixforversion/10245

 -- Richard Kreuter <richard@10gen.com>  Tue, 22 Feb 2011 16:56:28 -0500

mongodb (1.7.6) unstable; urgency=low

  * see http://jira.mongodb.org/browse/SERVER/fixforversion/10223

 -- Richard Kreuter <richard@10gen.com>  Wed, 26 Jan 2011 16:56:28 -0500

mongodb (1.7.5) unstable; urgency=low

  * durability journalingin place
  * see http://jira.mongodb.org/browse/SERVER/fixforversion/10214

 -- Richard Kreuter <richard@10gen.com>  Wed, 26 Jan 2011 16:56:28 -0500

mongodb (1.7.4) unstable; urgency=low

  * sharding lots of changes
  * replica_sets lots of changes
  * see http://jira.mongodb.org/browse/SERVER/fixforversion/10210

 -- Richard Kreuter <richard@10gen.com>  Mon, 20 Dec 2010 16:56:28 -0500

mongodb (1.7.3) unstable; urgency=low

  * sharding lots of changes
  * replica_sets lots of changes
  * see http://jira.mongodb.org/browse/SERVER/fixforversion/10195

 -- Richard Kreuter <richard@10gen.com>  Tue, 16 Nov 2010 16:56:28 -0500

mongodb (1.7.2) unstable; urgency=low

  * sharding lots of changes
  * replica_sets lots of changes
  * see http://jira.mongodb.org/browse/SERVER/fixforversion/10194

 -- Richard Kreuter <richard@10gen.com>  Fri, 29 Oct 2010 16:56:28 -0500

mongodb (1.7.1) unstable; urgency=low

  * sharding lots of changes
  * replica_sets lots of changes
  * see http://jira.mongodb.org/browse/SERVER/fixforversion/10193

 -- Richard Kreuter <richard@10gen.com>  Tue, 28 Sep 2010 16:56:28 -0500

mongodb (1.7.0) unstable; urgency=low

  * sharding lots of changes
  * replica_sets lots of changes

 -- Richard Kreuter <richard@10gen.com>  Fri, 03 Sep 2010 16:56:28 -0500

mongodb (1.5.8) unstable; urgency=low

  * sharding lots of changes
  * replica_sets lots of changes

 -- Richard Kreuter <richard@10gen.com>  Tue, 03 Aug 2010 16:56:28 -0500

mongodb (1.5.7) unstable; urgency=low

  * sharding lots of changes
  * replica_sets lots of changes

 -- Richard Kreuter <richard@10gen.com>  Fri, 30 Jul 2010 16:56:28 -0500


mongodb (1.5.6) unstable; urgency=low

  * sharding lots of changes, see http://jira.mongodb.org/browse/SERVER/fixforversion/10179

 -- Richard Kreuter <richard@10gen.com>  Sat, 24 Jul 2010 16:56:28 -0500

mongodb (1.5.5) unstable; urgency=low

  * sharding lots of changes, see http://jira.mongodb.org/browse/SERVER/fixforversion/10157

 -- Richard Kreuter <richard@10gen.com>  Fri, 16 Jul 2010 16:56:28 -0500

mongodb (1.5.4) unstable; urgency=low

  * sharding lots of changes, see http://jira.mongodb.org/browse/SERVER/fixforversion/10157

 -- Richard Kreuter <richard@10gen.com>  Fri, 2 Jul 2010 16:56:28 -0500

mongodb (1.5.3) unstable; urgency=low

  * sharding lots of changes, see http://jira.mongodb.org/browse/SERVER/fixforversion/10157

 -- Richard Kreuter <richard@10gen.com>  Thu, 17 Jun 2010 16:56:28 -0500

mongodb (1.5.2) unstable; urgency=low

  * sharding lots of changes, see http://jira.mongodb.org/browse/SERVER/fixforversion/10143

 -- Richard Kreuter <richard@10gen.com>  Wed, 27 May 2010 16:56:28 -0500

mongodb (1.5.1) unstable; urgency=low

  * sharding lots of changes, see http://jira.mongodb.org/browse/SERVER/fixforversion/10142

 -- Richard Kreuter <richard@10gen.com>  Wed, 3 May 2010 16:56:28 -0500

mongodb (1.5.0) unstable; urgency=low

  * replication w & real-time, see http://jira.mongodb.org/browse/SERVER/fixforversion/10125

 -- Richard Kreuter <richard@10gen.com>  Wed, 22 Mar 2010 16:56:28 -0500


mongodb (1.3.5) unstable; urgency=low

  * bug fixes

 -- Richard Kreuter <richard@10gen.com>  Wed, 22 Mar 2010 16:56:28 -0500

mongodb (1.3.4) unstable; urgency=low

  * bufg fixes

 -- Richard Kreuter <richard@10gen.com>  Wed, 17 Mar 2010 16:56:28 -0500

mongodb (1.3.3) unstable; urgency=low

  * geo

 -- Richard Kreuter <richard@10gen.com>  Fri, 05 Feb 2010 16:56:28 -0500

mongodb (1.3.2) unstable; urgency=low

  * munged debian files

 -- Richard Kreuter <richard@10gen.com>  Fri, 05 Feb 2010 16:56:28 -0500

mongodb (1.3.1) unstable; urgency=low

  * Initial release

 -- Kristina Chodorow <kristina@10gen.com>  Tue, 07 Apr 2009 10:18:58 -0400


9

This package was debianized by Kristina Chodorow <kristina@10gen.com> on
Tue, 07 Apr 2009 10:18:58 -0400.

It was downloaded from http://www.mongodb.org

Upstream Authors:

    Eliot Horowitz
    Dwight Merriman
    Aaron Staple
    Michael Dirolf
    Kristina Chodorow

Copyright:

    2009 10gen

License:

    SSPL

The Debian packaging is (C) 2009, Kristina Chodorow <kristina@10gen.com> and
is licensed under the SSPL, see `https://www.mongodb.com/licensing/server-side-public-license'.

usr/bin
usr/sbin

mongodb_0.9.7_amd64.deb devel optional

#!/bin/sh
#
# init.d script with LSB support.
#
# Copyright (c) 2007 Javier Fernandez-Sanguino <jfs@debian.org>
#
# This is free software; you may redistribute it and/or modify
# it under the terms of the GNU General Public License as
# published by the Free Software Foundation; either version 2,
# or (at your option) any later version.
#
# This is distributed in the hope that it will be useful, but
# WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License with
# the Debian operating system, in /usr/share/common-licenses/GPL;  if
# not, write to the Free Software Foundation, Inc., 59 Temple Place,
# Suite 330, Boston, MA 02111-1307 USA
#
### BEGIN INIT INFO
# Provides:          mongod
# Required-Start:    $network $local_fs $remote_fs
# Required-Stop:     $network $local_fs $remote_fs
# Should-Start:      $named
# Should-Stop:
# Default-Start:     2 3 4 5
# Default-Stop:      0 1 6
# Short-Description: An object/document-oriented database
# Description:       MongoDB is a high-performance, open source, schema-free
#                    document-oriented data store that's easy to deploy, manage
#                    and use. It's network accessible, written in C++ and offers
#                    the following features:
#
#                       * Collection oriented storage - easy storage of object-
#                         style data
#                       * Full index support, including on inner objects
#                       * Query profiling
#                       * Replication and fail-over support
#                       * Efficient storage of binary data including large
#                         objects (e.g. videos)
#                       * Automatic partitioning for cloud-level scalability
#
#                    High performance, scalability, and reasonable depth of
#                    functionality are the goals for the project.
### END INIT INFO

PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin
DAEMON=/usr/bin/mongod
DESC=database

NAME=mongod
# Defaults.  Can be overridden by the /etc/default/$NAME
# Other configuration options are located in $CONF file. See here for more:
# http://dochub.mongodb.org/core/configurationoptions
CONF=/etc/mongod.conf
PIDFILE=/var/run/$NAME.pid
ENABLE_MONGOD=yes

# Include mongodb defaults if available.
# All variables set before this point can be overridden by users, by
# setting them directly in the defaults file. Use this to explicitly
# override these values, at your own risk.
if [ -f /etc/default/$NAME ] ; then
        . /etc/default/$NAME
fi

# Handle NUMA access to CPUs (SERVER-3574)
# This verifies the existence of numactl as well as testing that the command works
NUMACTL_ARGS="--interleave=all"
if which numactl >/dev/null 2>/dev/null && numactl $NUMACTL_ARGS ls / >/dev/null 2>/dev/null
then
    NUMACTL="`which numactl` -- $NUMACTL_ARGS"
    DAEMON_OPTS=${DAEMON_OPTS:-"--config $CONF"}
else
    NUMACTL=""
    DAEMON_OPTS="-- "${DAEMON_OPTS:-"--config $CONF"}
fi


if test ! -x $DAEMON; then
    echo "Could not find $DAEMON"
    exit 0
fi

if test "x$ENABLE_MONGOD" != "xyes"; then
    exit 0
fi

. /lib/lsb/init-functions

STARTTIME=1
DIETIME=10                  # Time to wait for the server to die, in seconds
                            # If this value is set too low you might not
                            # let some servers to die gracefully and
                            # 'restart' will not work

DAEMONUSER=${DAEMONUSER:-mongodb}
DAEMONGROUP=${DAEMONGROUP:-mongodb}

set -e

running_pid() {
# Check if a given process pid's cmdline matches a given name
    pid=$1
    name=$2
    [ -z "$pid" ] && return 1
    [ ! -d /proc/$pid ] &&  return 1
    cmd=`cat /proc/$pid/cmdline | tr "\000" "\n"|head -n 1 |cut -d : -f 1`
    # Is this the expected server
    [ "$cmd" != "$name" ] &&  return 1
    return 0
}

running() {
# Check if the process is running looking at /proc
# (works for all users)

    # No pidfile, probably no daemon present
    [ ! -f "$PIDFILE" ] && return 1
    pid=`cat $PIDFILE`
    running_pid $pid $DAEMON || return 1
    return 0
}

start_server() {
            # Recommended ulimit values for mongod or mongos
            # See https://docs.mongodb.com/manual/reference/ulimit/#recommended-ulimit-settings
            #
            ulimit -f unlimited
            ulimit -t unlimited
            ulimit -v unlimited
            ulimit -n 64000
            ulimit -m unlimited
            ulimit -l unlimited

            # In dash, ulimit takes -p for maximum user processes
            # In bash, it's -u
            if readlink /proc/$$/exe | grep -q dash
            then
                    ulimit -p 64000
            else
                    ulimit -u 64000
            fi

            # Start the process using the wrapper
            start-stop-daemon --background --start --quiet --pidfile $PIDFILE \
                        --make-pidfile --chuid $DAEMONUSER:$DAEMONGROUP \
                        --exec $NUMACTL $DAEMON $DAEMON_OPTS
            errcode=$?
        return $errcode
}

stop_server() {
# Stop the process using the wrapper
            start-stop-daemon --stop --quiet --pidfile $PIDFILE \
                        --retry 300 \
                        --user $DAEMONUSER \
                        --exec $DAEMON
            errcode=$?
        return $errcode
}

force_stop() {
# Force the process to die killing it manually
        [ ! -e "$PIDFILE" ] && return
        if running ; then
                kill -15 $pid
        # Is it really dead?
                sleep "$DIETIME"s
                if running ; then
                        kill -9 $pid
                        sleep "$DIETIME"s
                        if running ; then
                                echo "Cannot kill $NAME (pid=$pid)!"
                                exit 1
                        fi
                fi
        fi
        rm -f $PIDFILE
}


case "$1" in
  start)
        log_daemon_msg "Starting $DESC" "$NAME"
        # Check if it's running first
        if running ;  then
            log_progress_msg "apparently already running"
            log_end_msg 0
            exit 0
        fi
        if start_server ; then
            # NOTE: Some servers might die some time after they start,
            # this code will detect this issue if STARTTIME is set
            # to a reasonable value
            [ -n "$STARTTIME" ] && sleep $STARTTIME # Wait some time
            if  running ;  then
                # It's ok, the server started and is running
                log_end_msg 0
            else
                # It is not running after we did start
                log_end_msg 1
            fi
        else
            # Either we could not start it
            log_end_msg 1
        fi
        ;;
  stop)
        log_daemon_msg "Stopping $DESC" "$NAME"
        if running ; then
            # Only stop the server if we see it running
                        errcode=0
            stop_server || errcode=$?
            log_end_msg $errcode
        else
            # If it's not running don't do anything
            log_progress_msg "apparently not running"
            log_end_msg 0
            exit 0
        fi
        ;;
  force-stop)
        # First try to stop gracefully the program
        $0 stop
        if running; then
            # If it's still running try to kill it more forcefully
            log_daemon_msg "Stopping (force) $DESC" "$NAME"
                        errcode=0
            force_stop || errcode=$?
            log_end_msg $errcode
        fi
        ;;
  restart|force-reload)
        log_daemon_msg "Restarting $DESC" "$NAME"
                errcode=0
        stop_server || errcode=$?
        # Wait some sensible amount, some server need this
        [ -n "$DIETIME" ] && sleep $DIETIME
        start_server || errcode=$?
        [ -n "$STARTTIME" ] && sleep $STARTTIME
        running || errcode=$?
        log_end_msg $errcode
        ;;
  status)

        log_daemon_msg "Checking status of $DESC" "$NAME"
        if running ;  then
            log_progress_msg "running"
            log_end_msg 0
        else
            log_progress_msg "apparently not running"
            log_end_msg 1
            exit 1
        fi
        ;;
  # MongoDB can't reload its configuration.
  reload)
        log_warning_msg "Reloading $NAME daemon: not implemented, as the daemon"
        log_warning_msg "cannot re-read the config file (use restart)."
        ;;

  *)
        N=/etc/init.d/$NAME
        echo "Usage: $N {start|stop|force-stop|restart|force-reload|status}" >&2
        exit 1
        ;;
esac

exit 0

# Agreed with upstream, that redefining rpath is necessary as xulrunner used to
# change API without changing so-name
mongodb: binary-or-shlib-defines-rpath ./usr/bin/mongo /usr/lib64/xulrunner-1.9.1
mongodb: binary-or-shlib-defines-rpath ./usr/bin/mongocryptd /usr/lib64/xulrunner-1.9.1
mongodb: binary-or-shlib-defines-rpath ./usr/bin/mongod /usr/lib64/xulrunner-1.9.1
mongodb: binary-or-shlib-defines-rpath ./usr/bin/mongos /usr/lib64/xulrunner-1.9.1

.\" Man page generated from reStructuredText.
.
.TH "MONGO" "1" "Jun 23, 2020" "4.4" "mongodb-manual"
.SH NAME
mongo \- MongoDB Shell
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.SS On this page
.INDENT 0.0
.IP \(bu 2
\fI\%Description\fP
.IP \(bu 2
\fI\%Syntax\fP
.IP \(bu 2
\fI\%Options\fP
.IP \(bu 2
\fI\%Files\fP
.IP \(bu 2
\fI\%Environment\fP
.IP \(bu 2
\fI\%Keyboard Shortcuts\fP
.IP \(bu 2
\fI\%Use\fP
.UNINDENT
.SH DESCRIPTION
.sp
\fI\%mongo\fP is an interactive JavaScript shell interface to
MongoDB, which provides a powerful interface for system
administrators as well as a way for developers to test queries and
operations directly with the database. \fI\%mongo\fP also provides
a fully functional JavaScript environment for use with a MongoDB.
.sp
The \fI\%mongo\fP shell is included as part of the MongoDB Server installation. MongoDB also provides the \fI\%mongo\fP
shell as a standalone package. To download the standalone \fI\%mongo\fP
shell package:
.INDENT 0.0
.IP 1. 3
Access the Download Center for your Edition of MongoDB:
.INDENT 3.0
.IP \(bu 2
\fI\%MongoDB Community Download Center\fP
.IP \(bu 2
\fI\%MongoDB Enterprise Download Center\fP
.UNINDENT
.IP 2. 3
Select your preferred Version and Platform
from the dropdowns.
.IP 3. 3
Select the Package to download according to your
platform:
.TS
center;
|l|l|.
_
T{
Platform
T}	T{
Download Package
T}
_
T{
\fIWindows\fP
T}	T{
Select the \fBzip\fP package to download an archive which
includes the \fI\%mongo\fP shell.
T}
_
T{
\fImacOS\fP
T}	T{
Select the \fBtgz\fP package to download an archive which
includes the \fI\%mongo\fP shell.
T}
_
T{
\fILinux\fP
T}	T{
Select the \fBshell\fP package to download the
\fI\%mongo\fP shell.
T}
_
.TE
.UNINDENT
.sp
\fBNOTE:\fP
.INDENT 0.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
Starting in MongoDB 4.2 (and 4.0.13), the \fI\%mongo\fP shell displays a
warning message when connected to non\-genuine MongoDB instances as
these instances may behave differently from the official MongoDB
instances; e.g. missing or incomplete features, different feature
behaviors, etc.
.IP \(bu 2
Starting in version 4.0, \fI\%mongo\fP disables support for TLS 1.0
encryption on systems where TLS 1.1+ is available. For
more details, see 4.0\-disable\-tls\&.
.UNINDENT
.UNINDENT
.UNINDENT
.SH SYNTAX
.INDENT 0.0
.IP \(bu 2
You can run \fI\%mongo\fP shell without any command\-line
options use the default settings:
.INDENT 2.0
.INDENT 3.5
.sp
.nf
.ft C
mongo
.ft P
.fi
.UNINDENT
.UNINDENT
.IP \(bu 2
You can run \fI\%mongo\fP shell with a connection string that specifies the host and port and
other connection options. For example, the following includes the
\fBtls\fP:
.INDENT 2.0
.INDENT 3.5
.sp
.nf
.ft C
mongo "mongodb://mongodb0.example.com:27017/testdb?tls=true"
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
The \fBtls\fP option is available starting in MongoDB 4.2. In
earlier version, use the \fBssl\fP option.
.sp
To connect \fI\%mongo\fP shell to a replica set, you can
specify in the connection string the replica set members and name:
.INDENT 2.0
.INDENT 3.5
.sp
.nf
.ft C
mongo "mongodb://mongodb0.example.com.local:27017,mongodb1.example.com.local:27017,mongodb2.example.com.local:27017/?replicaSet=replA"
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
For more information on the connection string options, see
/reference/connection\-string\&.
.IP \(bu 2
You can run \fI\%mongo\fP shell with various command\-line
options. For example:
.INDENT 2.0
.INDENT 3.5
.sp
.nf
.ft C
mongo \-\-host mongodb0.example.com:27017 [additional options]

mongo \-\-host mongodb0.example.com \-\-port 27017 [additional options]
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
For more information on the options available, see \fI\%Options\fP\&.
.UNINDENT
.SH OPTIONS
.INDENT 0.0
.INDENT 3.5
.IP "Starting in version 4.2"
.INDENT 0.0
.IP \(bu 2
MongoDB deprecates the SSL options and insteads adds new
corresponding TLS options.
.UNINDENT
.UNINDENT
.UNINDENT
.SS Core Options
.INDENT 0.0
.TP
.B \-\-shell
Enables the shell interface. If you invoke the \fBmongo\fP command
and specify a JavaScript file as an argument, or use \fI\%\-\-eval\fP to
specify JavaScript on the command line, the \fI\%\-\-shell\fP option
provides the user with a shell prompt after the file finishes executing.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-nodb
Prevents the shell from connecting to any database instances. Later, to
connect to a database within the shell, see
mongo\-shell\-new\-connections\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-norc
Prevents the shell from sourcing and evaluating \fB~/.mongorc.js\fP on
start up.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-quiet
Silences output from the shell during the connection process.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-port <port>
Specifies the port where the \fBmongod\fP or \fBmongos\fP
instance is listening. If \fI\%\-\-port\fP is not specified,
\fBmongo\fP attempts to connect to port \fB27017\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-host <hostname>
Specifies the name of the host machine where the
\fBmongod\fP or \fBmongos\fP is running. If this is not specified,
\fBmongo\fP attempts to connect to a MongoDB process running on
the localhost.
.INDENT 7.0
.TP
.B To connect to a replica set,
Specify the \fBreplica set name\fP
and a seed list of set members. Use the following form:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
<replSetName>/<hostname1><:port>,<hostname2><:port>,<...>
.ft P
.fi
.UNINDENT
.UNINDENT
.TP
.B For TLS/SSL connections (\fB\-\-ssl\fP),
The \fI\%mongo\fP shell verifies that the hostname (specified
in \fI\%\-\-host\fP option or the connection string)
matches the \fBSAN\fP (or, if \fBSAN\fP is not present, the \fBCN\fP) in
the certificate presented by the \fBmongod\fP or
\fBmongos\fP\&. If \fBSAN\fP is present, \fI\%mongo\fP
does not match against the \fBCN\fP\&. If the hostname does not match
the \fBSAN\fP (or \fBCN\fP), the \fI\%mongo\fP shell will fail to
connect.
.sp
Starting in MongoDB 4.2, when performing comparison of SAN, MongoDB
supports comparison of DNS names or IP addresses. In previous versions,
MongoDB only supports comparisons of DNS names.
.TP
.B For \fI\%DNS seedlist connections\fP,
Specify the connection protocol as \fBmongodb+srv\fP, followed by
the DNS SRV hostname record and any options. The \fBauthSource\fP
and \fBreplicaSet\fP options, if included in the connection string,
will override any corresponding DNS\-configured options set in the
TXT record. Use of the \fBmongodb+srv:\fP connection string
implicitly enables TLS/SSL (normally set with \fBssl=true\fP) for
the client connection. The TLS/SSL option can be turned off by
setting \fBssl=false\fP in the query string.
.sp
Example:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongodb+srv://server.example.com/?connectionTimeout=3000ms
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
New in version 3.6.

.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-eval <javascript>
Evaluates a JavaScript expression that is specified as an argument.
\fBmongo\fP does not load its own environment when evaluating code.
As a result many options of the shell environment are not available.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-username <username>, \-u <username>
Specifies a username with which to authenticate to a MongoDB database
that uses authentication. Use in conjunction with the \fI\%\-\-password\fP and
\fI\%\-\-authenticationDatabase\fP options.
.sp
If connecting to a \fI\%MongoDB Atlas\fP cluster
using the \fBMONGODB\-AWS\fP \fI\%authentication mechanism\fP, specify your AWS access key ID in this
field, or in the connection string\&. Alternatively, this value may
also be supplied as the environment variable \fBAWS_ACCESS_KEY_ID\fP\&.
See \fI\%Connect to a MongoDB Atlas Cluster using AWS IAM Credentials\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-password <password>, \-p <password>
Specifies a password with which to authenticate to a MongoDB database
that uses authentication. Use in conjunction with the \fI\%\-\-username\fP
and \fI\%\-\-authenticationDatabase\fP options. To force \fBmongo\fP to
prompt for a password, enter the \fI\%\-\-password\fP option as the
last option and leave out the argument.
.sp
If connecting to a \fI\%MongoDB Atlas\fP cluster
using the \fBMONGODB\-AWS\fP \fI\%authentication mechanism\fP, specify your AWS secret access key in
this field, or in the connection string\&.  Alternatively, this value may
also be supplied as the environment variable
\fBAWS_SECRET_ACCESS_KEY\fP\&. See
\fI\%Connect to a MongoDB Atlas Cluster using AWS IAM Credentials\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-awsIamSessionToken <aws session token>
If connecting to a \fI\%MongoDB Atlas\fP cluster
using the \fBMONGODB\-AWS\fP \fI\%authentication mechanism\fP and using session tokens in addition to
your AWS access key ID and secret access key, specify your AWS
session token in this field, or in the connection string\&.  Alternatively, this value may
also be supplied as the environment variable
\fBAWS_SESSION_TOKEN\fP\&. See
\fI\%Connect to a MongoDB Atlas Cluster using AWS IAM Credentials\fP\&.
.sp
Only valid when using the \fBMONGODB\-AWS\fP
\fI\%authentication mechanism\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-help, \-h
Returns information on the options and use of \fBmongo\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-version
Returns the \fBmongo\fP release number.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-verbose
Increases the verbosity of the output of the shell during the connection
process.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-networkMessageCompressors <string>
New in version 3.4.

.sp
Enables network compression for communication between this
\fBmongo\fP shell and:
.INDENT 7.0
.IP \(bu 2
a \fBmongod\fP instance
.IP \(bu 2
a \fBmongos\fP instance.
.UNINDENT
.sp
You can specify the following compressors:
.INDENT 7.0
.IP \(bu 2
snappy
.IP \(bu 2
zlib (Available starting in MongoDB 3.6)
.IP \(bu 2
zstd (Available starting in MongoDB 4.2)
.UNINDENT
.sp
\fBIMPORTANT:\fP
.INDENT 7.0
.INDENT 3.5
Messages are compressed when both parties enable network
compression. Otherwise, messages between the parties are
uncompressed.
.UNINDENT
.UNINDENT
.sp
If you specify multiple compressors, then the order in which you list
the compressors matter as well as the communication initiator. For
example, if a \fI\%mongo\fP shell specifies the following network
compressors \fBzlib,snappy\fP and the \fBmongod\fP specifies
\fBsnappy,zlib\fP, messages between \fI\%mongo\fP shell and
\fBmongod\fP uses \fBzlib\fP\&.
.sp
If the parties do not share at least one common compressor, messages
between the parties are uncompressed. For example, if a
\fI\%mongo\fP shell specifies the network compressor
\fBzlib\fP and \fBmongod\fP specifies \fBsnappy\fP, messages
between \fI\%mongo\fP shell and \fBmongod\fP are not compressed.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-ipv6
Enables IPv6 support. \fBmongo\fP disables IPv6 by default.
.sp
To connect to a MongoDB cluster via IPv6, you must specify
both \fI\%\-\-ipv6\fP \fIand\fP
\fI\%\-\-host <mongod/mongos IPv6 address>\fP
when starting the \fBmongo\fP shell.
.sp
\fBmongod\fP and \fBmongos\fP disable IPv6 support
by default. Specifying \fI\%\-\-ipv6\fP when connecting to a
\fBmongod/mongos\fP does not enable IPv6 support on the
\fBmongod/mongos\fP\&. For documentation on enabling IPv6 support
on the \fBmongod/mongos\fP, see \fBnet.ipv6\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B <db name>
Specifies the name of the database to connect to. For
example:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongo admin
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
The above command will connect the \fBmongo\fP shell to the
admin database of the MongoDB deployment running on the local machine. You may specify a remote
database instance, with the resolvable hostname or IP address. Separate
the database name from the hostname using a \fB/\fP character. See the
following examples:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongo mongodb1.example.net/test
mongo mongodb1/admin
mongo 10.8.8.10/test
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
This syntax is the \fIonly\fP way to connect to a specific database.
.sp
To specify alternate hosts and a database, you must use this syntax and cannot
use \fI\%\-\-host\fP or \fI\%\-\-port\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-enableJavaScriptJIT
New in version 4.0.

.sp
Enable the JavaScript engine\(aqs JIT compiler.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-disableJavaScriptJIT
Changed in version 4.0: The JavaScript engine\(aqs JIT compiler is now disabled by default.

.sp
Disables the JavaScript engine\(aqs JIT compiler.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-disableJavaScriptProtection
New in version 3.4.

.sp
Allows fields of type javascript and
javascriptWithScope (*Deprecated*) to be automatically
marshalled to JavaScript functions in the \fI\%mongo\fP
shell.
.sp
With the \fB\-\-disableJavaScriptProtection\fP flag set, it is possible
to immediately execute JavaScript functions contained in documents.
The following example demonstrates this behavior within the shell:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
> db.test.insert({ _id: 1, jsFunc: function(){ print("hello") } } )
WriteResult({ "nInserted" : 1 })
> var doc = db.test.findOne({ _id: 1 })
> doc
{ "_id" : 1, "jsFunc" : function (){ print ("hello") } }
> typeof doc.jsFunc
function
> doc.jsFunc()
hello
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
The default behavior (when \fI\%mongo\fP starts \fIwithout\fP the
\fB\-\-disableJavaScriptProtection\fP flag) is to convert embedded
JavaScript functions to the non\-executable MongoDB shell type
\fBCode\fP\&. The following example demonstrates the default behavior
within the shell:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
> db.test.insert({ _id: 1, jsFunc: function(){ print("hello") } } )
WriteResult({ "nInserted" : 1 })
> var doc = db.test.findOne({ _id: 1 })
> doc
{ "_id" : 1, "jsFunc" : { "code" : "function (){print(\e"hello\e")}" } }
> typeof doc.func
object
> doc.func instanceof Code
true
> doc.jsFunc()
2016\-11\-09T12:30:36.808\-08:00 E QUERY    [thread1] TypeError: doc.jsFunc is
not a function :
@(shell):1:1
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B <file.js>
Specifies a JavaScript file to run and then exit. Generally this should
be the last option specified.
.INDENT 7.0
.INDENT 3.5
.SS Optional
.sp
To specify a JavaScript file to execute \fIand\fP allow
\fBmongo\fP to prompt you for a password using
\fI\%\-\-password\fP, pass the filename as the first parameter with
\fI\%\-\-username\fP and \fI\%\-\-password\fP as the last options, as
in the following:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
mongo file.js \-\-username username \-\-password
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.sp
Use the \fI\%\-\-shell\fP option to return to a shell after the file
finishes running.
.UNINDENT
.SS Authentication Options
.INDENT 0.0
.TP
.B \-\-authenticationDatabase <dbname>
Specifies the authentication database where the specified \fI\%\-\-username\fP has been created.
See user\-authentication\-database\&.
.sp
If you do not specify a value for \fI\%\-\-authenticationDatabase\fP, \fBmongo\fP uses the database
specified in the connection string.
.sp
If using the GSSAPI (Kerberos),
PLAIN (LDAP SASL), or \fBMONGODB\-AWS\fP
\fI\%authentication mechanisms\fP, you
must set \fI\%\-\-authenticationDatabase\fP to \fB$external\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-authenticationMechanism <name>
\fIDefault\fP: SCRAM\-SHA\-1
.sp
Specifies the authentication mechanism the \fBmongo\fP instance uses to
authenticate to the \fBmongod\fP or \fBmongos\fP\&.
.sp
Changed in version 4.4: With MongoDB 4.4, the \fBmongo\fP shell adds support for the
new \fBMONGODB\-AWS\fP authentication mechanism when connecting to a
\fI\%MongoDB Atlas\fP cluster.

.TS
center;
|l|l|.
_
T{
Value
T}	T{
Description
T}
_
T{
SCRAM\-SHA\-1
T}	T{
\fI\%RFC 5802\fP standard
Salted Challenge Response Authentication Mechanism using the SHA\-1
hash function.
T}
_
T{
SCRAM\-SHA\-256
T}	T{
\fI\%RFC 7677\fP standard
Salted Challenge Response Authentication Mechanism using the SHA\-256
hash function.
.sp
Requires featureCompatibilityVersion set to \fB4.0\fP\&.
.sp
New in version 4.0.
T}
_
T{
MONGODB\-X509
T}	T{
MongoDB TLS/SSL certificate authentication.
T}
_
T{
\fBMONGODB\-AWS\fP
T}	T{
External authentication using AWS IAM credentials for use in
connecting to a
\fI\%MongoDB Atlas\fP
cluster. See \fI\%Connect to a MongoDB Atlas Cluster using AWS IAM Credentials\fP\&.
.sp
New in version 4.4.
T}
_
T{
GSSAPI (Kerberos)
T}	T{
External authentication using Kerberos. This mechanism is
available only in \fI\%MongoDB Enterprise\fP\&.
T}
_
T{
PLAIN (LDAP SASL)
T}	T{
External authentication using LDAP. You can also use \fBPLAIN\fP
for authenticating in\-database users. \fBPLAIN\fP transmits
passwords in plain text. This mechanism is available only in
\fI\%MongoDB Enterprise\fP\&.
T}
_
.TE
.UNINDENT
.INDENT 0.0
.TP
.B \-\-gssapiHostName
Specify the hostname of a service using GSSAPI/Kerberos\&. \fIOnly\fP required if the hostname of a machine does
not match the hostname resolved by DNS.
.sp
This option is available only in MongoDB Enterprise.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-gssapiServiceName
Specify the name of the service using GSSAPI/Kerberos\&. Only required if the service does not use the
default name of \fBmongodb\fP\&.
.sp
This option is available only in MongoDB Enterprise.
.UNINDENT
.SS TLS Options
.sp
\fBNOTE:\fP
.INDENT 0.0
.INDENT 3.5
Starting in version 4.0, \fI\%mongo\fP disables support for TLS 1.0
encryption on systems where TLS 1.1+ is available. For
more details, see 4.0\-disable\-tls\&.
.UNINDENT
.UNINDENT
.INDENT 0.0
.INDENT 3.5
.SS See
.sp
/tutorial/configure\-ssl for full
documentation of MongoDB\(aqs support.
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-tls
New in version 4.2.

.sp
Enables connection to a \fBmongod\fP or \fBmongos\fP that has
TLS/SSL support enabled.
.sp
Starting in version 3.2.6, if \fB\-\-tlsCAFile\fP or \fBnet.tls.CAFile\fP
(or their aliases \fB\-\-sslCAFile\fP or \fBssl.CAFile\fP) is not
specified, the system\-wide CA certificate store will be used when
connecting to an TLS/SSL\-enabled server. In previous versions of
MongoDB, the \fI\%mongo\fP shell exited with an error that it
could not validate the certificate.
.sp
To use x.509 authentication, \fB\-\-tlsCAFile\fP or \fBnet.tls.CAFile\fP
must be specified unless using \fB\-\-tlsCertificateSelector\fP or
\fB\-\-net.tls.certificateSelector\fP\&. Or if using the \fBssl\fP aliases,
\fB\-\-sslCAFile\fP or \fBnet.ssl.CAFile\fP must be specified unless using
\fB\-\-sslCertificateSelector\fP or \fBnet.ssl.certificateSelector\fP\&.
.sp
For more information about TLS/SSL and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-tlsCertificateKeyFile <filename>
New in version 4.2.

.sp
Specifies the \fB\&.pem\fP file that contains both the TLS/SSL
certificate and key for the \fI\%mongo\fP shell. Specify the
file name of the \fB\&.pem\fP file using relative or absolute paths.
.sp
This option is required when using the \fI\%\-\-tls\fP
option to connect to a \fBmongod\fP or \fBmongos\fP
instance that requires client certificates\&. That is, the
\fI\%mongo\fP shell present this certificate to the server.
.sp
Changed in version 4.4: \fBmongod\fP / \fBmongos\fP logs a warning on
connection if the presented x.509 certificate expires within \fB30\fP
days of the \fBmongod/mongos\fP host system time. See
4.4\-rel\-notes\-certificate\-expiration\-warning for more
information.

.sp
For more information about TLS/SSL and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-tlsCertificateKeyFilePassword <value>
New in version 4.2.

.sp
Specifies the password to de\-crypt the certificate\-key file (i.e.
\fI\%\-\-tlsCertificateKeyFile\fP).
.sp
Use the \fI\%\-\-tlsCertificateKeyFilePassword\fP option only if the
certificate\-key file is encrypted. In all cases, the \fBmongo\fP will
redact the password from all logging and reporting output.
.sp
If the private key in the PEM file is encrypted and you do not
specify the \fI\%\-\-tlsCertificateKeyFilePassword\fP option, the \fBmongo\fP will prompt for a
passphrase. See ssl\-certificate\-password\&.
.sp
For more information about TLS/SSL and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-tlsCAFile <filename>
New in version 4.2.

.sp
Specifies the \fB\&.pem\fP file that contains the root certificate
chain from the Certificate Authority. This file is used to validate
the certificate presented by the
\fBmongod\fP/\fBmongos\fP instance.
.sp
Specify the file name of the \fB\&.pem\fP file using relative or
absolute paths.
.sp
Starting in version 3.2.6, if \fB\-\-tlsCAFile\fP or \fBnet.tls.CAFile\fP
(or their aliases \fB\-\-sslCAFile\fP or \fBssl.CAFile\fP) is not
specified, the system\-wide CA certificate store will be used when
connecting to an TLS/SSL\-enabled server. In previous versions of
MongoDB, the \fI\%mongo\fP shell exited with an error that it
could not validate the certificate.
.sp
To use x.509 authentication, \fB\-\-tlsCAFile\fP or \fBnet.tls.CAFile\fP
must be specified unless using \fB\-\-tlsCertificateSelector\fP or
\fB\-\-net.tls.certificateSelector\fP\&. Or if using the \fBssl\fP aliases,
\fB\-\-sslCAFile\fP or \fBnet.ssl.CAFile\fP must be specified unless using
\fB\-\-sslCertificateSelector\fP or \fBnet.ssl.certificateSelector\fP\&.
.sp
For more information about TLS/SSL and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-tlsCRLFile <filename>
New in version 4.2: In MongoDB 4.0 and earlier, see \fI\%\-\-sslCRLFile\fP\&.

.sp
Specifies the \fB\&.pem\fP file that contains the Certificate Revocation
List. Specify the file name of the \fB\&.pem\fP file using relative or
absolute paths.
.sp
For more information about TLS/SSL and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
Starting in version 4.4, to check for certificate revocation,
MongoDB \fBenables\fP the use of OCSP
(Online Certificate Status Protocol) by default as an alternative
to specifying a CRL file or using the system SSL certificate
store.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-tlsAllowInvalidHostnames
New in version 4.2.

.sp
Disables the validation of the hostnames in the certificate presented
by the \fBmongod\fP/\fBmongos\fP instance. Allows
\fBmongo\fP to connect to MongoDB instances even if the hostname in
the server certificates do not match the server\(aqs host.
.sp
For more information about TLS/SSL and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-tlsAllowInvalidCertificates
New in version 4.2.

.sp
Bypasses the validation checks for the certificates presented by the
\fBmongod\fP/\fBmongos\fP instance and allows
connections to servers that present invalid certificates.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
Starting in MongoDB 4.0, if you specify
\fB\-\-sslAllowInvalidCertificates\fP or
\fBnet.ssl.allowInvalidCertificates: true\fP (or in MongoDB 4.2, the
alias \fB\-\-tlsAllowInvalidateCertificates\fP or
\fBnet.tls.allowInvalidCertificates: true\fP) when using x.509
authentication, an invalid certificate is only sufficient to
establish a TLS/SSL connection but is \fIinsufficient\fP for
authentication.
.UNINDENT
.UNINDENT
.sp
\fBWARNING:\fP
.INDENT 7.0
.INDENT 3.5
Although available, avoid using the
\fB\-\-sslAllowInvalidCertificates\fP option if possible. If the use of
\fB\-\-sslAllowInvalidCertificates\fP is necessary, only use the option
on systems where intrusion is not possible.
.sp
If the \fI\%mongo\fP shell (and other
mongodb\-tools\-support\-ssl) runs with the
\fB\-\-sslAllowInvalidCertificates\fP option, the
\fI\%mongo\fP shell (and other
mongodb\-tools\-support\-ssl) will not attempt to validate
the server certificates. This creates a vulnerability to expired
\fBmongod\fP and \fBmongos\fP certificates as
well as to foreign processes posing as valid
\fBmongod\fP or \fBmongos\fP instances. If you
only need to disable the validation of the hostname in the
TLS/SSL certificates, see \fB\-\-sslAllowInvalidHostnames\fP\&.
.UNINDENT
.UNINDENT
.sp
When using the \fBallowInvalidCertificates\fP setting,
MongoDB logs as a warning the use of the invalid certificate.
.sp
For more information about TLS/SSL and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-tlsFIPSMode
New in version 4.2.

.sp
Directs the \fBmongo\fP to use the FIPS mode of the TLS/SSL
library. Your system must have a FIPS compliant library to use
the \fI\%\-\-tlsFIPSMode\fP option.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
FIPS\-compatible TLS/SSL is
available only in \fI\%MongoDB Enterprise\fP\&. See
/tutorial/configure\-fips for more information.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-tlsCertificateSelector <parameter>=<value>
New in version 4.2: Available on Windows and macOS as an alternative to \fI\%\-\-tlsCertificateKeyFile\fP\&.
.sp
The \fI\%\-\-tlsCertificateKeyFile\fP and \fI\%\-\-tlsCertificateSelector\fP options are mutually exclusive. You can only
specify one.

.sp
Specifies a certificate property in order to select a matching
certificate from the operating system\(aqs certificate store.
.sp
\fI\%\-\-tlsCertificateSelector\fP accepts an argument of the format \fB<property>=<value>\fP
where the property can be one of the following:
.TS
center;
|l|l|l|.
_
T{
Property
T}	T{
Value type
T}	T{
Description
T}
_
T{
\fBsubject\fP
T}	T{
ASCII string
T}	T{
Subject name or common name on certificate
T}
_
T{
\fBthumbprint\fP
T}	T{
hex string
T}	T{
A sequence of bytes, expressed as hexadecimal, used to
identify a public key by its SHA\-1 digest.
.sp
The \fBthumbprint\fP is sometimes referred to as a
\fBfingerprint\fP\&.
T}
_
.TE
.sp
When using the system SSL certificate store, OCSP (Online
Certificate Status Protocol) is used to validate the revocation
status of certificates.
.sp
Changed in version 4.4: \fBmongod\fP / \fBmongos\fP logs a warning on
connection if the presented x.509 certificate expires within \fB30\fP
days of the \fBmongod/mongos\fP host system time. See
4.4\-rel\-notes\-certificate\-expiration\-warning for more
information.

.UNINDENT
.INDENT 0.0
.TP
.B \-\-tlsDisabledProtocols <string>
New in version 4.2.

.sp
Disables the specified TLS protocols. The option recognizes the
following protocols: \fBTLS1_0\fP, \fBTLS1_1\fP, \fBTLS1_2\fP, and
starting in version 4.0.4 (and 3.6.9 and 3.4.24), \fBTLS1_3\fP\&.
.INDENT 7.0
.IP \(bu 2
On macOS, you cannot disable \fBTLS1_1\fP and leave both \fBTLS1_0\fP and
\fBTLS1_2\fP enabled. You must also disable at least one of the other
two; for example, \fBTLS1_0,TLS1_1\fP\&.
.IP \(bu 2
To list multiple protocols, specify as a comma separated list of
protocols. For example \fBTLS1_0,TLS1_1\fP\&.
.IP \(bu 2
The specified disabled protocols overrides any default disabled
protocols.
.UNINDENT
.sp
Starting in version 4.0, MongoDB disables the use of TLS 1.0 if TLS
1.1+ is available on the system. To enable the
disabled TLS 1.0, specify \fBnone\fP to \fI\%\-\-tlsDisabledProtocols\fP\&.  See 4.0\-disable\-tls\&.
.UNINDENT
.SS SSL Options (Deprecated)
.sp
\fBIMPORTANT:\fP
.INDENT 0.0
.INDENT 3.5
Starting in version 4.2, the SSL options are deprecated. Use the TLS
counterparts instead. The SSL protocol is deprecated and MongoDB
supports TLS 1.0 and later.
.UNINDENT
.UNINDENT
.sp
\fBNOTE:\fP
.INDENT 0.0
.INDENT 3.5
Starting in version 4.0, \fI\%mongo\fP disables support for TLS 1.0
encryption on systems where TLS 1.1+ is available. For
more details, see 4.0\-disable\-tls\&.
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-ssl
Deprecated since version 4.2: Use \fI\%\-\-tls\fP instead.

.sp
Enables connection to a \fBmongod\fP or \fBmongos\fP that has
TLS/SSL support enabled.
.sp
Starting in version 3.2.6, if \fB\-\-tlsCAFile\fP or \fBnet.tls.CAFile\fP
(or their aliases \fB\-\-sslCAFile\fP or \fBssl.CAFile\fP) is not
specified, the system\-wide CA certificate store will be used when
connecting to an TLS/SSL\-enabled server. In previous versions of
MongoDB, the \fI\%mongo\fP shell exited with an error that it
could not validate the certificate.
.sp
To use x.509 authentication, \fB\-\-tlsCAFile\fP or \fBnet.tls.CAFile\fP
must be specified unless using \fB\-\-tlsCertificateSelector\fP or
\fB\-\-net.tls.certificateSelector\fP\&. Or if using the \fBssl\fP aliases,
\fB\-\-sslCAFile\fP or \fBnet.ssl.CAFile\fP must be specified unless using
\fB\-\-sslCertificateSelector\fP or \fBnet.ssl.certificateSelector\fP\&.
.sp
For more information about TLS/SSL and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslPEMKeyFile <filename>
Deprecated since version 4.2: Use \fI\%\-\-tlsCertificateKeyFile\fP instead.

.sp
Specifies the \fB\&.pem\fP file that contains both the TLS/SSL certificate
and key. Specify the file name of the \fB\&.pem\fP file using relative
or absolute paths.
.sp
This option is required when using the \fB\-\-ssl\fP option to connect
to a \fBmongod\fP or \fBmongos\fP that has
\fBCAFile\fP enabled \fIwithout\fP
\fBallowConnectionsWithoutCertificates\fP\&.
.sp
For more information about TLS/SSL and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslPEMKeyPassword <value>
Deprecated since version 4.2: Use \fI\%\-\-tlsCertificateKeyFilePassword\fP instead.

.sp
Specifies the password to de\-crypt the certificate\-key file (i.e.
\fB\-\-sslPEMKeyFile\fP). Use the \fI\%\-\-sslPEMKeyPassword\fP option only if the
certificate\-key file is encrypted. In all cases, the \fBmongo\fP will
redact the password from all logging and reporting output.
.sp
If the private key in the PEM file is encrypted and you do not
specify the \fI\%\-\-sslPEMKeyPassword\fP option, the \fBmongo\fP will prompt for a
passphrase. See ssl\-certificate\-password\&.
.sp
For more information about TLS/SSL and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslCAFile <filename>
Deprecated since version 4.2: Use \fI\%\-\-tlsCAFile\fP instead.

.sp
Specifies the \fB\&.pem\fP file that contains the root certificate chain
from the Certificate Authority. Specify the file name of the
\fB\&.pem\fP file using relative or absolute paths.
.sp
Starting in version 3.2.6, if \fB\-\-tlsCAFile\fP or \fBnet.tls.CAFile\fP
(or their aliases \fB\-\-sslCAFile\fP or \fBssl.CAFile\fP) is not
specified, the system\-wide CA certificate store will be used when
connecting to an TLS/SSL\-enabled server. In previous versions of
MongoDB, the \fI\%mongo\fP shell exited with an error that it
could not validate the certificate.
.sp
To use x.509 authentication, \fB\-\-tlsCAFile\fP or \fBnet.tls.CAFile\fP
must be specified unless using \fB\-\-tlsCertificateSelector\fP or
\fB\-\-net.tls.certificateSelector\fP\&. Or if using the \fBssl\fP aliases,
\fB\-\-sslCAFile\fP or \fBnet.ssl.CAFile\fP must be specified unless using
\fB\-\-sslCertificateSelector\fP or \fBnet.ssl.certificateSelector\fP\&.
.sp
For more information about TLS/SSL and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslCertificateSelector <parameter>=<value>
Deprecated since version 4.2: Use \fI\%\-\-tlsCertificateSelector\fP instead.

.sp
New in version 4.0: Available on Windows and macOS as an alternative to \fI\%\-\-tlsCertificateKeyFile\fP\&.
.sp
\fI\%\-\-tlsCertificateKeyFile\fP and \fI\%\-\-sslCertificateSelector\fP options are mutually exclusive. You can only
specify one.

.sp
Specifies a certificate property in order to select a matching
certificate from the operating system\(aqs certificate store.
.sp
\fI\%\-\-sslCertificateSelector\fP accepts an argument of the format \fB<property>=<value>\fP
where the property can be one of the following:
.TS
center;
|l|l|l|.
_
T{
Property
T}	T{
Value type
T}	T{
Description
T}
_
T{
\fBsubject\fP
T}	T{
ASCII string
T}	T{
Subject name or common name on certificate
T}
_
T{
\fBthumbprint\fP
T}	T{
hex string
T}	T{
A sequence of bytes, expressed as hexadecimal, used to
identify a public key by its SHA\-1 digest.
.sp
The \fBthumbprint\fP is sometimes referred to as a
\fBfingerprint\fP\&.
T}
_
.TE
.sp
When using the system SSL certificate store, OCSP (Online
Certificate Status Protocol) is used to validate the revocation
status of certificates.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslCRLFile <filename>
Deprecated since version 4.2: Use \fI\%\-\-tlsCRLFile\fP instead.

.sp
Specifies the \fB\&.pem\fP file that contains the Certificate Revocation
List. Specify the file name of the \fB\&.pem\fP file using relative or
absolute paths.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
Starting in version 4.4, to check for certificate revocation,
MongoDB \fBenables\fP the use of OCSP
(Online Certificate Status Protocol) by default as an alternative
to specifying a CRL file or using the system SSL certificate
store.
.UNINDENT
.UNINDENT
.sp
For more information about TLS/SSL and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslFIPSMode
Deprecated since version 4.2: Use \fI\%\-\-tlsFIPSMode\fP instead.

.sp
Directs the \fBmongo\fP to use the FIPS mode of the TLS/SSL
library. Your system must have a FIPS compliant library to use
the \fI\%\-\-sslFIPSMode\fP option.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
FIPS\-compatible TLS/SSL is
available only in \fI\%MongoDB Enterprise\fP\&. See
/tutorial/configure\-fips for more information.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslAllowInvalidCertificates
Deprecated since version 4.2: Use \fI\%\-\-tlsAllowInvalidCertificates\fP instead.

.sp
Bypasses the validation checks for server certificates and allows
the use of invalid certificates to connect.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
Starting in MongoDB 4.0, if you specify
\fB\-\-sslAllowInvalidCertificates\fP or
\fBnet.ssl.allowInvalidCertificates: true\fP (or in MongoDB 4.2, the
alias \fB\-\-tlsAllowInvalidateCertificates\fP or
\fBnet.tls.allowInvalidCertificates: true\fP) when using x.509
authentication, an invalid certificate is only sufficient to
establish a TLS/SSL connection but is \fIinsufficient\fP for
authentication.
.UNINDENT
.UNINDENT
.sp
\fBWARNING:\fP
.INDENT 7.0
.INDENT 3.5
Although available, avoid using the
\fB\-\-sslAllowInvalidCertificates\fP option if possible. If the use of
\fB\-\-sslAllowInvalidCertificates\fP is necessary, only use the option
on systems where intrusion is not possible.
.sp
If the \fI\%mongo\fP shell (and other
mongodb\-tools\-support\-ssl) runs with the
\fB\-\-sslAllowInvalidCertificates\fP option, the
\fI\%mongo\fP shell (and other
mongodb\-tools\-support\-ssl) will not attempt to validate
the server certificates. This creates a vulnerability to expired
\fBmongod\fP and \fBmongos\fP certificates as
well as to foreign processes posing as valid
\fBmongod\fP or \fBmongos\fP instances. If you
only need to disable the validation of the hostname in the
TLS/SSL certificates, see \fB\-\-sslAllowInvalidHostnames\fP\&.
.UNINDENT
.UNINDENT
.sp
When using the \fBallowInvalidCertificates\fP setting,
MongoDB logs as a warning the use of the invalid certificate.
.sp
For more information about TLS/SSL and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslAllowInvalidHostnames
Deprecated since version 4.2: Use \fI\%\-\-tlsAllowInvalidHostnames\fP instead.

.sp
Disables the validation of the hostnames in TLS/SSL certificates. Allows
\fBmongo\fP to connect to MongoDB instances even if the hostname in their
certificates do not match the specified hostname.
.sp
For more information about TLS/SSL and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslDisabledProtocols <string>
Deprecated since version 4.2: Use \fI\%\-\-tlsDisabledProtocols\fP instead.

.sp
Disables the specified TLS protocols. The option recognizes the
following protocols: \fBTLS1_0\fP, \fBTLS1_1\fP, \fBTLS1_2\fP, and
starting in version 4.0.4 (and 3.6.9), \fBTLS1_3\fP\&.
.INDENT 7.0
.IP \(bu 2
On macOS, you cannot disable \fBTLS1_1\fP and leave both \fBTLS1_0\fP and
\fBTLS1_2\fP enabled. You must also disable at least one of the other
two; for example, \fBTLS1_0,TLS1_1\fP\&.
.IP \(bu 2
To list multiple protocols, specify as a comma separated list of
protocols. For example \fBTLS1_0,TLS1_1\fP\&.
.IP \(bu 2
The specified disabled protocols overrides any default disabled
protocols.
.UNINDENT
.sp
Starting in version 4.0, MongoDB disables the use of TLS 1.0 if TLS
1.1+ is available on the system. To enable the
disabled TLS 1.0, specify \fBnone\fP to \fI\%\-\-sslDisabledProtocols\fP\&.  See 4.0\-disable\-tls\&.
.sp
New in version 3.6.5.

.UNINDENT
.SS Sessions
.INDENT 0.0
.TP
.B \-\-retryWrites
New in version 3.6.

.sp
Enables retryable writes as the default for sessions in the
\fI\%mongo\fP shell.
.sp
For more information on sessions, see sessions\&.
.UNINDENT
.SS Client\-Side Field Level Encryption Options
.INDENT 0.0
.TP
.B \-\-awsAccessKeyId <string>
An AWS \fI\%Access Key\fP
associated to an IAM user with \fBList\fP and \fBRead\fP permissions for the
AWS Key Management Service (KMS). The \fBmongo\fP shell uses the specified
\fI\%\-\-awsAccessKeyId\fP to access the KMS.
.sp
\fI\%\-\-awsAccessKeyId\fP is required for enabling /core/security\-client\-side\-encryption
for the \fBmongo\fP shell session. \fI\%\-\-awsAccessKeyId\fP requires \fIall\fP of the following
command line options:
.INDENT 7.0
.IP \(bu 2
\fI\%\-\-awsSecretAccessKey\fP
.IP \(bu 2
\fI\%\-\-keyVaultNamespace\fP
.UNINDENT
.sp
If \fI\%\-\-awsAccessKeyId\fP is omitted, use the \fBMongo()\fP constructor within the shell
session to enable client\-side field level encryption.
.sp
To mitigate the risk of leaking access keys into logs, consider specifying
an environmental variable to \fI\%\-\-awsAccessKeyId\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-awsSecretAccessKey <string>
An AWS \fI\%Secret Key\fP
associated to the specified \fI\%\-\-awsAccessKeyId\fP\&.
.sp
\fI\%\-\-awsSecretAccessKey\fP is required for enabling /core/security\-client\-side\-encryption
for the \fBmongo\fP shell session. \fI\%\-\-awsSecretAccessKey\fP requires \fIall\fP of the following
command line options:
.INDENT 7.0
.IP \(bu 2
\fI\%\-\-awsAccessKeyId\fP
.IP \(bu 2
\fI\%\-\-keyVaultNamespace\fP
.UNINDENT
.sp
If \fI\%\-\-awsSecretAccessKey\fP and its supporting options are omitted, use \fBMongo()\fP
within the shell session to enable client\-side field level encryption.
.sp
To mitigate the risk of leaking access keys into logs, consider specifying
an environmental variable to \fI\%\-\-awsSecretAccessKey\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-awsSessionToken <string>
An AWS \fI\%Session Token\fP
associated to the specified \fI\%\-\-awsAccessKeyId\fP\&.
.sp
\fI\%\-\-awsSessionToken\fP is required for enabling /core/security\-client\-side\-encryption
for the \fBmongo\fP shell session. \fI\%\-\-awsSessionToken\fP requires \fIall\fP of the following
command line options:
.INDENT 7.0
.IP \(bu 2
\fI\%\-\-awsAccessKeyId\fP
.IP \(bu 2
\fI\%\-\-awsSecretAccessKey\fP
.IP \(bu 2
\fI\%\-\-keyVaultNamespace\fP
.UNINDENT
.sp
If \fI\%\-\-awsSessionToken\fP and its supporting options are omitted, use \fBMongo()\fP
within the shell session to enable client\-side field level encryption.
.sp
To mitigate the risk of leaking access keys into logs, consider specifying
an environmental variable to \fI\%\-\-awsSessionToken\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-keyVaultNamespace <string>
The full namespace (\fB<database>.<collection>\fP) of the collection used as a
key vault for /core/security\-client\-side\-encryption\&. \fI\%\-\-keyVaultNamespace\fP is
required for enabling client\-side field level encryption. for the \fBmongo\fP
shell session. \fBmongo\fP creates the specified namespace if it does not
exist.
.sp
\fI\%\-\-keyVaultNamespace\fP requires \fIall\fP of the following command line options:
.INDENT 7.0
.IP \(bu 2
\fI\%\-\-awsAccessKeyId\fP
.IP \(bu 2
\fI\%\-\-awsSecretAccessKey\fP
.UNINDENT
.sp
If \fI\%\-\-keyVaultNamespace\fP and its supporting options are omitted, use the \fBMongo()\fP
constructor within the shell session to enable client\-side field level
encryption.
.UNINDENT
.SH FILES
.INDENT 0.0
.TP
.B \fB~/.dbshell\fP
\fI\%mongo\fP maintains a history of commands in the \fB\&.dbshell\fP
file.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
\fI\%mongo\fP does not record interaction related to
authentication in the history file, including
\fBauthenticate\fP and \fBdb.createUser()\fP\&.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \fB~/.mongorc.js\fP
\fI\%mongo\fP will read the \fB\&.mongorc.js\fP file from the home
directory of the user invoking \fI\%mongo\fP\&. In the file, users
can define variables, customize the \fI\%mongo\fP shell prompt,
or update information that they would like updated every time they
launch a shell. If you use the shell to evaluate a JavaScript file
or expression either on the command line with \fI\%mongo \-\-eval\fP or
by specifying \fI\%a .js file to mongo\fP,
\fI\%mongo\fP will read the \fB\&.mongorc.js\fP file \fIafter\fP the
JavaScript has finished processing.
.sp
Specify the \fI\%\-\-norc\fP option to disable
reading \fB\&.mongorc.js\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B \fB/etc/mongorc.js\fP
Global \fBmongorc.js\fP file which the \fI\%mongo\fP shell
evaluates upon start\-up. If a user also has a \fB\&.mongorc.js\fP
file located in the \fI\%HOME\fP directory, the \fI\%mongo\fP
shell evaluates the global \fB/etc/mongorc.js\fP file \fIbefore\fP
evaluating the user\(aqs \fB\&.mongorc.js\fP file.
.sp
\fB/etc/mongorc.js\fP must have read permission for the user
running the shell. The \fI\%\-\-norc\fP option for \fI\%mongo\fP
suppresses only the user\(aqs \fB\&.mongorc.js\fP file.
.sp
On Windows, the global \fBmongorc.js </etc/mongorc.js>\fP exists
in the \fB%ProgramData%\eMongoDB\fP directory.
.TP
.B \fB/tmp/mongo_edit\fP\fI<time_t>\fP\fB\&.js\fP
Created by \fI\%mongo\fP when editing a file. If the file exists,
\fI\%mongo\fP will append an integer from \fB1\fP to \fB10\fP to the
time value to attempt to create a unique file.
.TP
.B \fB%TEMP%mongo_edit\fP\fI<time_t>\fP\fB\&.js\fP
Created by \fBmongo.exe\fP on Windows when editing a file. If
the file exists, \fI\%mongo\fP will append an integer from \fB1\fP
to \fB10\fP to the time value to attempt to create a unique file.
.UNINDENT
.SH ENVIRONMENT
.INDENT 0.0
.TP
.B EDITOR
Specifies the path to an editor to use with the \fBedit\fP shell
command.  A JavaScript variable \fBEDITOR\fP will override the value of
\fI\%EDITOR\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B HOME
Specifies the path to the home directory where \fI\%mongo\fP will
read the \fB\&.mongorc.js\fP file and write the \fB\&.dbshell\fP
file.
.UNINDENT
.INDENT 0.0
.TP
.B HOMEDRIVE
On Windows systems, \fI\%HOMEDRIVE\fP specifies the path the
directory where \fI\%mongo\fP will read the \fB\&.mongorc.js\fP
file and write the \fB\&.dbshell\fP file.
.UNINDENT
.INDENT 0.0
.TP
.B HOMEPATH
Specifies the Windows path to the home directory where
\fI\%mongo\fP will read the \fB\&.mongorc.js\fP file and write
the \fB\&.dbshell\fP file.
.UNINDENT
.SH KEYBOARD SHORTCUTS
.sp
The \fI\%mongo\fP shell supports the following keyboard shortcuts:
[1]
.TS
center;
|l|l|.
_
T{
\fBKeybinding\fP
T}	T{
\fBFunction\fP
T}
_
T{
Up arrow
T}	T{
Retrieve previous command from history
T}
_
T{
Down\-arrow
T}	T{
Retrieve next command from history
T}
_
T{
Home
T}	T{
Go to beginning of the line
T}
_
T{
End
T}	T{
Go to end of the line
T}
_
T{
Tab
T}	T{
Autocomplete method/command
T}
_
T{
Left\-arrow
T}	T{
Go backward one character
T}
_
T{
Right\-arrow
T}	T{
Go forward one character
T}
_
T{
Ctrl\-left\-arrow
T}	T{
Go backward one word
T}
_
T{
Ctrl\-right\-arrow
T}	T{
Go forward one word
T}
_
T{
Meta\-left\-arrow
T}	T{
Go backward one word
T}
_
T{
Meta\-right\-arrow
T}	T{
Go forward one word
T}
_
T{
Ctrl\-A
T}	T{
Go to the beginning of the line
T}
_
T{
Ctrl\-B
T}	T{
Go backward one character
T}
_
T{
Ctrl\-C
T}	T{
Exit the \fI\%mongo\fP shell
T}
_
T{
Ctrl\-D
T}	T{
Delete a char (or exit the \fI\%mongo\fP shell)
T}
_
T{
Ctrl\-E
T}	T{
Go to the end of the line
T}
_
T{
Ctrl\-F
T}	T{
Go forward one character
T}
_
T{
Ctrl\-G
T}	T{
Abort
T}
_
T{
Ctrl\-J
T}	T{
Accept/evaluate the line
T}
_
T{
Ctrl\-K
T}	T{
Kill/erase the line
T}
_
T{
Ctrl\-L or type \fBcls\fP
T}	T{
Clear the screen
T}
_
T{
Ctrl\-M
T}	T{
Accept/evaluate the line
T}
_
T{
Ctrl\-N
T}	T{
Retrieve next command from history
T}
_
T{
Ctrl\-P
T}	T{
Retrieve previous command from history
T}
_
T{
Ctrl\-R
T}	T{
Reverse\-search command history
T}
_
T{
Ctrl\-S
T}	T{
Forward\-search command history
T}
_
T{
Ctrl\-T
T}	T{
Transpose characters
T}
_
T{
Ctrl\-U
T}	T{
Perform Unix line\-discard
T}
_
T{
Ctrl\-W
T}	T{
Perform Unix word\-rubout
T}
_
T{
Ctrl\-Y
T}	T{
Yank
T}
_
T{
Ctrl\-Z
T}	T{
Suspend (job control works in linux)
T}
_
T{
Ctrl\-H
T}	T{
Backward\-delete a character
T}
_
T{
Ctrl\-I
T}	T{
Complete, same as Tab
T}
_
T{
Meta\-B
T}	T{
Go backward one word
T}
_
T{
Meta\-C
T}	T{
Capitalize word
T}
_
T{
Meta\-D
T}	T{
Kill word
T}
_
T{
Meta\-F
T}	T{
Go forward one word
T}
_
T{
Meta\-L
T}	T{
Change word to lowercase
T}
_
T{
Meta\-U
T}	T{
Change word to uppercase
T}
_
T{
Meta\-Y
T}	T{
Yank\-pop
T}
_
T{
Meta\-Backspace
T}	T{
Backward\-kill word
T}
_
T{
Meta\-<
T}	T{
Retrieve the first command in command history
T}
_
T{
Meta\->
T}	T{
Retrieve the last command in command history
T}
_
.TE
.IP [1] 5
MongoDB accommodates multiple keybinding.
Since 2.0, \fI\%mongo\fP includes support for basic emacs
keybindings.
.SH USE
.sp
Typically users invoke the shell with the \fI\%mongo\fP command at
the system prompt. Consider the following examples for other
scenarios.
.SS Connect to a \fBmongod\fP Instance with Access Control
.sp
To connect to a database on a remote host using authentication and a
non\-standard port, use the following form:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
mongo \-\-username <user> \-\-password \-\-host <host> \-\-port 28015
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Alternatively, consider the following short form:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
mongo \-u <user> \-p  \-\-host <host> \-\-port 28015
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Replace \fB<user>\fP and \fB<host>\fP with the appropriate values for your
situation and substitute or omit the \fI\%\-\-port\fP as
needed.
.sp
If you do not specify the password to the \fI\%\-\-password\fP or \fI\%\-p\fP command\-line option, the
\fI\%mongo\fP shell prompts for the password.
.SS Connect to a Replica Set Using the DNS Seedlist Connection Format
.sp
New in version 3.6.

.sp
To connect to a replica set described using the
connections\-dns\-seedlist, use the \fI\%\-\-host\fP option
to specify the connection string to the \fI\%mongo\fP shell. In
the following example, the DNS configuration resembles:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
Record                            TTL   Class    Priority Weight Port  Target
_mongodb._tcp.server.example.com. 86400 IN SRV   0        5      27317 mongodb1.example.com.
_mongodb._tcp.server.example.com. 86400 IN SRV   0        5      27017 mongodb2.example.com.
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
The TXT record for the DNS entry includes the \fBreplicaSet\fP and \fBauthSource\fP options:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
Record              TTL   Class    Text
server.example.com. 86400 IN TXT   "replicaSet=rs0&authSource=admin"
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
The following command then connects the \fI\%mongo\fP shell to
the replica set:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
mongo \-\-host "mongodb+srv://server.example.com/?username=allison"
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
The \fI\%mongo\fP shell will automatically prompt you to provide
the password for the user specified in the \fBusername\fP option.
.SS Connect to a MongoDB Atlas Cluster using AWS IAM Credentials
.sp
New in version 4.4.

.sp
To connect to a \fI\%MongoDB Atlas\fP cluster which
has been configured to support authentication via \fI\%AWS IAM credentials\fP,
provide a connection string to
the \fI\%mongo\fP shell similar to the following:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
mongo \(aqmongodb+srv://<aws access key id>:<aws secret access key>@cluster0.example.com/testdb?authSource=$external&authMechanism=MONGODB\-AWS\(aq
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Connecting to Atlas using AWS IAM credentials in this manner uses the
\fBMONGODB\-AWS\fP \fBauthentication mechanism\fP
and the \fB$external\fP \fBauthSource\fP, as shown in this example.
.sp
If using an \fI\%AWS session token\fP
as well, provide it with the \fBAWS_SESSION_TOKEN\fP
\fBauthMechanismProperties\fP value in your
connection string, as follows:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
mongo \(aqmongodb+srv://<aws access key id>:<aws secret access key>@cluster0.example.com/testdb?authSource=$external&authMechanism=MONGODB\-AWS&authMechanismProperties=AWS_SESSION_TOKEN:<aws session token>\(aq
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
If the AWS access key ID, secret access key, or session token include
the \(aqat\(aq sign \fB@\fP, colon \fB:\fP, slash \fB/\fP, or the percent sign \fB%\fP
characters, those characters must be converted using \fI\%percent encoding\fP\&.
.sp
Alternatively, the AWS access key ID, and secret access key, and
optionally session token can each be provided outside of the connection
string using the \fI\%\-\-username\fP, \fI\%\-\-password\fP, and
\fI\%\-\-awsIamSessionToken\fP options instead, like so:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
mongo \(aqmongodb+srv://cluster0.example.com/testdb?authSource=$external&authMechanism=MONGODB\-AWS\(aq \-\-username <aws access key id> \-\-password <aws secret access key> \-\-awsIamSessionToken <aws session token>
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
When provided as command line parameters, these three options do not
require percent encoding.
.sp
You may also set these credentials on your platform using standard
\fI\%AWS IAM environment variables\fP\&.
The \fI\%mongo\fP shell checks for the following environment
variables when you use the \fBMONGODB\-AWS\fP
\fBauthentication mechanism\fP:
.INDENT 0.0
.IP \(bu 2
\fBAWS_ACCESS_KEY_ID\fP
.IP \(bu 2
\fBAWS_SECRET_ACCESS_KEY\fP
.IP \(bu 2
\fBAWS_SESSION_TOKEN\fP
.UNINDENT
.sp
If set, these credentials do not need to be specified in the connection
string or via the explicit options to the \fI\%mongo\fP shell
(i.e. \fI\%\-\-username\fP and \fI\%\-\-password\fP).
.sp
The following example sets these environment variables in the \fBbash\fP
shell:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
export AWS_ACCESS_KEY_ID=\(aq<aws access key id>\(aq
export AWS_SECRET_ACCESS_KEY=\(aq<aws secret access key>\(aq
export AWS_SESSION_TOKEN=\(aq<aws session token>\(aq
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Syntax for setting environment variables in other shells will be
different. Consult the documentation for your platform for more
information.
.sp
You can verify that these environment variables have been set with the
following command:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
env | grep AWS
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Once set, the following example connects to a MongoDB Atlas cluster
using these environment variables:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
mongo \(aqmongodb+srv://cluster0.example.com/testdb?authSource=$external&authMechanism=MONGODB\-AWS\(aq
.ft P
.fi
.UNINDENT
.UNINDENT
.SS Execute JavaScript Against the \fI\%mongo\fP Shell
.sp
To execute a JavaScript file without evaluating the \fB~/.mongorc.js\fP
file before starting a shell session, use the following form:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
mongo \-\-shell \-\-norc alternate\-environment.js
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
To execute a JavaScript file with authentication, with password prompted
rather than provided on the command\-line, use the following form:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
mongo script\-file.js \-u <user> \-p
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
\fBSEE ALSO:\fP
.INDENT 0.0
.INDENT 3.5
\fBisInteractive()\fP
.UNINDENT
.UNINDENT
.SS Use \fI\%\-\-eval\fP to Execute JavaScript Code
.sp
You may use the \fI\%\-\-eval\fP option to execute
JavaScript directly from the command line.
.sp
For example, the following operation evaluates a JavaScript string
which queries a collection and prints the results as JSON.
.sp
On Linux and macOS, you will need to use single quotes (e.g. \fB\(aq\fP)
to enclose the JavaScript, using the following form:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
mongo \-\-eval \(aqdb.collection.find().forEach(printjson)\(aq
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
On Windows, you will need to use double quotes (e.g. \fB"\fP)
to enclose the JavaScript, using the following form:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
mongo \-\-eval "db.collection.find().forEach(printjson)"
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
\fBSEE ALSO:\fP
.INDENT 0.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
/reference/mongo\-shell
.IP \(bu 2
/reference/method
.IP \(bu 2
/mongo
.IP \(bu 2
\fBisInteractive()\fP
.UNINDENT
.UNINDENT
.UNINDENT
.SH AUTHOR
MongoDB Documentation Project
.SH COPYRIGHT
2008-2020
.\" Generated by docutils manpage writer.
.

.\" Man page generated from reStructuredText.
.
.TH "MONGOD" "1" "Jun 23, 2020" "4.4" "mongodb-manual"
.SH NAME
mongod \- MongoDB Server
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.SS On this page
.INDENT 0.0
.IP \(bu 2
\fI\%Synopsis\fP
.IP \(bu 2
\fI\%Options\fP
.INDENT 2.0
.IP \(bu 2
\fI\%Core Options\fP
.IP \(bu 2
\fI\%Free Monitoring\fP
.IP \(bu 2
\fI\%LDAP Authentication or Authorization Options\fP
.IP \(bu 2
\fI\%Storage Options\fP
.IP \(bu 2
\fI\%WiredTiger Options\fP
.IP \(bu 2
\fI\%Replication Options\fP
.IP \(bu 2
\fI\%Sharded Cluster Options\fP
.IP \(bu 2
\fI\%TLS Options\fP
.IP \(bu 2
\fI\%SSL Options (Deprecated)\fP
.IP \(bu 2
\fI\%Profiler Options\fP
.IP \(bu 2
\fI\%Audit Options\fP
.IP \(bu 2
\fI\%SNMP Options\fP
.IP \(bu 2
\fI\%inMemory Options\fP
.IP \(bu 2
\fI\%Encryption Key Management Options\fP
.UNINDENT
.UNINDENT
.SH SYNOPSIS
.sp
\fI\%mongod\fP is the primary daemon process for the MongoDB
system. It handles data requests, manages data access, and performs
background management operations.
.sp
This document provides a complete overview of all command line options
for \fI\%mongod\fP\&. These command line options are primarily useful
for testing: In common operation, use the configuration file
options to control the behavior of
your database.
.sp
\fBSEE ALSO:\fP
.INDENT 0.0
.INDENT 3.5
conf\-file\-command\-line\-mapping
.UNINDENT
.UNINDENT
.sp
\fBNOTE:\fP
.INDENT 0.0
.INDENT 3.5
Starting in version 4.0, MongoDB disables support for TLS 1.0
encryption on systems where TLS 1.1+ is available. For
more details, see 4.0\-disable\-tls\&.
.UNINDENT
.UNINDENT
.SH OPTIONS
.INDENT 0.0
.INDENT 3.5
.IP "Starting in version 4.2"
.INDENT 0.0
.IP \(bu 2
MongoDB deprecates the SSL options and insteads adds new
corresponding TLS options.
.IP \(bu 2
MongoDB adds
\fI\%\-\-tlsClusterCAFile\fP/\fBnet.tls.clusterCAFile\fP\&. (Also availalbe
in 3.4.18+, 3.6.9+, 4.0.3+)
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.INDENT 3.5
.IP "Starting in version 4.4"
.INDENT 0.0
.IP \(bu 2
MongoDB removes the \fB\-\-noIndexBuildRetry\fP command\-line option
and the corresponding \fBstorage.indexBuildRetry\fP option.
.UNINDENT
.UNINDENT
.UNINDENT
.SS Core Options
.INDENT 0.0
.TP
.B \-\-help, \-h
Returns information on the options and use of \fBmongod\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-version
Returns the \fBmongod\fP release number.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-config <filename>, \-f <filename>
Specifies a configuration file for runtime configuration options. The
configuration file is the preferred method for runtime configuration of
\fBmongod\fP\&. The options are equivalent to the command\-line
configuration options. See /reference/configuration\-options for
more information.
.sp
Ensure the configuration file uses ASCII encoding. The \fBmongod\fP
instance does not support configuration files with non\-ASCII encoding,
including UTF\-8.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-configExpand <none|rest|exec>
\fIDefault\fP: none
.sp
New in version 4.2.

.sp
Enables using Expansion Directives
in configuration files. Expansion directives allow you to set
externally sourced values for configuration file options.
.sp
\fI\%\-\-configExpand\fP supports the following expansion directives:
.TS
center;
|l|l|.
_
T{
Value
T}	T{
Description
T}
_
T{
\fBnone\fP
T}	T{
Default. \fBmongod\fP does not expand expansion directives.
\fBmongod\fP fails to start if any configuration file settings
use expansion directives.
T}
_
T{
\fBrest\fP
T}	T{
\fBmongod\fP expands \fB__rest\fP expansion directives when
parsing the configuration file.
T}
_
T{
\fBexec\fP
T}	T{
\fBmongod\fP expands \fB__exec\fP expansion directives when
parsing the configuration file.
T}
_
.TE
.sp
You can specify multiple expansion directives as a comma\-separated
list, e.g. \fBrest, exec\fP\&. If the configuration file contains
expansion directives not specified to \fI\%\-\-configExpand\fP, the \fBmongod\fP
returns an error and terminates.
.sp
See externally\-sourced\-values for configuration files
for more information on expansion directives.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-verbose, \-v
Increases the amount of internal reporting returned on standard output
or in log files. Increase the verbosity with the \fB\-v\fP form by
including the option multiple times, (e.g. \fB\-vvvvv\fP\&.)
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
Starting in version 4.2, MongoDB includes the Debug verbosity level
(1\-5) in the log messages\&. For example,
if the verbosity level is 2, MongoDB logs \fBD2\fP\&. In previous
versions, MongoDB log messages only specified \fBD\fP for Debug level.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-quiet
Runs \fBmongod\fP in a quiet mode that attempts to limit the amount
of output.
.sp
This option suppresses:
.INDENT 7.0
.IP \(bu 2
output from database commands
.IP \(bu 2
replication activity
.IP \(bu 2
connection accepted events
.IP \(bu 2
connection closed events
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-port <port>
\fIDefault\fP:
.INDENT 7.0
.IP \(bu 2
27017 if \fI\%mongod\fP is not a shard member or a config server member
.IP \(bu 2
27018 if \fI\%mongod\fP is a \fI\%shard member\fP
.IP \(bu 2
27019 if \fI\%mongod\fP is a \fI\%config server member\fP
.UNINDENT
.sp
The TCP port on which the MongoDB instance listens for
client connections.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-bind_ip <hostnames|ipaddresses|Unix domain socket paths>
\fIDefault\fP: localhost
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
Starting in MongoDB 3.6, \fBmongod\fP bind to localhost
by default. See 3.6\-bind\-to\-localhost\&.
.UNINDENT
.UNINDENT
.sp
The hostnames and/or IP addresses and/or full Unix domain socket
paths on which \fBmongod\fP should listen for client connections. You
may attach \fBmongod\fP to any interface. To bind to multiple
addresses, enter a list of comma\-separated values.
.INDENT 7.0
.INDENT 3.5
.SS Example
.sp
\fBlocalhost,/tmp/mongod.sock\fP
.UNINDENT
.UNINDENT
.sp
You can specify both IPv4 and IPv6 addresses, or hostnames that
resolve to an IPv4 or IPv6 address.
.INDENT 7.0
.INDENT 3.5
.SS Example
.sp
\fBlocalhost, 2001:0DB8:e132:ba26:0d5c:2774:e7f9:d513\fP
.UNINDENT
.UNINDENT
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
If specifying an IPv6 address \fIor\fP a hostname that resolves to an
IPv6 address to \fI\%\-\-bind_ip\fP, you must start \fBmongod\fP with
\fI\%\-\-ipv6\fP to enable IPv6 support. Specifying an IPv6 address
to \fI\%\-\-bind_ip\fP does not enable IPv6 support.
.UNINDENT
.UNINDENT
.sp
If specifying a
\fI\%link\-local IPv6 address\fP
(\fBfe80::/10\fP), you must append the
\fI\%zone index\fP
to that address (i.e. \fBfe80::<address>%<adapter\-name>\fP).
.INDENT 7.0
.INDENT 3.5
.SS Example
.sp
\fBlocalhost,fe80::a00:27ff:fee0:1fcf%enp0s3\fP
.UNINDENT
.UNINDENT
.INDENT 7.0
.INDENT 3.5
.SS Tip
.sp
When possible, use a logical DNS hostname instead of an ip address,
particularly when configuring replica set members or sharded cluster
members. The use of logical DNS hostnames avoids configuration
changes due to ip address changes.
.UNINDENT
.UNINDENT
.sp
\fBWARNING:\fP
.INDENT 7.0
.INDENT 3.5
Before binding to a non\-localhost (e.g. publicly accessible)
IP address, ensure you have secured your cluster from unauthorized
access. For a complete list of security recommendations, see
/administration/security\-checklist\&. At minimum, consider
enabling authentication and
hardening network infrastructure\&.
.UNINDENT
.UNINDENT
.sp
For more information about IP Binding, refer to the
/core/security\-mongodb\-configuration documentation.
.sp
To bind to all IPv4 addresses, enter \fB0.0.0.0\fP\&.
.sp
To bind to all IPv4 and IPv6 addresses, enter \fB::,0.0.0.0\fP or
starting in MongoDB 4.2, an asterisk \fB"*"\fP (enclose the asterisk in
quotes to avoid filename pattern expansion). Alternatively, use the
\fBnet.bindIpAll\fP setting.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
\fB\-\-bind_ip\fP and \fB\-\-bind_ip_all\fP are mutually exclusive.
Specifying both options causes \fBmongod\fP to throw an error and
terminate.
.IP \(bu 2
The command\-line option \fB\-\-bind\fP overrides the configuration
file setting \fBnet.bindIp\fP\&.
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-bind_ip_all
New in version 3.6.

.sp
If specified, the \fBmongod\fP instance binds to all IPv4
addresses (i.e. \fB0.0.0.0\fP). If \fBmongod\fP starts with
\fI\%\-\-ipv6\fP, \fI\%\-\-bind_ip_all\fP also binds to all IPv6 addresses
(i.e. \fB::\fP).
.sp
\fBmongod\fP only supports IPv6 if started with \fI\%\-\-ipv6\fP\&. Specifying
\fI\%\-\-bind_ip_all\fP alone does not enable IPv6 support.
.sp
\fBWARNING:\fP
.INDENT 7.0
.INDENT 3.5
Before binding to a non\-localhost (e.g. publicly accessible)
IP address, ensure you have secured your cluster from unauthorized
access. For a complete list of security recommendations, see
/administration/security\-checklist\&. At minimum, consider
enabling authentication and
hardening network infrastructure\&.
.UNINDENT
.UNINDENT
.sp
For more information about IP Binding, refer to the
/core/security\-mongodb\-configuration documentation.
.sp
Alternatively, you can set the \fB\-\-bind_ip\fP option to \fB::,0.0.0.0\fP
or, starting in MongoDB 4.2, to an asterisk \fB"*"\fP (enclose the
asterisk in quotes to avoid filename pattern expansion).
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
\fB\-\-bind_ip\fP and \fB\-\-bind_ip_all\fP are mutually exclusive. That
is, you can specify one or the other, but not both.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-clusterIpSourceAllowlist <string>
New in version 3.6.

.sp
A list of IP addresses/CIDR (\fI\%Classless Inter\-Domain Routing\fP) ranges against which the
\fI\%mongod\fP validates authentication requests from other members of
the replica set and, if part of a sharded cluster, the \fBmongos\fP
instances. The \fI\%mongod\fP verifies that the originating IP is
either explicitly in the list or belongs to a CIDR range in the list. If the
IP address is not present, the server does not authenticate the
\fI\%mongod\fP or \fBmongos\fP\&.
.sp
\fI\%\-\-clusterIpSourceAllowlist\fP has no effect on a \fI\%mongod\fP started without
authentication\&.
.sp
\fI\%\-\-clusterIpSourceAllowlist\fP accepts multiple comma\-separated IPv4/6 addresses or Classless
Inter\-Domain Routing (\fI\%CIDR\fP) ranges:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-clusterIpSourceAllowlist 192.0.2.0/24,127.0.0.1,::1
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
\fBIMPORTANT:\fP
.INDENT 7.0
.INDENT 3.5
Ensure \fI\%\-\-clusterIpSourceAllowlist\fP includes the IP address \fIor\fP CIDR ranges that include the
IP address of each replica set member or \fBmongos\fP in the
deployment to ensure healthy communication between cluster components.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-ipv6
Enables IPv6 support. \fBmongod\fP disables IPv6 support by default.
.sp
Setting \fI\%\-\-ipv6\fP does \fInot\fP direct the \fBmongod\fP to listen on any
local IPv6 addresses or interfaces. To configure the \fBmongod\fP to
listen on an IPv6 interface, you must either:
.INDENT 7.0
.IP \(bu 2
Configure \fI\%\-\-bind_ip\fP with one or more IPv6 addresses or
hostnames that resolve to IPv6 addresses, \fBor\fP
.IP \(bu 2
Set \fI\%\-\-bind_ip_all\fP to \fBtrue\fP\&.
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-listenBacklog <number>
\fIDefault\fP: Target system \fBSOMAXCONN\fP constant
.sp
New in version 3.6.

.sp
The maximum number of connections that can exist in the listen
queue.
.sp
\fBWARNING:\fP
.INDENT 7.0
.INDENT 3.5
Consult your local system\(aqs documentation to understand the
limitations and configuration requirements before using this
parameter.
.UNINDENT
.UNINDENT
.sp
\fBIMPORTANT:\fP
.INDENT 7.0
.INDENT 3.5
To prevent undefined behavior, specify a value for this
parameter between \fB1\fP and the local system \fBSOMAXCONN\fP
constant.
.UNINDENT
.UNINDENT
.sp
The default value for the \fBlistenBacklog\fP parameter is set at
compile time to the target system \fBSOMAXCONN\fP constant.
\fBSOMAXCONN\fP is the maximum valid value that is documented for
the \fIbacklog\fP parameter to the \fIlisten\fP system call.
.sp
Some systems may interpret \fBSOMAXCONN\fP symbolically, and others
numerically. The actual \fIlisten backlog\fP applied in practice may
differ from any numeric interpretation of the \fBSOMAXCONN\fP constant
or argument to \fB\-\-listenBacklog\fP, and may also be constrained by
system settings like \fBnet.core.somaxconn\fP on Linux.
.sp
Passing a value for the \fBlistenBacklog\fP parameter that exceeds the
\fBSOMAXCONN\fP constant for the local system is, by the letter of the
standards, undefined behavior. Higher values may be silently integer
truncated, may be ignored, may cause unexpected resource
consumption, or have other adverse consequences.
.sp
On systems with workloads that exhibit connection spikes, for which
it is empirically known that the local system can honor higher
values for the \fIbacklog\fP parameter than the \fBSOMAXCONN\fP constant,
setting the \fBlistenBacklog\fP parameter to a higher value may reduce
operation latency as observed by the client by reducing the number
of connections which are forced into a backoff state.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-maxConns <number>
The maximum number of simultaneous connections that \fBmongod\fP will
accept. This setting has no effect if it is higher than your operating
system\(aqs configured maximum connection tracking threshold.
.sp
Do not assign too low of a value to this option, or you will
encounter errors during normal application operation.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-logpath <path>
Sends all diagnostic logging information to a log file instead of to
standard output or to the host\(aqs syslog system. MongoDB creates
the log file at the path you specify.
.sp
By default, MongoDB will move any existing log file rather than overwrite
it. To instead append to the log file, set the \fI\%\-\-logappend\fP option.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-syslog
Sends all logging output to the host\(aqs syslog system rather
than to standard output or to a log file (\fI\%\-\-logpath\fP).
.sp
The \fI\%\-\-syslog\fP option is not supported on Windows.
.sp
\fBWARNING:\fP
.INDENT 7.0
.INDENT 3.5
The \fBsyslog\fP daemon generates timestamps when it logs a message, not
when MongoDB issues the message. This can lead to misleading timestamps
for log entries, especially when the system is under heavy load. We
recommend using the \fI\%\-\-logpath\fP option for production systems to
ensure accurate timestamps.
.UNINDENT
.UNINDENT
.sp
Starting in version 4.2, MongoDB includes the component in its log messages to \fBsyslog\fP\&.
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
\&...  ACCESS   [repl writer worker 5] Unsupported modification to roles collection ...
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-syslogFacility <string>
\fIDefault\fP: user
.sp
Specifies the facility level used when logging messages to syslog.
The value you specify must be supported by your
operating system\(aqs implementation of syslog. To use this option, you
must  enable the \fI\%\-\-syslog\fP option.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-logappend
Appends new entries to the end of the existing log file when the \fBmongod\fP
instance restarts. Without this option, \fI\%mongod\fP will back up the
existing log and create a new file.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-logRotate <string>
\fIDefault\fP: rename
.sp
Determines the behavior for the \fBlogRotate\fP command.
Specify either \fBrename\fP or \fBreopen\fP:
.INDENT 7.0
.IP \(bu 2
\fBrename\fP renames the log file.
.IP \(bu 2
\fBreopen\fP closes and reopens the log file following the typical
Linux/Unix log rotate behavior. Use \fBreopen\fP when using the
Linux/Unix logrotate utility to avoid log loss.
.sp
If you specify \fBreopen\fP, you must also use \fI\%\-\-logappend\fP\&.
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-timeStampFormat <string>
\fIDefault\fP: iso8601\-local
.sp
The time format for timestamps in log messages. Specify one of the
following values:
.TS
center;
|l|l|.
_
T{
Value
T}	T{
Description
T}
_
T{
\fBiso8601\-utc\fP
T}	T{
Displays timestamps in Coordinated Universal Time (UTC) in the
ISO\-8601 format. For example, for New York at the start of the
Epoch: \fB1970\-01\-01T00:00:00.000Z\fP
T}
_
T{
\fBiso8601\-local\fP
T}	T{
Displays timestamps in local time in the ISO\-8601
format. For example, for New York at the start of the Epoch:
\fB1969\-12\-31T19:00:00.000\-05:00\fP
T}
_
.TE
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
Starting in MongoDB 4.4, \fI\%\-\-timeStampFormat\fP no longer supports \fBctime\fP\&.
An example of \fBctime\fP formatted date is: \fBWed Dec 31
18:17:54.811\fP\&.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-traceExceptions
For internal diagnostic use only.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-pidfilepath <path>
Specifies a file location to store the process ID (PID) of the \fBmongod\fP
process. The user running the \fBmongod\fP or \fBmongos\fP
process must be able to write to this path. If the \fI\%\-\-pidfilepath\fP option is not
specified, the process does not create a PID file. This option is generally
only useful in combination with the \fI\%\-\-fork\fP option.
.INDENT 7.0
.INDENT 3.5
.IP "Linux"
.sp
On Linux, PID file management is generally the responsibility of
your distro\(aqs init system: usually a service file in the \fB/etc/init.d\fP
directory, or a systemd unit file registered with \fBsystemctl\fP\&. Only
use the \fI\%\-\-pidfilepath\fP option if you are not using one of these init
systems. For more information, please see the respective
Installation Guide for your operating system.
.UNINDENT
.UNINDENT
.INDENT 7.0
.INDENT 3.5
.IP "macOS"
.sp
On macOS, PID file management is generally handled by \fBbrew\fP\&. Only use
the \fI\%\-\-pidfilepath\fP option if you are not using \fBbrew\fP on your macOS system.
For more information, please see the respective
Installation Guide for your operating system.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-keyFile <file>
Specifies the path to a key file that stores the shared secret
that MongoDB instances use to authenticate to each other in a
sharded cluster or replica set\&. \fI\%\-\-keyFile\fP implies
\fI\%\-\-auth\fP\&. See inter\-process\-auth for more
information.
.sp
Starting in MongoDB 4.2, keyfiles for internal membership
authentication use YAML format to allow for
multiple keys in a keyfile. The YAML format accepts content of:
.INDENT 7.0
.IP \(bu 2
a single key string (same as in earlier versions),
.IP \(bu 2
multiple key strings (each string must be enclosed in quotes), or
.IP \(bu 2
sequence of key strings.
.UNINDENT
.sp
The YAML format is compatible with the existing single\-key
keyfiles that use the text file format.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-setParameter <options>
Specifies one of the MongoDB parameters described in
/reference/parameters\&. You can specify multiple \fBsetParameter\fP
fields.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-nounixsocket
Disables listening on the UNIX domain socket. \fI\%\-\-nounixsocket\fP applies only
to Unix\-based systems.
.sp
The \fBmongod\fP process
always listens on the UNIX socket unless one of the following is true:
.INDENT 7.0
.IP \(bu 2
\fI\%\-\-nounixsocket\fP is set
.IP \(bu 2
\fBnet.bindIp\fP is not set
.IP \(bu 2
\fBnet.bindIp\fP does not specify \fBlocalhost\fP or its associated IP address
.UNINDENT
.sp
\fBmongod\fP installed from official \&.deb and \&.rpm packages
have the \fBbind_ip\fP configuration set to \fB127.0.0.1\fP by
default.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-unixSocketPrefix <path>
\fIDefault\fP: /tmp
.sp
The path for the UNIX socket. \fI\%\-\-unixSocketPrefix\fP applies only
to Unix\-based systems.
.sp
If this option has no value, the
\fBmongod\fP process creates a socket with \fB/tmp\fP as a prefix. MongoDB
creates and listens on a UNIX socket unless one of the following is true:
.INDENT 7.0
.IP \(bu 2
\fBnet.unixDomainSocket.enabled\fP is \fBfalse\fP
.IP \(bu 2
\fI\%\-\-nounixsocket\fP is set
.IP \(bu 2
\fBnet.bindIp\fP is not set
.IP \(bu 2
\fBnet.bindIp\fP does not specify \fBlocalhost\fP or its associated IP address
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-filePermissions <path>
\fIDefault\fP: \fB0700\fP
.sp
Sets the permission for the UNIX domain socket file.
.sp
\fI\%\-\-filePermissions\fP applies only to Unix\-based systems.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-fork
Enables a daemon mode that runs the \fBmongod\fP process in the
background. By default \fBmongod\fP does not run as a daemon:
typically you will run \fBmongod\fP as a daemon, either by using
\fI\%\-\-fork\fP or by using a controlling process that handles the
daemonization process (e.g. as with \fBupstart\fP and \fBsystemd\fP).
.sp
The \fI\%\-\-fork\fP option is not supported on Windows.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-auth
Enables authorization to control user\(aqs access to database resources
and operations. When authorization is enabled, MongoDB requires all
clients to authenticate themselves first in order to determine the
access for the client.
.sp
Configure users via the mongo shell\&. If no users exist, the localhost interface
will continue to have access to the database until you create
the first user.
.sp
See Security
for more information.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-noauth
Disables authentication. Currently the default. Exists for future
compatibility and clarity.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-transitionToAuth
New in version 3.4: Allows the \fBmongod\fP to accept and create authenticated and
non\-authenticated connections to and from other \fI\%mongod\fP
and \fBmongos\fP instances in the deployment. Used for
performing rolling transition of replica sets or sharded clusters
from a no\-auth configuration to internal authentication\&. Requires specifying a internal
authentication mechanism such as
\fI\%\-\-keyFile\fP\&.

.sp
For example, if using keyfiles for
internal authentication, the \fBmongod\fP creates
an authenticated connection with any \fI\%mongod\fP or \fBmongos\fP
in the deployment using a matching keyfile. If the security mechanisms do
not match, the \fBmongod\fP utilizes a non\-authenticated connection instead.
.sp
A \fBmongod\fP running with \fI\%\-\-transitionToAuth\fP does not enforce user access
controls\&. Users may connect to your deployment without any
access control checks and perform read, write, and administrative operations.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
A \fBmongod\fP running with internal authentication and \fIwithout\fP \fI\%\-\-transitionToAuth\fP requires clients to connect
using user access controls\&. Update clients to
connect to the \fBmongod\fP using the appropriate user
prior to restarting \fBmongod\fP without \fI\%\-\-transitionToAuth\fP\&.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-cpu
Forces the \fBmongod\fP process to report the percentage of CPU time in
write lock, every four seconds.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sysinfo
Returns diagnostic system information and then exits. The
information provides the page size, the number of physical pages,
and the number of available physical pages.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-noscripting
Disables the scripting engine.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-notablescan
Forbids operations that require a collection scan. See \fBnotablescan\fP for additional information.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-shutdown
The \fI\%\-\-shutdown\fP option cleanly and safely terminates the \fBmongod\fP
process. When invoking \fBmongod\fP with this option you must set the
\fI\%\-\-dbpath\fP option either directly or by way of the
configuration file and the
\fI\%\-\-config\fP option.
.sp
The \fI\%\-\-shutdown\fP option is available only on Linux systems.
.sp
For additional ways to shut down, see also terminate\-mongod\-processes\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-redactClientLogData
New in version 3.4: Available in MongoDB Enterprise only.

.sp
A \fBmongod\fP running with \fI\%\-\-redactClientLogData\fP redacts any message accompanying a given
log event before logging. This prevents the \fBmongod\fP from writing
potentially sensitive data stored on the database to the diagnostic log.
Metadata such as error or operation codes, line numbers, and source file
names are still visible in the logs.
.sp
Use \fI\%\-\-redactClientLogData\fP in conjunction with
/core/security\-encryption\-at\-rest and
/core/security\-transport\-encryption to assist compliance with
regulatory requirements.
.sp
For example, a MongoDB deployment might store Personally Identifiable
Information (PII) in one or more collections. The \fBmongod\fP logs events
such as those related to CRUD operations, sharding metadata, etc. It is
possible that the \fBmongod\fP may expose PII as a part of these logging
operations. A \fBmongod\fP running with \fI\%\-\-redactClientLogData\fP removes any message
accompanying these events before being output to the log, effectively
removing the PII.
.sp
Diagnostics on a \fBmongod\fP running with \fI\%\-\-redactClientLogData\fP may be more difficult
due to the lack of data related to a log event. See the
process logging manual page for an
example of the effect of \fI\%\-\-redactClientLogData\fP on log output.
.sp
On a running \fBmongod\fP, use \fBsetParameter\fP with the
\fBredactClientLogData\fP parameter to configure this setting.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-networkMessageCompressors <string>
\fIDefault\fP: snappy,zstd,zlib
.sp
New in version 3.4.

.sp
Specifies the default compressor(s) to use for
communication between this \fBmongod\fP instance and:
.INDENT 7.0
.IP \(bu 2
other members of the deployment if the instance is part of a replica set or a sharded cluster
.IP \(bu 2
a \fBmongo\fP shell
.IP \(bu 2
drivers that support the \fBOP_COMPRESSED\fP message format.
.UNINDENT
.sp
MongoDB supports the following compressors:
.INDENT 7.0
.IP \(bu 2
snappy
.IP \(bu 2
zlib (Available starting in MongoDB 3.6)
.IP \(bu 2
zstd (Available  starting in MongoDB 4.2)
.UNINDENT
.sp
\fBIn versions 3.6 and 4.0\fP, \fI\%mongod\fP and
\fBmongos\fP enable network compression by default with
\fBsnappy\fP as the compressor.
.sp
\fBStarting in version 4.2\fP, \fI\%mongod\fP and
\fBmongos\fP instances default to both \fBsnappy,zstd,zlib\fP
compressors, in that order.
.sp
To disable network compression, set the value to \fBdisabled\fP\&.
.sp
\fBIMPORTANT:\fP
.INDENT 7.0
.INDENT 3.5
Messages are compressed when both parties enable network
compression. Otherwise, messages between the parties are
uncompressed.
.UNINDENT
.UNINDENT
.sp
If you specify multiple compressors, then the order in which you list
the compressors matter as well as the communication initiator. For
example, if a \fBmongo\fP shell specifies the following network
compressors \fBzlib,snappy\fP and the \fI\%mongod\fP specifies
\fBsnappy,zlib\fP, messages between \fBmongo\fP shell and
\fI\%mongod\fP uses \fBzlib\fP\&.
.sp
If the parties do not share at least one common compressor, messages
between the parties are uncompressed. For example, if a
\fBmongo\fP shell specifies the network compressor
\fBzlib\fP and \fI\%mongod\fP specifies \fBsnappy\fP, messages
between \fBmongo\fP shell and \fI\%mongod\fP are not compressed.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-timeZoneInfo <path>
The full path from which to load the time zone database. If this option
is not provided, then MongoDB will use its built\-in time zone database.
.sp
The configuration file included with Linux and macOS packages sets the time
zone database path to \fB/usr/share/zoneinfo\fP by default.
.sp
The built\-in time zone database is a copy of the \fI\%Olson/IANA time zone
database\fP\&. It is updated along with MongoDB
releases, but the release cycle of the time zone database differs from the
release cycle of MongoDB. A copy of the most recent release of the time zone
database can be downloaded from
\fI\%https://downloads.mongodb.org/olson_tz_db/timezonedb\-latest.zip\fP\&.
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
wget https://downloads.mongodb.org/olson_tz_db/timezonedb\-latest.zip
unzip timezonedb\-latest.zip
mongod \-\-timeZoneInfo timezonedb\-2017b/
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
\fBSEE ALSO:\fP
.INDENT 7.0
.INDENT 3.5
\fBprocessManagement.timeZoneInfo\fP\&.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-serviceExecutor <string>
\fIDefault\fP: synchronous
.sp
New in version 3.6.

.sp
Determines the threading and execution model \fBmongod\fP uses to
execute client requests. The \fB\-\-serviceExecutor\fP option accepts one
of the following values:
.TS
center;
|l|l|.
_
T{
Value
T}	T{
Description
T}
_
T{
\fBsynchronous\fP
T}	T{
The \fBmongod\fP uses synchronous networking and manages its
networking thread pool on a per connection basis. Previous
versions of MongoDB managed threads in this way.
T}
_
T{
\fBadaptive\fP
T}	T{
The \fBmongod\fP uses the new experimental asynchronous
networking mode with an adaptive thread pool which manages
threads on a per request basis. This mode should have more
consistent performance and use less resources when there are
more inactive connections than database requests.
T}
_
.TE
.UNINDENT
.INDENT 0.0
.TP
.B \-\-outputConfig
New in version 4.2.

.sp
Outputs the \fBmongod\fP instance\(aqs configuration options, formatted
in YAML, to \fBstdout\fP and exits the \fBmongod\fP instance. For
configuration options that uses externally\-sourced\-values,
\fI\%\-\-outputConfig\fP returns the resolved value for those options.
.sp
\fBWARNING:\fP
.INDENT 7.0
.INDENT 3.5
This may include any configured passwords or secrets previously
obfuscated through the external source.
.UNINDENT
.UNINDENT
.sp
For usage examples, see:
.INDENT 7.0
.IP \(bu 2
expansion\-directive\-output
.IP \(bu 2
/tutorial/convert\-command\-line\-options\-to\-yaml
.UNINDENT
.UNINDENT
.SS Free Monitoring
.sp
New in version 4.0.

.INDENT 0.0
.TP
.B \-\-enableFreeMonitoring <runtime|on|off>
New in version 4.0: Available for MongoDB Community Edition.

.sp
Enables or disables free MongoDB Cloud monitoring\&. \fI\%\-\-enableFreeMonitoring\fP accepts the following
values:
.TS
center;
|l|l|.
_
T{
\fBruntime\fP
T}	T{
Default. You can enable or disable free monitoring during
runtime.
.sp
To enable or disable free monitoring during runtime, see
\fBdb.enableFreeMonitoring()\fP and
\fBdb.disableFreeMonitoring()\fP\&.
.sp
To enable or disable free monitoring during runtime when
running with access control, users must have required
privileges. See \fBdb.enableFreeMonitoring()\fP and
\fBdb.disableFreeMonitoring()\fP for details.
T}
_
T{
\fBon\fP
T}	T{
Enables free monitoring at startup; i.e. registers for free
monitoring. When enabled at startup, you cannot disable free
monitoring during runtime.
T}
_
T{
\fBoff\fP
T}	T{
Disables free monitoring at startup, regardless of whether
you have previously registered for free monitoring.  When disabled at startup,
you cannot enable free monitoring during runtime.
T}
_
.TE
.sp
Once enabled, the free monitoring state remains enabled until
explicitly disabled. That is, you do not need to re\-enable each time
you start the server.
.sp
For the corresponding configuration file setting, see
\fBcloud.monitoring.free.state\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-freeMonitoringTag <string>
New in version 4.0: Available for MongoDB Community Edition.

.sp
Optional tag to describe environment context. The tag can be sent as
part of the free MongoDB Cloud monitoring registration at start up.
.sp
For the corresponding configuration file setting, see
\fBcloud.monitoring.free.tags\fP\&.
.UNINDENT
.SS LDAP Authentication or Authorization Options
.INDENT 0.0
.TP
.B \-\-ldapServers <host1>:<port>,<host2>:<port>,...,<hostN>:<port>
New in version 3.4: Available in MongoDB Enterprise only.

.sp
The LDAP server against which the \fBmongod\fP authenticates users or
determines what actions a user is authorized to perform on a given
database. If the LDAP server specified has any replicated instances,
you may specify the host and port of each replicated server in a
comma\-delimited list.
.sp
If your LDAP infrastructure partitions the LDAP directory over multiple LDAP
servers, specify \fIone\fP LDAP server or any of its replicated instances to
\fI\%\-\-ldapServers\fP\&. MongoDB supports following LDAP referrals as defined in \fI\%RFC 4511
4.1.10\fP\&. Do not use \fI\%\-\-ldapServers\fP
for listing every LDAP server in your infrastructure.
.sp
This setting can be configured on a running \fBmongod\fP using
\fBsetParameter\fP\&.
.sp
If unset, \fBmongod\fP cannot use LDAP authentication or authorization\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-ldapValidateLDAPServerConfig <boolean>
\fIAvailable in MongoDB Enterprise\fP
.sp
A flag that determines if the \fI\%mongod\fP instance checks
the availability of the \fI\%LDAP server(s)\fP as part of its startup:
.INDENT 7.0
.IP \(bu 2
If \fBtrue\fP, the \fI\%mongod\fP instance performs the
availability check and only continues to start up if the LDAP
server is available.
.IP \(bu 2
If \fBfalse\fP, the \fI\%mongod\fP instance skips the
availability check; i.e. the instance starts up even if the LDAP
server is unavailable.
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-ldapQueryUser <string>
New in version 3.4: Available in MongoDB Enterprise only.

.sp
The identity with which \fBmongod\fP binds as, when connecting to or
performing queries on an LDAP server.
.sp
Only required if any of the following are true:
.INDENT 7.0
.IP \(bu 2
Using LDAP authorization\&.
.IP \(bu 2
Using an LDAP query for \fI\%username transformation\fP\&.
.IP \(bu 2
The LDAP server disallows anonymous binds
.UNINDENT
.sp
You must use \fI\%\-\-ldapQueryUser\fP with \fI\%\-\-ldapQueryPassword\fP\&.
.sp
If unset, \fBmongod\fP will not attempt to bind to the LDAP server.
.sp
This setting can be configured on a running \fBmongod\fP using
\fBsetParameter\fP\&.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
Windows MongoDB deployments can use \fI\%\-\-ldapBindWithOSDefaults\fP
instead of \fI\%\-\-ldapQueryUser\fP and \fI\%\-\-ldapQueryPassword\fP\&. You cannot specify
both \fI\%\-\-ldapQueryUser\fP and \fI\%\-\-ldapBindWithOSDefaults\fP at the same time.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-ldapQueryPassword <string>
New in version 3.4: Available in MongoDB Enterprise only.
.sp
The password used to bind to an LDAP server when using
\fI\%\-\-ldapQueryUser\fP\&. You must use \fI\%\-\-ldapQueryPassword\fP with
\fI\%\-\-ldapQueryUser\fP\&.

.sp
If unset, \fBmongod\fP will not attempt to bind to the LDAP server.
.sp
This setting can be configured on a running \fBmongod\fP using
\fBsetParameter\fP\&.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
Windows MongoDB deployments can use \fI\%\-\-ldapBindWithOSDefaults\fP
instead of \fI\%\-\-ldapQueryPassword\fP and \fI\%\-\-ldapQueryPassword\fP\&. You cannot specify
both \fI\%\-\-ldapQueryPassword\fP and \fI\%\-\-ldapBindWithOSDefaults\fP at the same time.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-ldapBindWithOSDefaults <bool>
\fIDefault\fP: false
.sp
New in version 3.4: Available in MongoDB Enterprise for the Windows platform only.

.sp
Allows \fBmongod\fP to authenticate, or bind, using your Windows login
credentials when connecting to the LDAP server.
.sp
Only required if:
.INDENT 7.0
.IP \(bu 2
Using LDAP authorization\&.
.IP \(bu 2
Using an LDAP query for \fI\%username transformation\fP\&.
.IP \(bu 2
The LDAP server disallows anonymous binds
.UNINDENT
.sp
Use \fI\%\-\-ldapBindWithOSDefaults\fP to replace \fI\%\-\-ldapQueryUser\fP and
\fI\%\-\-ldapQueryPassword\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-ldapBindMethod <string>
\fIDefault\fP: simple
.sp
New in version 3.4: Available in MongoDB Enterprise only.

.sp
The method \fBmongod\fP uses to authenticate to an LDAP server.
Use with \fI\%\-\-ldapQueryUser\fP and \fI\%\-\-ldapQueryPassword\fP to
connect to the LDAP server.
.sp
\fI\%\-\-ldapBindMethod\fP supports the following values:
.INDENT 7.0
.IP \(bu 2
\fBsimple\fP \- \fBmongod\fP uses simple authentication.
.IP \(bu 2
\fBsasl\fP \- \fBmongod\fP uses SASL protocol for authentication
.UNINDENT
.sp
If you specify \fBsasl\fP, you can configure the available SASL mechanisms
using \fI\%\-\-ldapBindSaslMechanisms\fP\&. \fBmongod\fP defaults to
using \fBDIGEST\-MD5\fP mechanism.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-ldapBindSaslMechanisms <string>
\fIDefault\fP: DIGEST\-MD5
.sp
New in version 3.4: Available in MongoDB Enterprise only.

.sp
A comma\-separated list of SASL mechanisms \fBmongod\fP can
use when authenticating to the LDAP server. The \fBmongod\fP and the
LDAP server must agree on at least one mechanism. The \fBmongod\fP
dynamically loads any SASL mechanism libraries installed on the host
machine at runtime.
.sp
Install and configure the appropriate libraries for the selected
SASL mechanism(s) on both the \fBmongod\fP host and the remote
LDAP server host. Your operating system may include certain SASL
libraries by default. Defer to the documentation associated with each
SASL mechanism for guidance on installation and configuration.
.sp
If using the \fBGSSAPI\fP SASL mechanism for use with
security\-kerberos, verify the following for the
\fBmongod\fP host machine:
.INDENT 7.0
.TP
.B \fBLinux\fP
.INDENT 7.0
.IP \(bu 2
The \fBKRB5_CLIENT_KTNAME\fP environment
variable resolves to the name of the client keytab\-files
for the host machine. For more on Kerberos environment
variables, please defer to the
\fI\%Kerberos documentation\fP\&.
.IP \(bu 2
The client keytab includes a
kerberos\-user\-principal for the \fBmongod\fP to use when
connecting to the LDAP server and execute LDAP queries.
.UNINDENT
.TP
.B \fBWindows\fP
If connecting to an Active Directory server, the Windows
Kerberos configuration automatically generates a
\fI\%Ticket\-Granting\-Ticket\fP
when the user logs onto the system. Set \fI\%\-\-ldapBindWithOSDefaults\fP to
\fBtrue\fP to allow \fBmongod\fP to use the generated credentials when
connecting to the Active Directory server and execute queries.
.UNINDENT
.sp
Set \fI\%\-\-ldapBindMethod\fP to \fBsasl\fP to use this option.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
For a complete list of SASL mechanisms see the
\fI\%IANA listing\fP\&.
Defer to the documentation for your LDAP or Active Directory
service for identifying the SASL mechanisms compatible with the
service.
.sp
MongoDB is not a source of SASL mechanism libraries, nor
is the MongoDB documentation a definitive source for
installing or configuring any given SASL mechanism. For
documentation and support, defer to the SASL mechanism
library vendor or owner.
.sp
For more information on SASL, defer to the following resources:
.INDENT 0.0
.IP \(bu 2
For Linux, please see the \fI\%Cyrus SASL documentation\fP\&.
.IP \(bu 2
For Windows, please see the \fI\%Windows SASL documentation\fP\&.
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-ldapTransportSecurity <string>
\fIDefault\fP: tls
.sp
New in version 3.4: Available in MongoDB Enterprise only.

.sp
By default, \fBmongod\fP creates a TLS/SSL secured connection to the LDAP
server.
.sp
For Linux deployments, you must configure the appropriate TLS Options in
\fB/etc/openldap/ldap.conf\fP file. Your operating system\(aqs package manager
creates this file as part of the MongoDB Enterprise installation, via the
\fBlibldap\fP dependency. See the documentation for \fBTLS Options\fP in the
\fI\%ldap.conf OpenLDAP documentation\fP
for more complete instructions.
.sp
For Windows deployment, you must add the LDAP server CA certificates to the
Windows certificate management tool. The exact name and functionality of the
tool may vary depending on operating system version. Please see the
documentation for your version of Windows for more information on
certificate management.
.sp
Set \fI\%\-\-ldapTransportSecurity\fP to \fBnone\fP to disable TLS/SSL between \fBmongod\fP and the LDAP
server.
.sp
\fBWARNING:\fP
.INDENT 7.0
.INDENT 3.5
Setting \fI\%\-\-ldapTransportSecurity\fP to \fBnone\fP transmits plaintext information and possibly
credentials between \fBmongod\fP and the LDAP server.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-ldapTimeoutMS <long>
\fIDefault\fP: 10000
.sp
New in version 3.4: Available in MongoDB Enterprise only.

.sp
The amount of time in milliseconds \fBmongod\fP should wait for an LDAP server
to respond to a request.
.sp
Increasing the value of \fI\%\-\-ldapTimeoutMS\fP may prevent connection failure between the
MongoDB server and the LDAP server, if the source of the failure is a
connection timeout. Decreasing the value of \fI\%\-\-ldapTimeoutMS\fP reduces the time
MongoDB waits for a response from the LDAP server.
.sp
This setting can be configured on a running \fBmongod\fP using
\fBsetParameter\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-ldapUserToDNMapping <string>
New in version 3.4: Available in MongoDB Enterprise only.

.sp
Maps the username provided to \fBmongod\fP for authentication to a LDAP
Distinguished Name (DN). You may need to use \fI\%\-\-ldapUserToDNMapping\fP to transform a
username into an LDAP DN in the following scenarios:
.INDENT 7.0
.IP \(bu 2
Performing LDAP authentication with simple LDAP binding, where users
authenticate to MongoDB with usernames that are not full LDAP DNs.
.IP \(bu 2
Using an \fI\%LDAP authorization query template\fP that requires a DN.
.IP \(bu 2
Transforming the usernames of clients authenticating to Mongo DB using
different authentication mechanisms (e.g. x.509, kerberos) to a full LDAP
DN for authorization.
.UNINDENT
.sp
\fI\%\-\-ldapUserToDNMapping\fP expects a quote\-enclosed JSON\-string representing an ordered array
of documents. Each document contains a regular expression \fBmatch\fP and
either a \fBsubstitution\fP or \fBldapQuery\fP template used for transforming the
incoming username.
.sp
Each document in the array has the following form:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
{
  match: "<regex>"
  substitution: "<LDAP DN>" | ldapQuery: "<LDAP Query>"
}
.ft P
.fi
.UNINDENT
.UNINDENT
.TS
center;
|l|l|l|.
_
T{
Field
T}	T{
Description
T}	T{
Example
T}
_
T{
\fBmatch\fP
T}	T{
An ECMAScript\-formatted regular expression (regex) to match against a
provided username. Each parenthesis\-enclosed section represents a
regex capture group used by \fBsubstitution\fP or \fBldapQuery\fP\&.
T}	T{
\fB"(.+)ENGINEERING"\fP
\fB"(.+)DBA"\fP
T}
_
T{
\fBsubstitution\fP
T}	T{
An LDAP distinguished name (DN) formatting template that converts the
authentication name matched by the \fBmatch\fP regex into a LDAP DN.
Each curly bracket\-enclosed numeric value is replaced by the
corresponding \fI\%regex capture group\fP extracted
from the authentication username via the \fBmatch\fP regex.
.sp
The result of the substitution must be an \fI\%RFC4514\fP escaped string.
T}	T{
\fB"cn={0},ou=engineering,
dc=example,dc=com"\fP
T}
_
T{
\fBldapQuery\fP
T}	T{
A LDAP query formatting template that inserts the authentication
name matched by the \fBmatch\fP regex into an LDAP query URI encoded
respecting RFC4515 and RFC4516. Each curly bracket\-enclosed numeric
value is replaced by the corresponding \fI\%regex capture group\fP extracted
from the authentication username via the \fBmatch\fP expression.
\fBmongod\fP executes the query against the LDAP server to retrieve
the LDAP DN for the authenticated user. \fBmongod\fP requires
exactly one returned result for the transformation to be
successful, or \fBmongod\fP skips this transformation.
T}	T{
\fB"ou=engineering,dc=example,
dc=com??one?(user={0})"\fP
T}
_
.TE
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
An explanation of  \fI\%RFC4514\fP,
\fI\%RFC4515\fP,
\fI\%RFC4516\fP, or LDAP queries is out
of scope for the MongoDB Documentation. Please review the RFC directly or
use your preferred LDAP resource.
.UNINDENT
.UNINDENT
.sp
For each document in the array, you must use either \fBsubstitution\fP or
\fBldapQuery\fP\&. You \fIcannot\fP specify both in the same document.
.sp
When performing authentication or authorization, \fBmongod\fP steps through
each document in the array in the given order, checking the authentication
username against the \fBmatch\fP filter.  If a match is found,
\fBmongod\fP applies the transformation and uses the output for
authenticating the user. \fBmongod\fP does not check the remaining documents
in the array.
.sp
If the given document does not match the provided authentication
name, \fI\%mongod\fP continues through the list of documents
to find additional matches. If no matches are found in any document,
or the transformation the document describes fails,
\fI\%mongod\fP returns an error.
.sp
Starting in MongoDB 4.4, \fI\%mongod\fP also returns an error
if one of the transformations cannot be evaluated due to networking
or authentication failures to the LDAP server. \fI\%mongod\fP
rejects the connection request and does not check the remaining
documents in the array.
.INDENT 7.0
.INDENT 3.5
.SS Example
.sp
The following shows two transformation documents. The first
document matches against any string ending in \fB@ENGINEERING\fP, placing
anything preceeding the suffix into a regex capture group. The
second document matches against any string ending in \fB@DBA\fP, placing
anything preceeding the suffix into a regex capture group.
.sp
\fBIMPORTANT:\fP
.INDENT 0.0
.INDENT 3.5
You must pass the array to \fI\%\-\-ldapUserToDNMapping\fP as a string.
.UNINDENT
.UNINDENT
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
"[
   {
      match: "(.+)@ENGINEERING.EXAMPLE.COM",
      substitution: "cn={0},ou=engineering,dc=example,dc=com"
   },
   {
      match: "(.+)@DBA.EXAMPLE.COM",
      ldapQuery: "ou=dba,dc=example,dc=com??one?(user={0})"

   }

]"
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
A user with username \fBalice@ENGINEERING.EXAMPLE.COM\fP matches the first
document. The regex capture group \fB{0}\fP corresponds to the string
\fBalice\fP\&. The resulting output is the DN
\fB"cn=alice,ou=engineering,dc=example,dc=com"\fP\&.
.sp
A user with username \fBbob@DBA.EXAMPLE.COM\fP matches the second document.
The regex capture group \fB{0}\fP corresponds to the string \fBbob\fP\&.  The
resulting output is the LDAP query
\fB"ou=dba,dc=example,dc=com??one?(user=bob)"\fP\&. \fBmongod\fP executes this
query against the LDAP server, returning the result
\fB"cn=bob,ou=dba,dc=example,dc=com"\fP\&.
.UNINDENT
.UNINDENT
.sp
If \fI\%\-\-ldapUserToDNMapping\fP is unset, \fBmongod\fP applies no transformations to the username
when attempting to authenticate or authorize a user against the LDAP server.
.sp
This setting can be configured on a running \fBmongod\fP using the
\fBsetParameter\fP database command.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-ldapAuthzQueryTemplate <string>
New in version 3.4: Available in MongoDB Enterprise only.

.sp
A relative LDAP query URL formatted conforming to \fI\%RFC4515\fP and \fI\%RFC4516\fP that \fBmongod\fP executes to obtain
the LDAP groups to which the authenticated user belongs to. The query is
relative to the host or hosts specified in \fI\%\-\-ldapServers\fP\&.
.sp
In the URL, you can use the following substituion tokens:
.TS
center;
|l|l|.
_
T{
Substitution Token
T}	T{
Description
T}
_
T{
\fB{USER}\fP
T}	T{
Substitutes the authenticated username, or the
\fBtransformed\fP
username if a \fI\%username mapping\fP is specified.
T}
_
T{
\fB{PROVIDED_USER}\fP
T}	T{
Substitutes the supplied username, i.e. before either
authentication or \fBLDAP transformation\fP\&.
.sp
New in version 4.2.
T}
_
.TE
.sp
When constructing the query URL, ensure that the order of LDAP parameters
respects RFC4516:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
[ dn  [ ? [attributes] [ ? [scope] [ ? [filter] [ ? [Extensions] ] ] ] ] ]
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
If your query includes an attribute, \fBmongod\fP assumes that the query
retrieves a the DNs which this entity is member of.
.sp
If your query does not include an attribute, \fBmongod\fP assumes
the query retrieves all entities which the user is member of.
.sp
For each LDAP DN returned by the query, \fBmongod\fP assigns the authorized
user a corresponding role on the \fBadmin\fP database. If a role on the on the
\fBadmin\fP database exactly matches the DN, \fBmongod\fP grants the user the
roles and privileges assigned to that role. See the
\fBdb.createRole()\fP method for more information on creating roles.
.INDENT 7.0
.INDENT 3.5
.SS Example
.sp
This LDAP query returns any groups listed in the LDAP user object\(aqs
\fBmemberOf\fP attribute.
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
"{USER}?memberOf?base"
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Your LDAP configuration may not include the \fBmemberOf\fP attribute as part
of the user schema, may possess a different attribute for reporting group
membership, or may not track group membership through attributes.
Configure your query with respect to your own unique LDAP configuration.
.UNINDENT
.UNINDENT
.sp
If unset, \fBmongod\fP cannot authorize users using LDAP.
.sp
This setting can be configured on a running \fBmongod\fP using the
\fBsetParameter\fP database command.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
An explanation of \fI\%RFC4515\fP,
\fI\%RFC4516\fP or LDAP queries is out
of scope for the MongoDB Documentation. Please review the RFC directly or
use your preferred LDAP resource.
.UNINDENT
.UNINDENT
.UNINDENT
.SS Storage Options
.INDENT 0.0
.TP
.B \-\-storageEngine string
\fIDefault\fP: \fBwiredTiger\fP
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
Starting in version 4.2, MongoDB removes the deprecated MMAPv1 storage
engine.
.UNINDENT
.UNINDENT
.sp
Specifies the storage engine for the \fBmongod\fP database. Available
values include:
.TS
center;
|l|l|.
_
T{
Value
T}	T{
Description
T}
_
T{
\fBwiredTiger\fP
T}	T{
To specify the /core/wiredtiger\&.
T}
_
T{
\fBinMemory\fP
T}	T{
To specify the /core/inmemory\&.
.sp
New in version 3.2: Available in MongoDB Enterprise only.
T}
_
.TE
.sp
If you attempt to start a \fBmongod\fP with a
\fI\%\-\-dbpath\fP that contains data files produced by a
storage engine other than the one specified by \fI\%\-\-storageEngine\fP, \fBmongod\fP
will refuse to start.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-dbpath <path>
\fIDefault\fP: \fB/data/db\fP on Linux and macOS, \fB\edata\edb\fP on Windows
.sp
The directory where the \fBmongod\fP instance stores its data.
.sp
If using the default
configuration file
included with a package manager installation of MongoDB, the
corresponding \fBstorage.dbPath\fP setting uses a different
default.
.sp
The files in \fI\%\-\-dbpath\fP must correspond to the storage engine
specified in \fI\%\-\-storageEngine\fP\&. If the data files do not
correspond to \fI\%\-\-storageEngine\fP, \fBmongod\fP will refuse to
start.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-directoryperdb
Uses a separate directory to store data for each database. The
directories are under the \fI\%\-\-dbpath\fP directory, and each subdirectory
name corresponds to the database name.
.sp
Not available for \fI\%mongod\fP instances that use the
in\-memory storage engine\&.
.sp
To change the \fI\%\-\-directoryperdb\fP option for existing
deployments:
.INDENT 7.0
.IP \(bu 2
For standalone instances:
.INDENT 2.0
.IP 1. 3
Use \fI\%mongodump\fP on the existing
\fI\%mongod\fP instance to generate a backup.
.IP 2. 3
Stop the \fI\%mongod\fP instance.
.IP 3. 3
Add the \fI\%\-\-directoryperdb\fP value \fBand\fP
configure a new data directory
.IP 4. 3
Restart the \fI\%mongod\fP instance.
.IP 5. 3
Use \fI\%mongorestore\fP to populate the new data
directory.
.UNINDENT
.IP \(bu 2
For replica sets:
.INDENT 2.0
.IP 1. 3
Stop a secondary member.
.IP 2. 3
Add the \fI\%\-\-directoryperdb\fP value \fBand\fP
configure a new data directory to that secondary member.
.IP 3. 3
Restart that secondary.
.IP 4. 3
Use initial sync to populate
the new data directory.
.IP 5. 3
Update remaining secondaries in the same fashion.
.IP 6. 3
Step down the primary, and update the stepped\-down member in the
same fashion.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-syncdelay <value>
\fIDefault\fP: 60
.sp
Controls how much time can pass before MongoDB flushes data to the data
files via an fsync operation.
.sp
\fBDo not set this value on
production systems.\fP In almost every situation, you should use the
default setting.
.sp
\fBWARNING:\fP
.INDENT 7.0
.INDENT 3.5
If you set \fI\%\-\-syncdelay\fP to \fB0\fP, MongoDB will not sync the
memory mapped files to disk.
.UNINDENT
.UNINDENT
.sp
The \fBmongod\fP process writes data very quickly to the journal and
lazily to the data files. \fI\%\-\-syncdelay\fP has no effect on the
\fBjournal\fP files or journaling,
but if \fI\%\-\-syncdelay\fP is set to \fB0\fP the journal will eventually consume
all available disk space. If you set \fI\%\-\-syncdelay\fP to \fB0\fP for testing
purposes, you should also set \fI\%\-\-nojournal\fP
to \fBtrue\fP\&.
.sp
The \fBserverStatus\fP command reports the background flush
thread\(aqs status via the \fBbackgroundFlushing\fP field.
.sp
Not available for \fI\%mongod\fP instances that use the
in\-memory storage engine\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-upgrade
Upgrades the on\-disk data format of the files specified by the
\fI\%\-\-dbpath\fP to the latest version, if needed.
.sp
This option only affects the operation of the \fBmongod\fP if the data
files are in an old format.
.sp
In most cases you should not set this value, so you can exercise the
most control over your upgrade process. See the MongoDB release notes
for more information about the upgrade process.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-repair
Changed in version 4.0.3.

.sp
Runs a repair routine on all databases for a \fI\%mongod\fP
instance. The operation attempts to salvage corrupt data as well as
rebuilds all the indexes. The operation discards any corrupt data
that cannot be salvaged.
.INDENT 7.0
.INDENT 3.5
.SS Tip
.sp
If you are running with journaling enabled, there is
almost never any need to run repair since the server can use the
journal files to restore the data files to a clean state automatically.
However, you may need to run repair in cases where you need to recover
from a disk\-level data corruption.
.UNINDENT
.UNINDENT
.sp
\fBWARNING:\fP
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
Only use \fI\%mongod \-\-repair\fP if you have no other options.
The operation removes and does not save any corrupt data during
the repair process.
.IP \(bu 2
Avoid running \fI\%\-\-repair\fP against
a replica set member:
.INDENT 2.0
.IP \(bu 2
To repair a replica set member, if you have an intact
copy of your data available (e.g. a recent backup or an intact
member of the replica set), restore from that intact
copy instead(see /tutorial/resync\-replica\-set\-member).
.IP \(bu 2
If you do choose to run \fI\%mongod \-\-repair\fP against a
replica set member and the operation modifies the data or the
metadata, you must still perform a full resync in order for the
member to rejoin the replica set.
.UNINDENT
.IP \(bu 2
Before using \fI\%\-\-repair\fP, make a backup
copy of the \fI\%dbpath\fP directory.
.IP \(bu 2
If repair fails to complete for any reason, you must restart the
instance using the \fI\%\-\-repair\fP option.
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-journal
Enables the durability journal to ensure data files remain valid
and recoverable. This option applies only when you specify the
\fI\%\-\-dbpath\fP option. \fBmongod\fP enables journaling by default.
.sp
Not available for \fI\%mongod\fP instances that use the
in\-memory storage engine\&.
.sp
If any voting member of a replica set uses the in\-memory
storage engine, you must set
\fBwriteConcernMajorityJournalDefault\fP to \fBfalse\fP\&.
.sp
Starting in version 4.2 (and 4.0.13 and 3.6.14 ), if a replica set
member uses the in\-memory storage engine
(voting or non\-voting) but the replica set has
\fBwriteConcernMajorityJournalDefault\fP set to true, the
replica set member logs a startup warning.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-nojournal
Disables journaling\&. \fBmongod\fP
enables journaling by default.
.sp
Not available for \fI\%mongod\fP instances that use the
in\-memory storage engine\&.
.sp
Starting in MongoDB 4.0, you cannot specify \fI\%\-\-nojournal\fP option or \fBstorage.journal.enabled:
false\fP for replica set members that use the
WiredTiger storage engine.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-journalCommitInterval <value>
\fIDefault\fP: 100
.sp
The maximum amount of time in milliseconds that
the \fBmongod\fP process allows between
journal operations. Values can range from 1 to 500 milliseconds. Lower
values increase the durability of the journal, at the expense of disk
performance.
.sp
On WiredTiger, the default journal commit interval is 100
milliseconds. Additionally, a write that includes or implies
\fBj:true\fP will cause an immediate sync of the journal. For details
or additional conditions that affect the frequency of the sync, see
journal\-process\&.
.sp
Not available for \fI\%mongod\fP instances that use the
in\-memory storage engine\&.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
Known Issue in 4.2.0: The \fI\%\-\-journalCommitInterval\fP is missing in 4.2.0.
.UNINDENT
.UNINDENT
.UNINDENT
.SS WiredTiger Options
.INDENT 0.0
.TP
.B \-\-wiredTigerCacheSizeGB <float>
Defines the maximum size of the internal cache that WiredTiger will
use for all data. The memory consumed by an index build (see
\fBmaxIndexBuildMemoryUsageMegabytes\fP) is separate from the
WiredTiger cache memory.
.sp
Values can range from \fB0.25\fP GB to \fB10000\fP GB.
.sp
Starting in MongoDB 3.4, the default WiredTiger internal cache size is
the larger of either:
.INDENT 7.0
.IP \(bu 2
50% of (RAM \- 1 GB), or
.IP \(bu 2
256 MB.
.UNINDENT
.sp
For example, on a system with a total of 4GB of RAM the WiredTiger
cache will use 1.5GB of RAM (\fB0.5 * (4 GB \- 1 GB) = 1.5 GB\fP).
Conversely, a system with a total of 1.25 GB of RAM will allocate 256
MB to the WiredTiger cache because that is more than half of the
total RAM minus one gigabyte (\fB0.5 * (1.25 GB \- 1 GB) = 128 MB < 256 MB\fP).
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
In some instances, such as when running in a container, the database
can have memory constraints that are lower than the total system
memory. In such instances, this memory limit, rather than the total
system memory, is used as the maximum RAM available.
.sp
To see the memory limit, see \fBhostInfo.system.memLimitMB\fP\&.
.UNINDENT
.UNINDENT
.sp
Avoid increasing the WiredTiger internal cache size above its
default value.
.sp
With WiredTiger, MongoDB utilizes both the WiredTiger internal cache
and the filesystem cache.
.sp
Via the filesystem cache, MongoDB automatically uses all free memory
that is not used by the WiredTiger cache or by other processes.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
The \fI\%\-\-wiredTigerCacheSizeGB\fP limits the size of the WiredTiger internal
cache. The operating system will use the available free memory
for filesystem cache, which allows the compressed MongoDB data
files to stay in memory. In addition, the operating system will
use any free RAM to buffer file system blocks and file system
cache.
.sp
To accommodate the additional consumers of RAM, you may have to
decrease WiredTiger internal cache size.
.UNINDENT
.UNINDENT
.sp
The default WiredTiger internal cache size value assumes that there is a
single \fI\%mongod\fP instance per machine. If a single machine
contains multiple MongoDB instances, then you should decrease the setting to
accommodate the other \fI\%mongod\fP
instances.
.sp
If you run \fI\%mongod\fP in a container (e.g. \fBlxc\fP,
\fBcgroups\fP, Docker, etc.) that does \fInot\fP have access to all of the
RAM available in a system, you must set \fI\%\-\-wiredTigerCacheSizeGB\fP to a value
less than the amount of RAM available in the container. The exact
amount depends on the other processes running in the container. See
\fBmemLimitMB\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-wiredTigerMaxCacheOverflowFileSizeGB <float>
.INDENT 7.0
.INDENT 3.5
.IP "Deprecated in MongoDB 4.4"
.sp
MongoDB deprecates the \fB\-\-wiredTigerMaxCacheOverflowFileSizeGB\fP
option. The option has no effect starting in MongoDB 4.4.
.UNINDENT
.UNINDENT
.sp
Specifies the maximum size (in GB) for the "lookaside (or cache
overflow) table" file \fBWiredTigerLAS.wt\fP for MongoDB
4.2.1\-4.2.x and 4.0.12\-4.0.x. The file no longer exists starting in
version 4.4.
.sp
The setting can accept the following values:
.TS
center;
|l|l|.
_
T{
Value
T}	T{
Description
T}
_
T{
\fB0\fP
T}	T{
The default value. If set to \fB0\fP, the file size is
unbounded.
T}
_
T{
number >= 0.1
T}	T{
The maximum size (in GB). If the \fBWiredTigerLAS.wt\fP
file exceeds this size, \fI\%mongod\fP exits with a
fatal assertion. You can clear the \fBWiredTigerLAS.wt\fP
file and restart \fI\%mongod\fP\&.
T}
_
.TE
.sp
To change the maximum size during runtime, use the
\fBwiredTigerMaxCacheOverflowSizeGB\fP parameter.
.sp
\fIAvailable starting in MongoDB 4.2.1 (and 4.0.12)\fP
.UNINDENT
.INDENT 0.0
.TP
.B \-\-wiredTigerJournalCompressor <compressor>
\fIDefault\fP: snappy
.sp
Specifies the type of compression to use to compress WiredTiger
journal data.
.sp
Available compressors are:
.INDENT 7.0
.IP \(bu 2
\fBnone\fP
.IP \(bu 2
snappy
.IP \(bu 2
zlib
.IP \(bu 2
zstd (Available starting in MongoDB 4.2)
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-wiredTigerDirectoryForIndexes
When you start \fBmongod\fP with \fI\%\-\-wiredTigerDirectoryForIndexes\fP, \fBmongod\fP stores indexes and collections in separate
subdirectories under the data (i.e. \fI\%\-\-dbpath\fP) directory.
Specifically, \fBmongod\fP stores the indexes in a subdirectory named
\fBindex\fP and the collection data in a subdirectory named
\fBcollection\fP\&.
.sp
By using a symbolic link, you can specify a different location for
the indexes. Specifically, when \fI\%mongod\fP instance is \fBnot\fP
running, move the \fBindex\fP subdirectory to the destination and
create a symbolic link named \fBindex\fP under the data directory to
the new destination.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-wiredTigerCollectionBlockCompressor <compressor>
\fIDefault\fP: snappy
.sp
Specifies the default compression for collection data. You can
override this on a per\-collection basis when creating collections.
.sp
Available compressors are:
.INDENT 7.0
.IP \(bu 2
\fBnone\fP
.IP \(bu 2
snappy
.IP \(bu 2
zlib
.IP \(bu 2
zstd (Available starting MongoDB 4.2)
.UNINDENT
.sp
\fI\%\-\-wiredTigerCollectionBlockCompressor\fP affects all collections created. If you change
the value of \fI\%\-\-wiredTigerCollectionBlockCompressor\fP on an existing MongoDB deployment, all new
collections will use the specified compressor. Existing collections
will continue to use the compressor specified when they were
created, or the default compressor at that time.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-wiredTigerIndexPrefixCompression <boolean>
\fIDefault\fP: true
.sp
Enables or disables prefix compression for index data.
.sp
Specify \fBtrue\fP for \fI\%\-\-wiredTigerIndexPrefixCompression\fP to enable prefix compression for
index data, or \fBfalse\fP to disable prefix compression for index data.
.sp
The \fI\%\-\-wiredTigerIndexPrefixCompression\fP setting affects all indexes created. If you change
the value of \fI\%\-\-wiredTigerIndexPrefixCompression\fP on an existing MongoDB deployment, all new
indexes will use prefix compression. Existing indexes
are not affected.
.UNINDENT
.SS Replication Options
.INDENT 0.0
.TP
.B \-\-replSet <setname>
Configures replication. Specify a replica set name as an argument to
this set. All hosts in the replica set must have the same set name.
.sp
Starting in MongoDB 4.0,
.INDENT 7.0
.IP \(bu 2
For the WiredTiger storage engine, \fI\%\-\-replSet\fP cannot be used in
conjunction with \fI\%\-\-nojournal\fP\&.
.UNINDENT
.sp
If your application connects to more than one replica set, each set
should have a distinct name. Some drivers group replica set
connections by replica set name.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-oplogSize <value>
Specifies a maximum size in megabytes for the replication operation log
(i.e., the oplog).
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
Starting in MongoDB 4.0, the oplog can grow past its configured size
limit to avoid deleting the \fBmajority commit point\fP\&.
.UNINDENT
.UNINDENT
.sp
By default, the \fBmongod\fP process creates an oplog based on
the maximum amount of space available. For 64\-bit systems, the oplog
is typically 5% of available disk space.
.sp
Once the \fBmongod\fP has created the oplog for the first time,
changing the \fI\%\-\-oplogSize\fP option will not affect the size of
the oplog. To change the minimum oplog retention period after
starting the \fI\%mongod\fP, use
\fBreplSetResizeOplog\fP\&. \fBreplSetResizeOplog\fP
enables you to resize the oplog dynamically without restarting the
\fI\%mongod\fP process. To persist the changes made using
\fBreplSetResizeOplog\fP through a restart, update the value
of \fI\%\-\-oplogSize\fP\&.
.sp
See replica\-set\-oplog\-sizing for more information.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-oplogMinRetentionHours <value>
New in version 4.4: Specifies the minimum number of hours to preserve an oplog entry,
where the decimal values represent the fractions of an hour. For
example, a value of \fB1.5\fP represents one hour and thirty
minutes.
.sp
The value must be greater than or equal to \fB0\fP\&. A value of \fB0\fP
indicates that the \fI\%mongod\fP should truncate the oplog
starting with the oldest entries to maintain the configured
maximum oplog size.

.sp
Defaults to \fB0\fP\&.
.sp
A \fI\%mongod\fP started with \fB\-\-oplogMinRetentionHours\fP
only removes an oplog entry \fIif\fP:
.INDENT 7.0
.IP \(bu 2
The oplog has reached the maximum configured oplog size \fIand\fP
.IP \(bu 2
The oplog entry is older than the configured number of hours based
on the host system clock.
.UNINDENT
.sp
The \fI\%mongod\fP has the following behavior when configured
with a minimum oplog retention period:
.INDENT 7.0
.IP \(bu 2
The oplog can grow without constraint so as to retain oplog entries
for the configured number of hours. This may result in reduction or
exhaustion of system disk space due to a combination of high write
volume and large retention period.
.IP \(bu 2
If the oplog grows beyond its maximum size, the
\fI\%mongod\fP may continue to hold that disk space even if
the oplog returns to its maximum size \fIor\fP is configured for a
smaller maximum size. See replSetResizeOplog\-cmd\-compact\&.
.IP \(bu 2
The \fI\%mongod\fP compares the system wall clock to an
oplog entries creation wall clock time when enforcing oplog entry
retention. Clock drift between cluster components may result in
unexpected oplog retention behavior. See
production\-notes\-clock\-synchronization for more information on
clock synchronization across cluster members.
.UNINDENT
.sp
To change the minimum oplog retention period after starting the
\fI\%mongod\fP, use \fBreplSetResizeOplog\fP\&.
\fBreplSetResizeOplog\fP enables you to resize the oplog
dynamically without restarting the \fI\%mongod\fP process. To
persist the changes made using \fBreplSetResizeOplog\fP
through a restart, update the value of
\fI\%\-\-oplogMinRetentionHours\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-enableMajorityReadConcern
\fIDefault\fP: true
.sp
Starting in MongoDB 3.6, MongoDB enables support for
\fB"majority"\fP read concern by default.
.sp
You can disable read concern \fB"majority"\fP to prevent
the storage cache pressure from immobilizing a deployment with a
three\-member primary\-secondary\-arbiter (PSA) architecture. For more
information about disabling read concern \fB"majority"\fP,
see disable\-read\-concern\-majority\&.
.sp
To disable, set \fI\%\-\-enableMajorityReadConcern\fP to false. \fI\%\-\-enableMajorityReadConcern\fP has no effect for
MongoDB versions: 4.0.0, 4.0.1, 4.0.2, 3.6.0.
.sp
\fBIMPORTANT:\fP
.INDENT 7.0
.INDENT 3.5
In general, avoid disabling \fB"majority"\fP read concern
unless necessary. However, if you have a three\-member replica set
with a primary\-secondary\-arbiter (PSA) architecture or a sharded
cluster with a three\-member PSA shards, disable to prevent the
storage cache pressure from immobilizing the deployment.
.sp
Disabling \fB"majority"\fP read concern affects support for
transactions on sharded clusters. Specifically:
.INDENT 0.0
.IP \(bu 2
A transaction cannot use read concern \fB"snapshot"\fP if
the transaction involves a shard that has disabled read
concern "majority"\&.
.IP \(bu 2
A transaction that writes to multiple shards errors if any of the
transaction\(aqs read or write operations involves a shard that has
disabled read concern \fB"majority"\fP\&.
.UNINDENT
.sp
However, it does not affect transactions
on replica sets. For transactions on replica sets, you can specify
read concern \fB"majority"\fP (or \fB"snapshot"\fP
or \fB"local"\fP ) for multi\-document transactions even if
read concern \fB"majority"\fP is disabled.
.sp
Disabling \fB"majority"\fP read concern disables support
for /changeStreams for MongoDB 4.0 and earlier. For MongoDB
4.2+, disabling read concern \fB"majority"\fP has no effect on change
streams availability.
.UNINDENT
.UNINDENT
.UNINDENT
.SS Sharded Cluster Options
.INDENT 0.0
.TP
.B \-\-configsvr
\fIRequired if starting a config server.\fP
.sp
Declares that this \fBmongod\fP instance serves as the config
server of a sharded cluster. When
running with this option, clients (i.e. other cluster components)
cannot write data to any database other than \fBconfig\fP
and \fBadmin\fP\&. The default port for a \fBmongod\fP with this option is
\fB27019\fP and the default \fI\%\-\-dbpath\fP directory is
\fB/data/configdb\fP, unless specified.
.sp
\fBIMPORTANT:\fP
.INDENT 7.0
.INDENT 3.5
Starting in 3.4, you must deploy config servers as a replica set.
The use of the deprecated mirrored \fI\%mongod\fP instances as
config servers (SCCC) is no longer supported.
.sp
The replica set config servers (CSRS) must run the
WiredTiger storage engine\&.
.UNINDENT
.UNINDENT
.sp
The \fI\%\-\-configsvr\fP option creates a local oplog\&.
.sp
Do not use the \fI\%\-\-configsvr\fP option with \fI\%\-\-shardsvr\fP\&. Config
servers cannot be a shard server.
.sp
Do not use the \fI\%\-\-configsvr\fP with the
\fBskipShardingConfigurationChecks\fP parameter. That is, if
you are temporarily starting the \fI\%mongod\fP as a
standalone for maintenance operations, include the parameter
\fBskipShardingConfigurationChecks\fP and exclude \fI\%\-\-configsvr\fP\&.
Once maintenance has completed, remove the
\fBskipShardingConfigurationChecks\fP parameter and restart
with \fI\%\-\-configsvr\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-configsvrMode <string>
\fBAvailable in MongoDB 3.2 version only\fP
.sp
If set to \fBsccc\fP, indicates that the config servers are deployed
as three mirrored \fI\%mongod\fP instances, even if one or more
config servers is also a member of a replica set. \fBconfigsvrMode\fP
only accepts the value \fBsccc\fP\&.
.sp
If unset, config servers running as replica sets expect to use the
"config server replica set" protocol for writing to config servers,
rather than the "mirrored mongod" write protocol.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-shardsvr
\fIRequired if starting a shard server.\fP
.sp
Configures this \fBmongod\fP instance as a shard in a
sharded cluster. The default port for these instances is
\fB27018\fP\&.
.sp
\fBIMPORTANT:\fP
.INDENT 7.0
.INDENT 3.5
Starting in MongoDB 3.6, you must deploy shards as replica sets. See the \fI\%\-\-replSet\fP
option to deploy \fBmongod\fP as part of a replica set.
.UNINDENT
.UNINDENT
.sp
Do not use the \fI\%\-\-shardsvr\fP with the
\fBskipShardingConfigurationChecks\fP parameter. That is, if
you are temporarily starting the \fI\%mongod\fP as a
standalone for maintenance operations, include the parameter
\fBskipShardingConfigurationChecks\fP and exclude \fI\%\-\-shardsvr\fP\&.
Once maintenance has completed, remove the
\fBskipShardingConfigurationChecks\fP parameter and restart
with \fI\%\-\-shardsvr\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-moveParanoia
If specified, during chunk migration, a shard saves,
to the \fBmoveChunk\fP directory of the \fB\-\-dbpath\fP, all documents
migrated from that shard.
.sp
MongoDB does not automatically delete the data saved in the
\fBmoveChunk\fP directory.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-noMoveParanoia
Changed in version 3.2: Starting in 3.2, MongoDB uses \fB\-\-noMoveParanoia\fP as the default.

.sp
During chunk migration, a shard does not save documents migrated from
the shard.
.UNINDENT
.SS TLS Options
.INDENT 0.0
.INDENT 3.5
.SS See
.sp
/tutorial/configure\-ssl for full
documentation of MongoDB\(aqs support.
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-tlsMode <mode>
New in version 4.2.

.sp
Enables TLS used for all network connections. The
argument to the \fI\%\-\-tlsMode\fP option can be one of the following:
.TS
center;
|l|l|.
_
T{
Value
T}	T{
Description
T}
_
T{
\fBdisabled\fP
T}	T{
The server does not use TLS.
T}
_
T{
\fBallowTLS\fP
T}	T{
Connections between servers do not use TLS. For incoming
connections, the server accepts both TLS and non\-TLS.
T}
_
T{
\fBpreferTLS\fP
T}	T{
Connections between servers use TLS. For incoming
connections, the server accepts both TLS and non\-TLS.
T}
_
T{
\fBrequireTLS\fP
T}	T{
The server uses and accepts only TLS encrypted connections.
T}
_
.TE
.sp
If \fB\-\-tlsCAFile\fP or \fBtls.CAFile\fP is not
specified and you are not using x.509 authentication, the
system\-wide CA certificate store will be used when connecting to an
TLS\-enabled server.
.sp
If using x.509 authentication, \fB\-\-tlsCAFile\fP or \fBtls.CAFile\fP
must be specified unless using \fI\%\-\-tlsCertificateSelector\fP\&.
.sp
For more information about TLS and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-tlsCertificateKeyFile <filename>
New in version 4.2: Specifies the \fB\&.pem\fP file that contains both the TLS
certificate and key.

.sp
Starting with MongoDB 4.0 on macOS or Windows, you can use the
\fI\%\-\-tlsCertificateSelector\fP option to specify a
certificate from the operating system\(aqs secure certificate store
instead of a PEM key file. \fI\%\-\-tlsCertificateKeyFile\fP and
\fI\%\-\-tlsCertificateSelector\fP options are mutually exclusive.
You can only specify one.
.INDENT 7.0
.IP \(bu 2
On Linux/BSD, you must specify \fI\%\-\-tlsCertificateKeyFile\fP
when TLS/SSL is enabled.
.IP \(bu 2
On Windows or macOS, you must specify either
\fI\%\-\-tlsCertificateKeyFile\fP or
\fI\%\-\-tlsCertificateSelector\fP when TLS/SSL is enabled.
.sp
\fBIMPORTANT:\fP
.INDENT 2.0
.INDENT 3.5
For Windows \fBonly\fP, MongoDB 4.0 and later do not support
encrypted PEM files. The \fI\%mongod\fP fails to start if
it encounters an encrypted PEM file. To securely store and
access a certificate for use with TLS on Windows,
use \fI\%\-\-tlsCertificateSelector\fP\&.
.UNINDENT
.UNINDENT
.UNINDENT
.sp
For more information about TLS and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-tlsCertificateKeyFilePassword <value>
New in version 4.2.

.sp
Specifies the password to de\-crypt the certificate\-key file (i.e.
\fI\%\-\-tlsCertificateKeyFile\fP). Use the
\fI\%\-\-tlsCertificateKeyFilePassword\fP option only if the
certificate\-key file is encrypted. In all cases, the
\fBmongod\fP will redact the password from all logging and
reporting output.
.sp
Starting in MongoDB 4.0:
.INDENT 7.0
.IP \(bu 2
On Linux/BSD, if the private key in the PEM file is encrypted and
you do not specify the \fI\%\-\-tlsCertificateKeyFilePassword\fP option, MongoDB will prompt for a
passphrase. See ssl\-certificate\-password\&.
.IP \(bu 2
On macOS, if the private key in the PEM file is
encrypted, you must explicitly specify the
\fI\%\-\-tlsCertificateKeyFilePassword\fP option. Alternatively,
you can use a certificate from the secure system store (see
\fI\%\-\-tlsCertificateSelector\fP) instead of a PEM file or use an
unencrypted PEM file.
.IP \(bu 2
On Windows, MongoDB does not support encrypted certificates.
The \fI\%mongod\fP fails if it encounters an encrypted
PEM file. Use \fI\%\-\-tlsCertificateSelector\fP instead.
.UNINDENT
.sp
For more information about TLS and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-clusterAuthMode <option>
\fIDefault\fP: keyFile
.sp
The authentication mode used for cluster authentication. If you use
internal x.509 authentication,
specify so here. This option can have one of the following values:
.TS
center;
|l|l|.
_
T{
Value
T}	T{
Description
T}
_
T{
\fBkeyFile\fP
T}	T{
Use a keyfile for authentication.
Accept only keyfiles.
T}
_
T{
\fBsendKeyFile\fP
T}	T{
For rolling upgrade purposes. Send a keyfile for
authentication but can accept both keyfiles and x.509
certificates.
T}
_
T{
\fBsendX509\fP
T}	T{
For rolling upgrade purposes. Send the x.509 certificate for
authentication but can accept both keyfiles and x.509
certificates.
T}
_
T{
\fBx509\fP
T}	T{
Recommended. Send the x.509 certificate for authentication and
accept only x.509 certificates.
T}
_
.TE
.sp
If \fB\-\-tlsCAFile\fP or \fBtls.CAFile\fP is not
specified and you are not using x.509 authentication, the
system\-wide CA certificate store will be used when connecting to an
TLS\-enabled server.
.sp
If using x.509 authentication, \fB\-\-tlsCAFile\fP or \fBtls.CAFile\fP
must be specified unless using \fI\%\-\-tlsCertificateSelector\fP\&.
.sp
For more information about TLS and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-tlsClusterFile <filename>
New in version 4.2: Specifies the \fB\&.pem\fP file that contains the x.509
certificate\-key file for membership authentication for the cluster or replica set.

.sp
Starting with MongoDB 4.0 on macOS or Windows, you can use the
\fI\%\-\-tlsClusterCertificateSelector\fP option to specify a
certificate from the operating system\(aqs secure certificate store
instead of a PEM key file. \fI\%\-\-tlsClusterFile\fP and
\fI\%\-\-tlsClusterCertificateSelector\fP options are mutually
exclusive. You can only specify one.
.sp
If \fI\%\-\-tlsClusterFile\fP does not specify the \fB\&.pem\fP file for
internal cluster authentication or the alternative
\fI\%\-\-tlsClusterCertificateSelector\fP, the cluster uses the
\fB\&.pem\fP file specified in the \fI\%\-\-tlsCertificateKeyFile\fP
option or the certificate returned by the
\fI\%\-\-tlsCertificateSelector\fP\&.
.sp
If using x.509 authentication, \fB\-\-tlsCAFile\fP or \fBtls.CAFile\fP
must be specified unless using \fI\%\-\-tlsCertificateSelector\fP\&.
.sp
Changed in version 4.4: \fI\%mongod\fP / \fBmongos\fP logs a warning on
connection if the presented x.509 certificate expires within \fB30\fP
days of the \fBmongod/mongos\fP host system time. See
4.4\-rel\-notes\-certificate\-expiration\-warning for more
information.

.sp
For more information about TLS and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.sp
\fBIMPORTANT:\fP
.INDENT 7.0
.INDENT 3.5
For Windows \fBonly\fP, MongoDB 4.0 and later do not support
encrypted PEM files. The \fI\%mongod\fP fails to start if
it encounters an encrypted PEM file. To securely store and
access a certificate for use with membership authentication on
Windows, use \fI\%\-\-tlsClusterCertificateSelector\fP\&.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-tlsCertificateSelector <parameter>=<value>
New in version 4.2: Available on Windows and macOS as an alternative to
\fI\%\-\-tlsCertificateKeyFile\fP\&. In version 4.0, see
\fI\%\-\-sslCertificateSelector\fP\&.

.sp
Specifies a certificate property in order to select a matching
certificate from the operating system\(aqs certificate store to use for
TLS.
.sp
The \fI\%\-\-tlsCertificateKeyFile\fP and
\fI\%\-\-tlsCertificateSelector\fP options are mutually exclusive.
You can only specify one.
.sp
\fI\%\-\-tlsCertificateSelector\fP accepts an argument of the format
\fB<property>=<value>\fP where the property can be one of the
following:
.TS
center;
|l|l|l|.
_
T{
Property
T}	T{
Value type
T}	T{
Description
T}
_
T{
\fBsubject\fP
T}	T{
ASCII string
T}	T{
Subject name or common name on certificate
T}
_
T{
\fBthumbprint\fP
T}	T{
hex string
T}	T{
A sequence of bytes, expressed as hexadecimal, used to
identify a public key by its SHA\-1 digest.
.sp
The \fBthumbprint\fP is sometimes referred to as a
\fBfingerprint\fP\&.
T}
_
.TE
.sp
When using the system SSL certificate store, OCSP (Online
Certificate Status Protocol) is used to validate the revocation
status of certificates.
.sp
The \fI\%mongod\fP searches the operating system\(aqs secure
certificate store for the CA certificates required to validate the
full certificate chain of the specified TLS certificate.
Specifically, the secure certificate store must contain the root CA
and any intermediate CA certificates required to build the full
certificate chain to the TLS certificate. Do \fBnot\fP use
\fI\%\-\-tlsCAFile\fP or \fI\%\-\-tlsClusterCAFile\fP to specify the
root and intermediate CA certificate
.sp
For example, if the TLS/SSL certificate was signed with a single root
CA certificate, the secure certificate store must contain that root
CA certificate. If the TLS/SSL certificate was signed with an
intermediate CA certificate, the secure certificate store must
contain the intermedia CA certificate \fIand\fP the root CA certificate.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-tlsClusterCertificateSelector <parameter>=<value>
New in version 4.2: Available on Windows and macOS as an alternative to
\fI\%\-\-tlsClusterFile\fP\&.
.sp
Specifies a certificate property in order to select a matching
certificate from the operating system\(aqs certificate store to use
for internal x.509 membership authentication\&.
.sp
\fI\%\-\-tlsClusterFile\fP and
\fI\%\-\-tlsClusterCertificateSelector\fP options are mutually
exclusive. You can only specify one.

.sp
\fI\%\-\-tlsClusterCertificateSelector\fP accepts an argument of the
format \fB<property>=<value>\fP where the property can be one of the
following:
.TS
center;
|l|l|l|.
_
T{
Property
T}	T{
Value type
T}	T{
Description
T}
_
T{
\fBsubject\fP
T}	T{
ASCII string
T}	T{
Subject name or common name on certificate
T}
_
T{
\fBthumbprint\fP
T}	T{
hex string
T}	T{
A sequence of bytes, expressed as hexadecimal, used to
identify a public key by its SHA\-1 digest.
.sp
The \fBthumbprint\fP is sometimes referred to as a
\fBfingerprint\fP\&.
T}
_
.TE
.sp
The \fI\%mongod\fP searches the operating system\(aqs secure
certificate store for the CA certificates required to validate the
full certificate chain of the specified cluster certificate.
Specifically, the secure certificate store must contain the root CA
and any intermediate CA certificates required to build the full
certificate chain to the cluster certificate. Do \fBnot\fP use
\fI\%\-\-tlsCAFile\fP or \fI\%\-\-tlsClusterCAFile\fP to specify the
root and intermediate CA certificate.
.sp
For example, if the cluster certificate was signed with a single root
CA certificate, the secure certificate store must contain that root
CA certificate. If the cluster certificate was signed with an
intermediate CA certificate, the secure certificate store must
contain the intermedia CA certificate \fIand\fP the root CA certificate.
.sp
Changed in version 4.4: \fI\%mongod\fP / \fBmongos\fP logs a warning on
connection if the presented x.509 certificate expires within \fB30\fP
days of the \fBmongod/mongos\fP host system time. See
4.4\-rel\-notes\-certificate\-expiration\-warning for more
information.

.UNINDENT
.INDENT 0.0
.TP
.B \-\-tlsClusterPassword <value>
New in version 4.2: Specifies the password to de\-crypt the x.509 certificate\-key file
specified with \fI\%\-\-tlsClusterFile\fP\&. Use the
\fI\%\-\-tlsClusterPassword\fP option only if the certificate\-key
file is encrypted. In all cases, the \fBmongod\fP will redact
the password from all logging and reporting output.

.sp
Starting in MongoDB 4.0:
.INDENT 7.0
.IP \(bu 2
On Linux/BSD, if the private key in the x.509 file is encrypted and
you do not specify the \fI\%\-\-tlsClusterPassword\fP option,
MongoDB will prompt for a passphrase. See
ssl\-certificate\-password\&.
.IP \(bu 2
On macOS, if the private key in the x.509 file is
encrypted, you must explicitly specify the
\fI\%\-\-tlsClusterPassword\fP option. Alternatively, you can
either use a certificate from the secure system store (see
\fI\%\-\-tlsClusterCertificateSelector\fP) instead of a cluster PEM
file or use an unencrypted PEM file.
.IP \(bu 2
On Windows, MongoDB does not support encrypted certificates.
The \fI\%mongod\fP fails if it encounters an encrypted
PEM file. Use \fI\%\-\-tlsClusterCertificateSelector\fP instead.
.UNINDENT
.sp
For more information about TLS and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-tlsCAFile <filename>
New in version 4.2.

.sp
Specifies the \fB\&.pem\fP file that contains the root certificate
chain from the Certificate Authority. Specify the file name of the
\fB\&.pem\fP file using relative or absolute paths.
.INDENT 7.0
.TP
.B Windows/macOS Only
If using \fI\%\-\-tlsCertificateSelector\fP and/or
\fI\%\-\-tlsClusterCertificateSelector\fP, do \fBnot\fP use
\fI\%\-\-tlsCAFile\fP to specify the root and intermediate CA
certificates. Store all CA certificates required to validate the
full trust chain of the \fI\%\-\-tlsCertificateSelector\fP and/or
\fI\%\-\-tlsClusterCertificateSelector\fP certificates in the
secure certificate store.
.UNINDENT
.sp
For more information about TLS and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-tlsClusterCAFile <filename>
New in version 4.2.

.sp
Specifies the \fB\&.pem\fP file that contains the root certificate
chain from the Certificate Authority used to validate the certificate
presented by a client establishing a connection. Specify the file
name of the \fB\&.pem\fP file using relative or absolute paths.
\fI\%\-\-tlsClusterCAFile\fP requires that
\fI\%\-\-tlsCAFile\fP is set.
.sp
If \fI\%\-\-tlsClusterCAFile\fP does not specify the \fB\&.pem\fP
file for validating the certificate from a client establishing a
connection, the cluster uses the \fB\&.pem\fP file specified in the
\fI\%\-\-tlsCAFile\fP option.
.sp
\fI\%\-\-tlsClusterCAFile\fP lets you use separate Certificate
Authorities to verify the client to server and server to client
portions of the TLS handshake.
.INDENT 7.0
.TP
.B Windows/macOS Only
If using \fI\%\-\-tlsCertificateSelector\fP and/or
\fI\%\-\-tlsClusterCertificateSelector\fP, do \fBnot\fP use
\fI\%\-\-tlsClusterCAFile\fP to specify the root and
intermediate CA certificates. Store all CA certificates required to
validate the full trust chain of the
\fI\%\-\-tlsCertificateSelector\fP and/or
\fI\%\-\-tlsClusterCertificateSelector\fP certificates in the
secure certificate store.
.UNINDENT
.sp
For more information about TLS and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-tlsCRLFile <filename>
New in version 4.2: For MongoDB 4.0 and earlier, see \fI\%\-\-sslCRLFile\fP\&.

.sp
Specifies the \fB\&.pem\fP file that contains the Certificate Revocation
List. Specify the file name of the \fB\&.pem\fP file using relative or
absolute paths.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
Starting in MongoDB 4.0, you cannot specify a CRL file on
macOS. Instead, you can use the system SSL certificate store,
which uses OCSP (Online Certificate Status Protocol) to
validate the revocation status of certificates. See
\fI\%\-\-sslCertificateSelector\fP in MongoDB 4.0 and
\fI\%\-\-tlsCertificateSelector\fP in MongoDB 4.2+ to use the
system SSL certificate store.
.IP \(bu 2
Starting in version 4.4, to check for certificate revocation,
MongoDB \fBenables\fP the use of OCSP
(Online Certificate Status Protocol) by default as an
alternative to specifying a CRL file or using the system SSL
certificate store.
.UNINDENT
.UNINDENT
.UNINDENT
.sp
For more information about TLS and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-tlsAllowInvalidCertificates
New in version 4.2.

.sp
Bypasses the validation checks for TLS certificates on other
servers in the cluster and allows the use of invalid certificates to
connect.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
If you specify
\fB\-\-tlsAllowInvalidCertificates\fP or \fBtls.allowInvalidCertificates:
true\fP when using x.509 authentication, an invalid certificate is
only sufficient to establish a TLS connection but is
\fIinsufficient\fP for authentication.
.UNINDENT
.UNINDENT
.sp
When using
the \fI\%\-\-tlsAllowInvalidCertificates\fP setting, MongoDB
logs a warning regarding the use of the invalid certificate.
.sp
For more information about TLS and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-tlsAllowInvalidHostnames
New in version 4.2.

.sp
Disables the validation of the hostnames in TLS certificates,
when connecting to other members of the replica set or sharded cluster
for inter\-process authentication. This allows \fBmongod\fP to connect
to other members if the hostnames in their certificates do not match
their configured hostname.
.sp
For more information about TLS and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-tlsAllowConnectionsWithoutCertificates
New in version 4.2.

.sp
For clients that do not present certificates, \fBmongod\fP bypasses
TLS/SSL certificate validation when establishing the connection.
.sp
For clients that present a certificate, however, \fBmongod\fP performs
certificate validation using the root certificate chain specified by
\fB\-\-tlsCAFile\fP and reject clients with invalid certificates.
.sp
Use the \fI\%\-\-tlsAllowConnectionsWithoutCertificates\fP option if you have a mixed deployment that includes
clients that do not or cannot present certificates to the \fBmongod\fP\&.
.sp
For more information about TLS and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-tlsDisabledProtocols <protocol(s)>
New in version 4.2.

.sp
Prevents a MongoDB server running with TLS from accepting
incoming connections that use a specific protocol or protocols. To
specify multiple protocols, use a comma separated list of protocols.
.sp
\fI\%\-\-tlsDisabledProtocols\fP recognizes the following protocols: \fBTLS1_0\fP, \fBTLS1_1\fP,
\fBTLS1_2\fP, and \fBTLS1_3\fP\&.
.INDENT 7.0
.IP \(bu 2
On macOS, you cannot disable \fBTLS1_1\fP and leave both \fBTLS1_0\fP and
\fBTLS1_2\fP enabled. You must disable at least one of the other
two, for example, \fBTLS1_0,TLS1_1\fP\&.
.IP \(bu 2
To list multiple protocols, specify as a comma separated list of
protocols. For example \fBTLS1_0,TLS1_1\fP\&.
.IP \(bu 2
Specifying an unrecognized protocol will prevent the server from
starting.
.IP \(bu 2
The specified disabled protocols overrides any default disabled
protocols.
.UNINDENT
.sp
Starting in version 4.0, MongoDB disables the use of TLS 1.0 if TLS
1.1+ is available on the system. To enable the disabled TLS 1.0,
specify \fBnone\fP to \fI\%\-\-tlsDisabledProtocols\fP\&. See 4.0\-disable\-tls\&.
.sp
Members of replica sets and sharded clusters must speak at least one
protocol in common.
.sp
\fBSEE ALSO:\fP
.INDENT 7.0
.INDENT 3.5
ssl\-disallow\-protocols
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-tlsFIPSMode
New in version 4.2.

.sp
Directs the \fBmongod\fP to use the FIPS mode of the  TLS
library. Your system must have a FIPS
compliant library to use the \fI\%\-\-tlsFIPSMode\fP option.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
FIPS\-compatible TLS/SSL is
available only in \fI\%MongoDB Enterprise\fP\&. See
/tutorial/configure\-fips for more information.
.UNINDENT
.UNINDENT
.UNINDENT
.SS SSL Options (Deprecated)
.sp
\fBIMPORTANT:\fP
.INDENT 0.0
.INDENT 3.5
All SSL options are deprecated since 4.2. Use the \fI\%TLS counterparts\fP instead, as they have identical functionality to the
SSL options.  The SSL protocol is deprecated and MongoDB supports TLS 1.0
and later.
.UNINDENT
.UNINDENT
.INDENT 0.0
.INDENT 3.5
.SS See
.sp
/tutorial/configure\-ssl for full
documentation of MongoDB\(aqs support.
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslOnNormalPorts
Deprecated since version 2.6: Use \fI\%\-\-tlsMode requireTLS\fP instead.

.sp
Enables TLS/SSL for \fBmongod\fP\&.
.sp
With \fI\%\-\-sslOnNormalPorts\fP, a \fBmongod\fP requires TLS/SSL encryption for all
connections on the default MongoDB port, or the port specified by
\fI\%\-\-port\fP\&. By default, \fI\%\-\-sslOnNormalPorts\fP is
disabled.
.sp
For more information about TLS/SSL and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslMode <mode>
Deprecated since version 4.2: Use \fI\%\-\-tlsMode\fP instead.

.sp
Enables TLS/SSL or mixed TLS/SSL used for all network connections. The
argument to the \fI\%\-\-sslMode\fP option can be one of the following:
.TS
center;
|l|l|.
_
T{
Value
T}	T{
Description
T}
_
T{
\fBdisabled\fP
T}	T{
The server does not use TLS/SSL.
T}
_
T{
\fBallowSSL\fP
T}	T{
Connections between servers do not use TLS/SSL. For incoming
connections, the server accepts both TLS/SSL and non\-TLS/non\-SSL.
T}
_
T{
\fBpreferSSL\fP
T}	T{
Connections between servers use TLS/SSL. For incoming
connections, the server accepts both TLS/SSL and non\-TLS/non\-SSL.
T}
_
T{
\fBrequireSSL\fP
T}	T{
The server uses and accepts only TLS/SSL encrypted connections.
T}
_
.TE
.sp
Starting in version 3.4, if \fB\-\-tlsCAFile\fP/\fBnet.tls.CAFile\fP (or
their aliases \fB\-\-sslCAFile\fP/\fBnet.ssl.CAFile\fP) is not specified
and you are not using x.509 authentication, the system\-wide CA
certificate store will be used when connecting to an TLS/SSL\-enabled
server.
.sp
To use x.509 authentication, \fB\-\-tlsCAFile\fP or \fBnet.tls.CAFile\fP
must be specified unless using \fB\-\-tlsCertificateSelector\fP or
\fB\-\-net.tls.certificateSelector\fP\&. Or if using the \fBssl\fP aliases,
\fB\-\-sslCAFile\fP or \fBnet.ssl.CAFile\fP must be specified unless using
\fB\-\-sslCertificateSelector\fP or \fBnet.ssl.certificateSelector\fP\&.
.sp
For more information about TLS/SSL and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslPEMKeyFile <filename>
Deprecated since version 4.2: Use \fI\%\-\-tlsCertificateKeyFile\fP instead.

.sp
Specifies the \fB\&.pem\fP file that contains both the TLS/SSL
certificate and key.
.sp
Starting with MongoDB 4.0 on macOS or Windows, you can use the
\fI\%\-\-sslCertificateSelector\fP option to specify a
certificate from the operating system\(aqs secure certificate store
instead of a PEM key file. \fI\%\-\-sslPEMKeyFile\fP and
\fI\%\-\-sslCertificateSelector\fP options are mutually exclusive.
You can only specify one.
.INDENT 7.0
.IP \(bu 2
On Linux/BSD, you must specify \fI\%\-\-sslPEMKeyFile\fP when
TLS/SSL is enabled.
.IP \(bu 2
On Windows or macOS, you must specify either
\fI\%\-\-sslPEMKeyFile\fP or \fI\%\-\-sslCertificateSelector\fP
when TLS/SSL is enabled.
.sp
\fBIMPORTANT:\fP
.INDENT 2.0
.INDENT 3.5
For Windows \fBonly\fP, MongoDB 4.0 and later do not support
encrypted PEM files. The \fI\%mongod\fP fails to start if
it encounters an encrypted PEM file. To securely store and
access a certificate for use with TLS/SSL on Windows,
use \fI\%\-\-sslCertificateSelector\fP\&.
.UNINDENT
.UNINDENT
.UNINDENT
.sp
For more information about TLS/SSL and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslPEMKeyPassword <value>
Deprecated since version 4.2: Use \fI\%\-\-tlsCertificateKeyFilePassword\fP instead.

.sp
Specifies the password to de\-crypt the certificate\-key file (i.e.
\fI\%\-\-sslPEMKeyFile\fP). Use the \fI\%\-\-sslPEMKeyPassword\fP option only if the
certificate\-key file is encrypted. In all cases, the \fBmongod\fP will
redact the password from all logging and reporting output.
.sp
Starting in MongoDB 4.0:
.INDENT 7.0
.IP \(bu 2
On Linux/BSD, if the private key in the PEM file is encrypted and
you do not specify the \fI\%\-\-sslPEMKeyPassword\fP option, MongoDB will prompt for a
passphrase. See ssl\-certificate\-password\&.
.IP \(bu 2
On macOS, if the private key in the PEM file is
encrypted, you must explicitly specify the
\fI\%\-\-sslPEMKeyPassword\fP option. Alternatively, you can use a
certificate from the secure system store (see
\fI\%\-\-sslCertificateSelector\fP) instead of a PEM key file or
use an unencrypted PEM file.
.IP \(bu 2
On Windows, MongoDB does not support encrypted certificates.
The \fI\%mongod\fP fails if it encounters an encrypted
PEM file. Use \fI\%\-\-sslCertificateSelector\fP instead.
.UNINDENT
.sp
For more information about TLS/SSL and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslClusterFile <filename>
Deprecated since version 4.2: Use \fI\%\-\-tlsClusterFile\fP instead.

.sp
Specifies the \fB\&.pem\fP file that contains the x.509
certificate\-key file for membership authentication for the cluster or replica set.
.sp
Starting with MongoDB 4.0 on macOS or Windows, you can use the
\fI\%\-\-sslClusterCertificateSelector\fP option to specify a
certificate from the operating system\(aqs secure certificate store
instead of a PEM key file. \fI\%\-\-sslClusterFile\fP and
\fI\%\-\-sslClusterCertificateSelector\fP options are mutually
exclusive. You can only specify one.
.sp
If \fI\%\-\-sslClusterFile\fP does not specify the \fB\&.pem\fP file for
internal cluster authentication or the alternative
\fI\%\-\-sslClusterCertificateSelector\fP, the cluster uses the
\fB\&.pem\fP file specified in the \fI\%\-\-sslPEMKeyFile\fP option or
the certificate returned by the \fI\%\-\-sslCertificateSelector\fP\&.
.sp
To use x.509 authentication, \fB\-\-tlsCAFile\fP or \fBnet.tls.CAFile\fP
must be specified unless using \fB\-\-tlsCertificateSelector\fP or
\fB\-\-net.tls.certificateSelector\fP\&. Or if using the \fBssl\fP aliases,
\fB\-\-sslCAFile\fP or \fBnet.ssl.CAFile\fP must be specified unless using
\fB\-\-sslCertificateSelector\fP or \fBnet.ssl.certificateSelector\fP\&.
.sp
For more information about TLS/SSL and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.sp
\fBIMPORTANT:\fP
.INDENT 7.0
.INDENT 3.5
For Windows \fBonly\fP, MongoDB 4.0 and later do not support
encrypted PEM files. The \fI\%mongod\fP fails to start if
it encounters an encrypted PEM file. To securely store and
access a certificate for use with membership authentication on
Windows, use \fI\%\-\-sslClusterCertificateSelector\fP\&.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslCertificateSelector <parameter>=<value>
Deprecated since version 4.2: Use \fI\%\-\-tlsCertificateSelector\fP instead.

.sp
New in version 4.0: Available on Windows and macOS as an alternative to
\fI\%\-\-tlsCertificateKeyFile\fP\&.
.sp
Specifies a certificate property to select a matching certificate
from the operating system\(aqs secure certificate store to use for
TLS/SSL.
.sp
\fI\%\-\-sslPEMKeyFile\fP and \fI\%\-\-sslCertificateSelector\fP
options are mutually exclusive. You can only specify one.

.sp
\fI\%\-\-sslCertificateSelector\fP accepts an argument of the format
\fB<property>=<value>\fP where the property can be one of the
following:
.TS
center;
|l|l|l|.
_
T{
Property
T}	T{
Value type
T}	T{
Description
T}
_
T{
\fBsubject\fP
T}	T{
ASCII string
T}	T{
Subject name or common name on certificate
T}
_
T{
\fBthumbprint\fP
T}	T{
hex string
T}	T{
A sequence of bytes, expressed as hexadecimal, used to
identify a public key by its SHA\-1 digest.
.sp
The \fBthumbprint\fP is sometimes referred to as a
\fBfingerprint\fP\&.
T}
_
.TE
.sp
When using the system SSL certificate store, OCSP (Online
Certificate Status Protocol) is used to validate the revocation
status of certificates.
.sp
The \fI\%mongod\fP searches the operating system\(aqs secure
certificate store for the CA certificates required to validate the
full certificate chain of the specified TLS/SSL certificate.
Specifically, the secure certificate store must contain the root CA
and any intermediate CA certificates required to build the full
certificate chain to the TLS/SSL certificate. Do \fBnot\fP use
\fI\%\-\-sslCAFile\fP or \fI\%\-\-sslClusterCAFile\fP to specify the
root and intermediate CA certificate
.sp
For example, if the TLS/SSL certificate was signed with a single root
CA certificate, the secure certificate store must contain that root
CA certificate. If the TLS/SSL certificate was signed with an
intermediate CA certificate, the secure certificate store must
contain the intermedia CA certificate \fIand\fP the root CA certificate.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslClusterCertificateSelector <parameter>=<value>
Deprecated since version 4.2: Use \fI\%\-\-tlsClusterCertificateSelector\fP instead.

.sp
New in version 4.0: Available on Windows and macOS as an alternative to
\fI\%\-\-sslClusterFile\fP\&.
.sp
Specifies a certificate property to select a matching certificate
from the operating system\(aqs secure certificate store to use for
internal x.509 membership authentication\&.
.sp
\fI\%\-\-sslClusterFile\fP and
\fI\%\-\-sslClusterCertificateSelector\fP options are mutually
exclusive. You can only specify one.

.sp
\fI\%\-\-sslClusterCertificateSelector\fP accepts an argument of the
format \fB<property>=<value>\fP where the property can be one of the
following:
.TS
center;
|l|l|l|.
_
T{
Property
T}	T{
Value type
T}	T{
Description
T}
_
T{
\fBsubject\fP
T}	T{
ASCII string
T}	T{
Subject name or common name on certificate
T}
_
T{
\fBthumbprint\fP
T}	T{
hex string
T}	T{
A sequence of bytes, expressed as hexadecimal, used to
identify a public key by its SHA\-1 digest.
.sp
The \fBthumbprint\fP is sometimes referred to as a
\fBfingerprint\fP\&.
T}
_
.TE
.sp
The \fI\%mongod\fP searches the operating system\(aqs secure
certificate store for the CA certificates required to validate the
full certificate chain of the specified cluster certificate.
Specifically, the secure certificate store must contain the root CA
and any intermediate CA certificates required to build the full
certificate chain to the cluster certificate. Do \fBnot\fP use
\fI\%\-\-sslCAFile\fP or \fI\%\-\-sslClusterCAFile\fP to specify the
root and intermediate CA certificate.
.sp
For example, if the cluster certificate was signed with a single root
CA certificate, the secure certificate store must contain that root
CA certificate. If the cluster certificate was signed with an
intermediate CA certificate, the secure certificate store must
contain the intermedia CA certificate \fIand\fP the root CA certificate.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslClusterPassword <value>
Deprecated since version 4.2: Use \fI\%\-\-tlsClusterPassword\fP instead.

.sp
Specifies the password to de\-crypt the x.509 certificate\-key file
specified with \fB\-\-sslClusterFile\fP\&. Use the \fI\%\-\-sslClusterPassword\fP option only
if the certificate\-key file is encrypted. In all cases, the \fBmongod\fP
will redact the password from all logging and reporting output.
.sp
Starting in MongoDB 4.0:
.INDENT 7.0
.IP \(bu 2
On Linux/BSD, if the private key in the x.509 file is encrypted and
you do not specify the \fI\%\-\-sslClusterPassword\fP option, MongoDB will prompt for a
passphrase. See ssl\-certificate\-password\&.
.IP \(bu 2
On macOS, if the private key in the x.509 file is encrypted, you
must explicitly specify the \fI\%\-\-sslClusterPassword\fP option.
Alternatively, you can either use a certificate from the secure
system store (see \fI\%\-\-sslClusterCertificateSelector\fP)
instead of a cluster PEM file or use an unencrypted PEM file.
.IP \(bu 2
On Windows, MongoDB does not support encrypted certificates.
The \fI\%mongod\fP fails if it encounters an encrypted
PEM file. Use \fI\%\-\-sslClusterCertificateSelector\fP instead.
.UNINDENT
.sp
For more information about TLS/SSL and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslCAFile <filename>
Deprecated since version 4.2: Use \fI\%\-\-tlsCAFile\fP instead.

.sp
Specifies the \fB\&.pem\fP file that contains the root certificate
chain from the Certificate Authority. Specify the file name of the
\fB\&.pem\fP file using relative or absolute paths.
.INDENT 7.0
.TP
.B Windows/macOS Only
If using \fI\%\-\-sslCertificateSelector\fP and/or
\fI\%\-\-sslClusterCertificateSelector\fP, do \fBnot\fP use
\fI\%\-\-sslCAFile\fP to specify the root and intermediate CA
certificates. Store all CA certificates required to validate the
full trust chain of the \fI\%\-\-sslCertificateSelector\fP and/or
\fI\%\-\-sslClusterCertificateSelector\fP certificates in the
secure certificate store.
.UNINDENT
.sp
For more information about TLS/SSL and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslClusterCAFile <filename>
Deprecated since version 4.2: Use \fI\%\-\-tlsClusterCAFile\fP instead.

.sp
Specifies the \fB\&.pem\fP file that contains the root certificate
chain from the Certificate Authority used to validate the certificate
presented by a client establishing a connection. Specify the file
name of the \fB\&.pem\fP file using relative or absolute paths.
\fI\%\-\-sslClusterCAFile\fP requires that
\fI\%\-\-sslCAFile\fP is set.
.sp
If \fI\%\-\-sslClusterCAFile\fP does not specify the \fB\&.pem\fP
file for validating the certificate from a client establishing a
connection, the cluster uses the \fB\&.pem\fP file specified in the
\fI\%\-\-sslCAFile\fP option.
.sp
\fI\%\-\-sslClusterCAFile\fP lets you use separate Certificate
Authorities to verify the client to server and server to client
portions of the TLS handshake.
.INDENT 7.0
.TP
.B Windows/macOS Only
If using \fI\%\-\-sslCertificateSelector\fP and/or
\fI\%\-\-sslClusterCertificateSelector\fP, do \fBnot\fP use
\fI\%\-\-sslClusterCAFile\fP to specify the root and
intermediate CA certificates. Store all CA certificates required to
validate the full trust chain of the
\fI\%\-\-sslCertificateSelector\fP and/or
\fI\%\-\-sslClusterCertificateSelector\fP certificates in the
secure certificate store.
.UNINDENT
.sp
For more information about TLS/SSL and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslCRLFile <filename>
Deprecated since version 4.2: Use \fI\%\-\-tlsCRLFile\fP instead.

.sp
Specifies the \fB\&.pem\fP file that contains the Certificate Revocation
List. Specify the file name of the \fB\&.pem\fP file using relative or
absolute paths.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
Starting in MongoDB 4.0, you cannot specify a CRL file on
macOS. Instead, you can use the system SSL certificate store,
which uses OCSP (Online Certificate Status Protocol) to
validate the revocation status of certificates. See
\fI\%\-\-sslCertificateSelector\fP in MongoDB 4.0 and
\fI\%\-\-tlsCertificateSelector\fP in MongoDB 4.2+ to use the
system SSL certificate store.
.IP \(bu 2
Starting in version 4.4, to check for certificate revocation,
MongoDB \fBenables\fP the use of OCSP
(Online Certificate Status Protocol) by default as an
alternative to specifying a CRL file or using the system SSL
certificate store.
.UNINDENT
.UNINDENT
.UNINDENT
.sp
For more information about TLS/SSL and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslAllowInvalidCertificates
Deprecated since version 4.2: Use \fI\%\-\-tlsAllowInvalidCertificates\fP instead.

.sp
Bypasses the validation checks for TLS/SSL certificates on other
servers in the cluster and allows the use of invalid certificates to
connect.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
Starting in MongoDB 4.0, if you specify
\fB\-\-sslAllowInvalidCertificates\fP or
\fBnet.ssl.allowInvalidCertificates: true\fP (or in MongoDB 4.2, the
alias \fB\-\-tlsAllowInvalidateCertificates\fP or
\fBnet.tls.allowInvalidCertificates: true\fP) when using x.509
authentication, an invalid certificate is only sufficient to
establish a TLS/SSL connection but is \fIinsufficient\fP for
authentication.
.UNINDENT
.UNINDENT
.sp
When using
the \fI\%\-\-sslAllowInvalidCertificates\fP setting, MongoDB
logs a warning regarding the use of the invalid certificate.
.sp
For more information about TLS/SSL and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslAllowInvalidHostnames
Deprecated since version 4.2: Use \fI\%\-\-tlsAllowInvalidHostnames\fP instead.

.sp
Disables the validation of the hostnames in TLS/SSL certificates,
when connecting to other members of the replica set or sharded cluster
for inter\-process authentication. This allows \fBmongod\fP to connect
to other members if the hostnames in their certificates do not match
their configured hostname.
.sp
For more information about TLS/SSL and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslAllowConnectionsWithoutCertificates
Deprecated since version 4.2: Use \fI\%\-\-tlsAllowConnectionsWithoutCertificates\fP instead.

.sp
For clients that do not present certificates, \fBmongod\fP bypasses
TLS/SSL certificate validation when establishing the connection.
.sp
For clients that present a certificate, however, \fBmongod\fP performs
certificate validation using the root certificate chain specified by
\fB\-\-sslCAFile\fP and reject clients with invalid certificates.
.sp
Use the \fI\%\-\-sslAllowConnectionsWithoutCertificates\fP option if you have a mixed deployment that includes
clients that do not or cannot present certificates to the \fBmongod\fP\&.
.sp
For more information about TLS/SSL and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslDisabledProtocols <protocol(s)>
Deprecated since version 4.2: Use \fI\%\-\-tlsDisabledProtocols\fP instead.

.sp
Prevents a MongoDB server running with TLS/SSL from accepting
incoming connections that use a specific protocol or protocols. To
specify multiple protocols, use a comma separated list of protocols.
.sp
\fI\%\-\-sslDisabledProtocols\fP recognizes the following protocols: \fBTLS1_0\fP, \fBTLS1_1\fP,
\fBTLS1_2\fP, and starting in version 4.0.4 (and 3.6.9 and 3.4.24), \fBTLS1_3\fP\&.
.INDENT 7.0
.IP \(bu 2
On macOS, you cannot disable \fBTLS1_1\fP and leave both \fBTLS1_0\fP and
\fBTLS1_2\fP enabled. You must disable at least one of the other
two, for example, \fBTLS1_0,TLS1_1\fP\&.
.IP \(bu 2
To list multiple protocols, specify as a comma separated list of
protocols. For example \fBTLS1_0,TLS1_1\fP\&.
.IP \(bu 2
Specifying an unrecognized protocol will prevent the server from
starting.
.IP \(bu 2
The specified disabled protocols overrides any default disabled
protocols.
.UNINDENT
.sp
Starting in version 4.0, MongoDB disables the use of TLS 1.0 if TLS
1.1+ is available on the system. To enable the disabled TLS 1.0,
specify \fBnone\fP to \fI\%\-\-sslDisabledProtocols\fP\&. See 4.0\-disable\-tls\&.
.sp
Members of replica sets and sharded clusters must speak at least one
protocol in common.
.sp
\fBSEE ALSO:\fP
.INDENT 7.0
.INDENT 3.5
ssl\-disallow\-protocols
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslFIPSMode
Deprecated since version 4.2: Use \fI\%\-\-tlsFIPSMode\fP instead.

.sp
Directs the \fBmongod\fP to use the FIPS mode of the  TLS/SSL
library. Your system must have a FIPS
compliant library to use the \fI\%\-\-sslFIPSMode\fP option.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
FIPS\-compatible TLS/SSL is
available only in \fI\%MongoDB Enterprise\fP\&. See
/tutorial/configure\-fips for more information.
.UNINDENT
.UNINDENT
.UNINDENT
.SS Profiler Options
.INDENT 0.0
.TP
.B \-\-profile <level>
\fIDefault\fP: 0
.sp
Configures the database profiler level.
The following profiler levels are available:
.TS
center;
|l|l|.
_
T{
Level
T}	T{
Description
T}
_
T{
\fB0\fP
T}	T{
The profiler is off and does not collect any data.
This is the default profiler level.
T}
_
T{
\fB1\fP
T}	T{
The profiler collects data for operations that take longer
than the value of \fBslowms\fP\&.
T}
_
T{
\fB2\fP
T}	T{
The profiler collects data for all operations.
T}
_
.TE
.sp
\fBIMPORTANT:\fP
.INDENT 7.0
.INDENT 3.5
Profiling can impact performance and shares settings with the system
log. Carefully consider any performance and security implications
before configuring and enabling the profiler on a production
deployment.
.sp
See database\-profiling\-overhead for more information on
potential performance degradation.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-slowms <integer>
\fIDefault\fP: 100
.sp
The \fIslow\fP operation time threshold, in milliseconds. Operations
that run for longer than this threshold are considered \fIslow\fP\&.
.sp
When \fBlogLevel\fP is set to \fB0\fP, MongoDB records \fIslow\fP
operations to the diagnostic log at a rate determined by
\fBslowOpSampleRate\fP\&. Starting in MongoDB
4.2, the secondaries of replica sets log all oplog entry messages
that take longer than the slow operation threshold to apply regardless of the sample rate.
.sp
At higher \fBlogLevel\fP settings, all operations appear in
the diagnostic log regardless of their latency with the following
exception: the logging of slow oplog entry messages by the
secondaries\&. The secondaries log only the slow oplog
entries; increasing the \fBlogLevel\fP does not log all
oplog entries.
.sp
For \fI\%mongod\fP instances, \fI\%\-\-slowms\fP affects the diagnostic log
and, if enabled, the profiler.
.sp
\fBSEE ALSO:\fP
.INDENT 7.0
.INDENT 3.5
/tutorial/manage\-the\-database\-profiler
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-slowOpSampleRate <double>
\fIDefault\fP: 1.0
.sp
The fraction of \fIslow\fP operations that should be profiled or logged.
\fI\%\-\-slowOpSampleRate\fP accepts values between 0 and 1, inclusive.
.sp
\fI\%\-\-slowOpSampleRate\fP does not affect the slow oplog entry logging by the secondary members of a replica set. Secondary
members log all oplog entries that take longer than the slow
operation threshold regardless of the \fI\%\-\-slowOpSampleRate\fP\&.
.sp
For \fI\%mongod\fP instances, \fI\%\-\-slowOpSampleRate\fP affects the
diagnostic log and, if enabled, the profiler.
.UNINDENT
.SS Audit Options
.INDENT 0.0
.TP
.B \-\-auditDestination
Enables auditing and specifies where
\fBmongod\fP sends all audit events.
.sp
\fI\%\-\-auditDestination\fP can have one of the following values:
.TS
center;
|l|l|.
_
T{
Value
T}	T{
Description
T}
_
T{
\fBsyslog\fP
T}	T{
Output the audit events to syslog in JSON format. Not available on
Windows. Audit messages have a syslog severity level of \fBinfo\fP
and a facility level of \fBuser\fP\&.
.sp
The syslog message limit can result in the truncation of
audit messages. The auditing system will neither detect the
truncation nor error upon its occurrence.
T}
_
T{
\fBconsole\fP
T}	T{
Output the audit events to \fBstdout\fP in JSON format.
T}
_
T{
\fBfile\fP
T}	T{
Output the audit events to the file specified in
\fI\%\-\-auditPath\fP in the format specified in
\fI\%\-\-auditFormat\fP\&.
T}
_
.TE
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
Available only in \fI\%MongoDB Enterprise\fP
and \fI\%MongoDB Atlas\fP\&.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-auditFormat
Specifies the format of the output file for auditing if \fI\%\-\-auditDestination\fP is \fBfile\fP\&. The
\fI\%\-\-auditFormat\fP option can have one of the following values:
.TS
center;
|l|l|.
_
T{
Value
T}	T{
Description
T}
_
T{
\fBJSON\fP
T}	T{
Output the audit events in JSON format to the file specified
in \fI\%\-\-auditPath\fP\&.
T}
_
T{
\fBBSON\fP
T}	T{
Output the audit events in BSON binary format to the file
specified in \fI\%\-\-auditPath\fP\&.
T}
_
.TE
.sp
Printing audit events to a file in JSON format degrades server
performance more than printing to a file in BSON format.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
Available only in \fI\%MongoDB Enterprise\fP
and \fI\%MongoDB Atlas\fP\&.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-auditPath
Specifies the output file for auditing if
\fI\%\-\-auditDestination\fP has value of \fBfile\fP\&. The \fI\%\-\-auditPath\fP
option can take either a full path name or a relative path name.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
Available only in \fI\%MongoDB Enterprise\fP
and \fI\%MongoDB Atlas\fP\&.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-auditFilter
Specifies the filter to limit the types of operations the audit system records. The option takes a string representation
of a query document of the form:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
{ <field1>: <expression1>, ... }
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
The \fB<field>\fP can be any field in the audit message, including fields returned in the
param document. The
\fB<expression>\fP is a query condition expression\&.
.sp
To specify an audit filter, enclose the filter document in single
quotes to pass the document as a string.
.sp
To specify the audit filter in a configuration file, you must use the YAML format of
the configuration file.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
Available only in \fI\%MongoDB Enterprise\fP
and \fI\%MongoDB Atlas\fP\&.
.UNINDENT
.UNINDENT
.UNINDENT
.SS SNMP Options
.sp
\fBNOTE:\fP
.INDENT 0.0
.INDENT 3.5
MongoDB Enterprise on macOS does \fInot\fP include support for SNMP due
to \fI\%SERVER\-29352\fP\&.
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-snmp\-disabled
Disables SNMP access to \fI\%mongod\fP\&. The option is incompatible
with \fI\%\-\-snmp\-subagent\fP and \fI\%\-\-snmp\-master\fP\&.
.sp
New in version 4.0.6.

.UNINDENT
.INDENT 0.0
.TP
.B \-\-snmp\-subagent
Runs SNMP as a subagent. The option is incompatible with \fI\%\-\-snmp\-disabled\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-snmp\-master
Runs SNMP as a master. The option is incompatible with \fI\%\-\-snmp\-disabled\fP\&.
.UNINDENT
.sp
\fBSEE ALSO:\fP
.INDENT 0.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
/tutorial/monitor\-with\-snmp
.IP \(bu 2
/tutorial/monitor\-with\-snmp\-on\-windows
.IP \(bu 2
/tutorial/troubleshoot\-snmp
.UNINDENT
.UNINDENT
.UNINDENT
.SS inMemory Options
.INDENT 0.0
.TP
.B \-\-inMemorySizeGB <float>
\fIDefault\fP: 50% of physical RAM less 1 GB
.sp
Changed in version 3.4: Values can range from 256MB to 10TB and can be a float.

.sp
Maximum amount of memory to allocate for in\-memory storage
engine data, including indexes, oplog if the
\fI\%mongod\fP is part of replica set, replica set or sharded
cluster metadata, etc.
.sp
By default, the in\-memory storage engine uses 50% of physical RAM minus
1 GB.
.INDENT 7.0
.INDENT 3.5
.IP "Enterprise Feature"
.sp
Available in MongoDB Enterprise only.
.UNINDENT
.UNINDENT
.UNINDENT
.SS Encryption Key Management Options
.INDENT 0.0
.TP
.B \-\-enableEncryption <boolean>
\fIDefault\fP: false
.sp
New in version 3.2.

.sp
Enables encryption for the WiredTiger storage engine. You must set
to \fBtrue\fP to pass in encryption keys and configurations.
.INDENT 7.0
.INDENT 3.5
.IP "Enterprise Feature"
.sp
Available in MongoDB Enterprise only.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-encryptionCipherMode <string>
\fIDefault\fP: AES256\-CBC
.sp
New in version 3.2.

.sp
The cipher mode to use for encryption at rest:
.TS
center;
|l|l|.
_
T{
Mode
T}	T{
Description
T}
_
T{
\fBAES256\-CBC\fP
T}	T{
256\-bit Advanced Encryption Standard in Cipher Block Chaining
Mode
T}
_
T{
\fBAES256\-GCM\fP
T}	T{
256\-bit Advanced Encryption Standard in Galois/Counter Mode
.sp
Changed in version 4.0: MongoDB Enterprise on Windows no longer supports \fBAES256\-GCM\fP\&. This
cipher is now available only on Linux.
T}
_
.TE
.INDENT 7.0
.INDENT 3.5
.IP "Enterprise Feature"
.sp
Available in MongoDB Enterprise only.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-encryptionKeyFile <string>
New in version 3.2.

.sp
The path to the local keyfile when managing keys via process \fIother
than\fP KMIP. Only set when managing keys via process other than KMIP.
If data is already encrypted using KMIP, MongoDB will throw an error.
.sp
The keyfile can contain only a single key. The key is either a 16 or
32 character string.
.sp
Requires \fBenableEncryption\fP to be \fBtrue\fP\&.
.INDENT 7.0
.INDENT 3.5
.IP "Enterprise Feature"
.sp
Available in MongoDB Enterprise only.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-kmipKeyIdentifier <string>
New in version 3.2.

.sp
Unique KMIP identifier for an existing key within the KMIP server.
Include to use the key associated with the identifier as the system
key. You can only use the setting the first time you enable
encryption for the \fI\%mongod\fP instance. Requires
\fBenableEncryption\fP to be true.
.sp
If unspecified, MongoDB will request that the KMIP server create a
new key to utilize as the system key.
.sp
If the KMIP server cannot locate a key with the specified identifier
or the data is already encrypted with a key, MongoDB will throw an
error
.INDENT 7.0
.INDENT 3.5
.IP "Enterprise Feature"
.sp
Available in MongoDB Enterprise only.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-kmipRotateMasterKey <boolean>
\fIDefault\fP: false
.sp
New in version 3.2.

.sp
If true, rotate the master key and re\-encrypt the internal
keystore.
.INDENT 7.0
.INDENT 3.5
.IP "Enterprise Feature"
.sp
Available in MongoDB Enterprise only.
.UNINDENT
.UNINDENT
.sp
\fBSEE ALSO:\fP
.INDENT 7.0
.INDENT 3.5
kmip\-master\-key\-rotation
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-kmipServerName <string>
New in version 3.2.

.sp
Hostname or IP address of the KMIP server to connect to. Requires
\fI\%\-\-enableEncryption\fP to be true.
.sp
Starting in MongoDB 4.2.1 (and 4.0.14), you can specify multiple KMIP
servers as a comma\-separated list, e.g.
\fBserver1.example.com,server2.example.com\fP\&. On startup, the
\fI\%mongod\fP will attempt to establish a connection to each
server in the order listed, and will select the first server to
which it can successfully establish a connection. KMIP server
selection occurs only at startup.
.sp
When connecting to a KMIP server, the \fI\%mongod\fP
verifies that the specified \fI\%\-\-kmipServerName\fP matches the
Subject Alternative Name \fBSAN\fP (or, if \fBSAN\fP is not present, the
Common Name \fBCN\fP) in the certificate presented by the KMIP server.
If \fBSAN\fP is present, \fI\%mongod\fP does not match against
the \fBCN\fP\&. If the hostname does not match the \fBSAN\fP (or \fBCN\fP),
the \fI\%mongod\fP will fail to connect.
.sp
Starting in MongoDB 4.2, when performing comparison of SAN, MongoDB
supports comparison of DNS names or IP addresses. In previous versions,
MongoDB only supports comparisons of DNS names.
.INDENT 7.0
.INDENT 3.5
.IP "Enterprise Feature"
.sp
Available in MongoDB Enterprise only.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-kmipPort <number>
\fIDefault\fP: 5696
.sp
New in version 3.2.

.sp
Port number to use to communicate with the KMIP server.
Requires \fI\%\-\-kmipServerName\fP\&. Requires
\fI\%\-\-enableEncryption\fP to be true.
.sp
If specifying multiple KMIP servers with \fI\%\-\-kmipServerName\fP,
the \fI\%mongod\fP will use the port specified with
\fI\%\-\-kmipPort\fP for all provided KMIP servers.
.INDENT 7.0
.INDENT 3.5
.IP "Enterprise Feature"
.sp
Available in MongoDB Enterprise only.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-kmipConnectRetries <number>
\fIDefault\fP: 0
.sp
New in version 4.4.

.sp
How many times to retry the initial connection to the KMIP server.
Use together with \fI\%\-\-kmipConnectTimeoutMS\fP to
control how long the \fI\%mongod\fP waits for a response
between each retry.
.INDENT 7.0
.INDENT 3.5
.IP "Enterprise Feature"
.sp
Available in MongoDB Enterprise only.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-kmipConnectTimeoutMS <number>
\fIDefault\fP: 5000
.sp
New in version 4.4.

.sp
Timeout in milliseconds to wait for a response from the KMIP server.
If the \fI\%\-\-kmipConnectRetries\fP setting is specified,
the \fI\%mongod\fP will wait up to the value specified with
\fI\%\-\-kmipConnectTimeoutMS\fP for each retry.
.sp
Value must be \fB1000\fP or greater.
.INDENT 7.0
.INDENT 3.5
.IP "Enterprise Feature"
.sp
Available in MongoDB Enterprise only.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-kmipClientCertificateSelector <string>
New in version 4.0: Available on Windows and macOS as an alternative to
\fI\%\-\-kmipClientCertificateFile\fP\&.
.sp
\fI\%\-\-kmipClientCertificateFile\fP and \fI\%\-\-kmipClientCertificateSelector\fP options are mutually exclusive. You can only
specify one.

.sp
Specifies a certificate property in order to select a matching
certificate from the operating system\(aqs certificate store to
authenticate MongoDB to the KMIP server.
.sp
\fI\%\-\-kmipClientCertificateSelector\fP accepts an argument of the format \fB<property>=<value>\fP
where the property can be one of the following:
.TS
center;
|l|l|l|.
_
T{
Property
T}	T{
Value type
T}	T{
Description
T}
_
T{
\fBsubject\fP
T}	T{
ASCII string
T}	T{
Subject name or common name on certificate
T}
_
T{
\fBthumbprint\fP
T}	T{
hex string
T}	T{
A sequence of bytes, expressed as hexadecimal, used to
identify a public key by its SHA\-1 digest.
.sp
The \fBthumbprint\fP is sometimes referred to as a
\fBfingerprint\fP\&.
T}
_
.TE
.INDENT 7.0
.INDENT 3.5
.IP "Enterprise Feature"
.sp
Available in MongoDB Enterprise only.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-kmipClientCertificateFile <string>
New in version 3.2.

.sp
String containing the path to the client certificate used for
authenticating MongoDB to the KMIP server. Requires that a
\fBkmipServerName\fP be provided.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
Starting in 4.0, on macOS or Windows, you can use a certificate
from the operating system\(aqs secure store instead of a PEM key
file. See \fI\%\-\-kmipClientCertificateSelector\fP\&.
.UNINDENT
.UNINDENT
.INDENT 7.0
.INDENT 3.5
.IP "Enterprise Feature"
.sp
Available in MongoDB Enterprise only.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-kmipClientCertificatePassword <string>
New in version 3.2.

.sp
The password (if one exists) for the client certificate passed into
\fBkmipClientCertificateFile\fP\&. Is used for
authenticating MongoDB to the KMIP server. Requires that a
\fBkmipClientCertificateFile\fP be provided.
.INDENT 7.0
.INDENT 3.5
.IP "Enterprise Feature"
.sp
Available in MongoDB Enterprise only.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-kmipServerCAFile <string>
New in version 3.2.

.sp
Path to CA File. Used for validating secure client connection to
KMIP server.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
Starting in 4.0, on macOS or Windows, you can use a certificate
from the operating system\(aqs secure store instead of a PEM key
file. See \fI\%\-\-kmipClientCertificateSelector\fP\&. When using the secure store, you do not
need to, but can, also specify the \fI\%\-\-kmipServerCAFile\fP\&.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-eseDatabaseKeyRollover
New in version 4.2.

.sp
Roll over the encrypted storage engine database keys configured with
\fBAES256\-GCM\fP cipher.
.sp
When \fI\%mongod\fP instance is started with this option, the
instance rotates the keys and exits.
.INDENT 7.0
.INDENT 3.5
.IP "Enterprise Feature"
.sp
Available in MongoDB Enterprise only.
.UNINDENT
.UNINDENT
.UNINDENT
.SH AUTHOR
MongoDB Documentation Project
.SH COPYRIGHT
2008-2020
.\" Generated by docutils manpage writer.
.

# mongod.conf

# for documentation of all options, see:
#   http://docs.mongodb.org/manual/reference/configuration-options/

# Where and how to store data.
storage:
  dbPath: /var/lib/mongodb
  journal:
    enabled: true
#  engine:
#  wiredTiger:

# where to write logging data.
systemLog:
  destination: file
  logAppend: true
  path: /var/log/mongodb/mongod.log

# network interfaces
net:
  port: 27017
  bindIp: 127.0.0.1


# how the process runs
processManagement:
  timeZoneInfo: /usr/share/zoneinfo

#security:

#operationProfiling:

#replication:

#sharding:

## Enterprise-Only Options:

#auditLog:

#snmp:

[Unit]
Description=MongoDB Database Server
Documentation=https://docs.mongodb.org/manual
After=network-online.target
Wants=network-online.target

[Service]
User=mongodb
Group=mongodb
EnvironmentFile=-/etc/default/mongod
ExecStart=/usr/bin/mongod --config /etc/mongod.conf
PIDFile=/var/run/mongodb/mongod.pid
# file size
LimitFSIZE=infinity
# cpu time
LimitCPU=infinity
# virtual memory size
LimitAS=infinity
# open files
LimitNOFILE=64000
# processes/threads
LimitNPROC=64000
# locked memory
LimitMEMLOCK=infinity
# total threads (user+kernel)
TasksMax=infinity
TasksAccounting=false

# Recommended limits for mongod as specified in
# https://docs.mongodb.com/manual/reference/ulimit/#recommended-ulimit-settings

[Install]
WantedBy=multi-user.target

# Ubuntu upstart file at /etc/init/mongod.conf

# Recommended ulimit values for mongod or mongos
# See https://docs.mongodb.com/manual/reference/ulimit/#recommended-ulimit-settings
#
limit fsize unlimited unlimited
limit cpu unlimited unlimited
limit as unlimited unlimited
limit nofile 64000 64000
limit rss unlimited unlimited
limit nproc 64000 64000
limit memlock unlimited unlimited

kill timeout 300 # wait 300s between SIGTERM and SIGKILL.

pre-start script
  DAEMONUSER=${DAEMONUSER:-mongodb}
  if [ ! -d /var/lib/mongodb ]; then
    mkdir -p /var/lib/mongodb && chown mongodb:mongodb /var/lib/mongodb
  fi
  if [ ! -d /var/log/mongodb ]; then
    mkdir -p /var/log/mongodb && chown mongodb:mongodb /var/log/mongodb
  fi
  touch /var/run/mongodb.pid
  chown $DAEMONUSER /var/run/mongodb.pid
end script

start on runlevel [2345]
stop on runlevel [06]

script
  ENABLE_MONGOD="yes"
  CONF=/etc/mongod.conf
  DAEMON=/usr/bin/mongod
  DAEMONUSER=${DAEMONUSER:-mongodb}
  DAEMONGROUP=${DAEMONGROUP:-mongodb}

  if [ -f /etc/default/mongod ]; then . /etc/default/mongod; fi

  # Handle NUMA access to CPUs (SERVER-3574)
  # This verifies the existence of numactl as well as testing that the command works
  NUMACTL_ARGS="--interleave=all"
  if which numactl >/dev/null 2>/dev/null && numactl $NUMACTL_ARGS ls / >/dev/null 2>/dev/null
  then
    NUMACTL="$(which numactl) -- $NUMACTL_ARGS"
    DAEMON_OPTS=${DAEMON_OPTS:-"--config $CONF"}
  else
    NUMACTL=""
    DAEMON_OPTS="-- "${DAEMON_OPTS:-"--config $CONF"}
  fi

  if [ "x$ENABLE_MONGOD" = "xyes" ]
  then
    exec start-stop-daemon --start \
        --chuid $DAEMONUSER:$DAEMONGROUP \
        --pidfile /var/run/mongodb.pid \
        --make-pidfile \
        --exec $NUMACTL $DAEMON $DAEMON_OPTS
  fi
end script

Source: mongodb-enterprise
Section: database
Priority: optional
Maintainer: MongoDB Packaging <packaging@mongodb.com>
Build-Depends:
Standards-Version: 3.8.0
Homepage: http://www.mongodb.org

Package: mongodb-enterprise-database
Conflicts: mongo-10gen, mongo-10gen-enterprise, mongo-10gen-enterprise-server, mongo-10gen-server, mongo-10gen-unstable, mongo-10gen-unstable-enterprise, mongo-10gen-unstable-enterprise-mongos, mongo-10gen-unstable-enterprise-server, mongo-10gen-unstable-enterprise-shell, mongo-10gen-unstable-enterprise-tools, mongo-10gen-unstable-mongos, mongo-10gen-unstable-server, mongo-10gen-unstable-shell, mongo-10gen-unstable-tools, mongo18-10gen, mongo18-10gen-server, mongo20-10gen, mongo20-10gen-server, mongodb, mongodb-server, mongodb-dev, mongodb-clients, mongodb-10gen, mongodb-10gen-enterprise, mongodb-10gen-unstable, mongodb-10gen-unstable-enterprise, mongodb-10gen-unstable-enterprise-mongos, mongodb-10gen-unstable-enterprise-server, mongodb-10gen-unstable-enterprise-shell, mongodb-10gen-unstable-enterprise-tools, mongodb-10gen-unstable-mongos, mongodb-10gen-unstable-server, mongodb-10gen-unstable-shell, mongodb-10gen-unstable-tools, mongodb-enterprise-unstable, mongodb-enterprise-unstable-mongos, mongodb-enterprise-unstable-server, mongodb-enterprise-unstable-shell, mongodb-enterprise-unstable-tools, mongodb-org-unstable, mongodb-org-unstable-mongos, mongodb-org-unstable-shell, mongodb-org-unstable-tools, mongodb-org-unstable-server, mongodb-nightly, mongodb-org, mongodb-org-mongos, mongodb-org-server, mongodb-org-shell, mongodb-org-tools, mongodb-stable, mongodb18-10gen, mongodb20-10gen
Architecture: any
Depends: mongodb-enterprise-shell, mongodb-enterprise-server, mongodb-enterprise-mongos, mongodb-enterprise-database-tools-extra, mongodb-enterprise-cryptd
Description: MongoDB open source document-oriented database system (enterprise metapackage)
 MongoDB is built for scalability, performance and high availability, scaling from single server deployments to large, complex multi-site architectures. By leveraging in-memory computing, MongoDB provides high performance for both reads and writes. MongoDBs native replication and automated failover enable enterprise-grade reliability and operational flexibility.
 .
 MongoDB is an open-source database used by companies of all sizes, across all industries and for a wide variety of applications. It is an agile database that allows schemas to change quickly as applications evolve, while still providing the functionality developers expect from traditional databases, such as secondary indexes, a full query language and strict consistency.
 .
 MongoDB has a rich client ecosystem including hadoop integration, officially supported drivers for 10 programming languages and environments, as well as 40 drivers supported by the user community.
 .
 MongoDB features:
 * JSON Data Model with Dynamic Schemas
 * Auto-Sharding for Horizontal Scalability
 * Built-In Replication for High Availability
 * Rich Secondary Indexes, including geospatial
 * TTL indexes
 * Text Search
 * Aggregation Framework & Native MapReduce
 .
 This metapackage will install the mongo shell, import/export tools, other client utilities, server software, default configuration, and init.d scripts.

Package: mongodb-enterprise
Conflicts: mongo-10gen, mongo-10gen-enterprise, mongo-10gen-enterprise-server, mongo-10gen-server, mongo-10gen-unstable, mongo-10gen-unstable-enterprise, mongo-10gen-unstable-enterprise-mongos, mongo-10gen-unstable-enterprise-server, mongo-10gen-unstable-enterprise-shell, mongo-10gen-unstable-enterprise-tools, mongo-10gen-unstable-mongos, mongo-10gen-unstable-server, mongo-10gen-unstable-shell, mongo-10gen-unstable-tools, mongo18-10gen, mongo18-10gen-server, mongo20-10gen, mongo20-10gen-server, mongodb, mongodb-server, mongodb-dev, mongodb-clients, mongodb-10gen, mongodb-10gen-enterprise, mongodb-10gen-unstable, mongodb-10gen-unstable-enterprise, mongodb-10gen-unstable-enterprise-mongos, mongodb-10gen-unstable-enterprise-server, mongodb-10gen-unstable-enterprise-shell, mongodb-10gen-unstable-enterprise-tools, mongodb-10gen-unstable-mongos, mongodb-10gen-unstable-server, mongodb-10gen-unstable-shell, mongodb-10gen-unstable-tools, mongodb-enterprise-unstable, mongodb-enterprise-unstable-mongos, mongodb-enterprise-unstable-server, mongodb-enterprise-unstable-shell, mongodb-enterprise-unstable-tools, mongodb-org-unstable, mongodb-org-unstable-mongos, mongodb-org-unstable-shell, mongodb-org-unstable-tools, mongodb-org-unstable-server, mongodb-nightly, mongodb-org, mongodb-org-mongos, mongodb-org-server, mongodb-org-shell, mongodb-org-tools, mongodb-stable, mongodb18-10gen, mongodb20-10gen
Architecture: any
Depends: mongodb-enterprise-database, mongodb-enterprise-tools, mongodb-mongosh
Description: MongoDB open source document-oriented database system (enterprise metapackage)
 MongoDB is built for scalability, performance and high availability, scaling from single server deployments to large, complex multi-site architectures. By leveraging in-memory computing, MongoDB provides high performance for both reads and writes. MongoDBs native replication and automated failover enable enterprise-grade reliability and operational flexibility.
 .
 MongoDB is an open-source database used by companies of all sizes, across all industries and for a wide variety of applications. It is an agile database that allows schemas to change quickly as applications evolve, while still providing the functionality developers expect from traditional databases, such as secondary indexes, a full query language and strict consistency.
 .
 MongoDB has a rich client ecosystem including hadoop integration, officially supported drivers for 10 programming languages and environments, as well as 40 drivers supported by the user community.
 .
 MongoDB features:
 * JSON Data Model with Dynamic Schemas
 * Auto-Sharding for Horizontal Scalability
 * Built-In Replication for High Availability
 * Rich Secondary Indexes, including geospatial
 * TTL indexes
 * Text Search
 * Aggregation Framework & Native MapReduce
 .
 This metapackage will install the mongo shell, import/export tools, other client utilities, server software, default configuration, and init.d scripts.

Package: mongodb-enterprise-shell
Conflicts: mongo-10gen, mongo-10gen-enterprise, mongo-10gen-enterprise-server, mongo-10gen-server, mongo-10gen-unstable, mongo-10gen-unstable-enterprise, mongo-10gen-unstable-enterprise-mongos, mongo-10gen-unstable-enterprise-server, mongo-10gen-unstable-enterprise-shell, mongo-10gen-unstable-enterprise-tools, mongo-10gen-unstable-mongos, mongo-10gen-unstable-server, mongo-10gen-unstable-shell, mongo-10gen-unstable-tools, mongo18-10gen, mongo18-10gen-server, mongo20-10gen, mongo20-10gen-server, mongodb, mongodb-server, mongodb-dev, mongodb-clients, mongodb-10gen, mongodb-10gen-enterprise, mongodb-10gen-unstable, mongodb-10gen-unstable-enterprise, mongodb-10gen-unstable-enterprise-mongos, mongodb-10gen-unstable-enterprise-server, mongodb-10gen-unstable-enterprise-shell, mongodb-10gen-unstable-enterprise-tools, mongodb-10gen-unstable-mongos, mongodb-10gen-unstable-server, mongodb-10gen-unstable-shell, mongodb-10gen-unstable-tools, mongodb-enterprise-unstable, mongodb-enterprise-unstable-mongos, mongodb-enterprise-unstable-server, mongodb-enterprise-unstable-shell, mongodb-enterprise-unstable-tools, mongodb-org-unstable, mongodb-org-unstable-mongos, mongodb-org-unstable-shell, mongodb-org-unstable-tools, mongodb-org-unstable-server, mongodb-nightly, mongodb-org, mongodb-org-mongos, mongodb-org-server, mongodb-org-shell, mongodb-org-tools, mongodb-stable, mongodb18-10gen, mongodb20-10gen
Architecture: any
Depends: ${shlibs:Depends}, libsasl2-modules-gssapi-mit
Description: MongoDB shell client (enterprise)
 MongoDB is built for scalability, performance and high availability, scaling from single server deployments to large, complex multi-site architectures. By leveraging in-memory computing, MongoDB provides high performance for both reads and writes. MongoDBs native replication and automated failover enable enterprise-grade reliability and operational flexibility.
 .
 MongoDB is an open-source database used by companies of all sizes, across all industries and for a wide variety of applications. It is an agile database that allows schemas to change quickly as applications evolve, while still providing the functionality developers expect from traditional databases, such as secondary indexes, a full query language and strict consistency.
 .
 MongoDB has a rich client ecosystem including hadoop integration, officially supported drivers for 10 programming languages and environments, as well as 40 drivers supported by the user community.
 .
 MongoDB features:
 * JSON Data Model with Dynamic Schemas
 * Auto-Sharding for Horizontal Scalability
 * Built-In Replication for High Availability
 * Rich Secondary Indexes, including geospatial
 * TTL indexes
 * Text Search
 * Aggregation Framework & Native MapReduce
 .
 This package contains the mongo shell.

Package: mongodb-enterprise-server
Conflicts: mongo-10gen, mongo-10gen-enterprise, mongo-10gen-enterprise-server, mongo-10gen-server, mongo-10gen-unstable, mongo-10gen-unstable-enterprise, mongo-10gen-unstable-enterprise-mongos, mongo-10gen-unstable-enterprise-server, mongo-10gen-unstable-enterprise-shell, mongo-10gen-unstable-enterprise-tools, mongo-10gen-unstable-mongos, mongo-10gen-unstable-server, mongo-10gen-unstable-shell, mongo-10gen-unstable-tools, mongo18-10gen, mongo18-10gen-server, mongo20-10gen, mongo20-10gen-server, mongodb, mongodb-server, mongodb-dev, mongodb-clients, mongodb-10gen, mongodb-10gen-enterprise, mongodb-10gen-unstable, mongodb-10gen-unstable-enterprise, mongodb-10gen-unstable-enterprise-mongos, mongodb-10gen-unstable-enterprise-server, mongodb-10gen-unstable-enterprise-shell, mongodb-10gen-unstable-enterprise-tools, mongodb-10gen-unstable-mongos, mongodb-10gen-unstable-server, mongodb-10gen-unstable-shell, mongodb-10gen-unstable-tools, mongodb-enterprise-unstable, mongodb-enterprise-unstable-mongos, mongodb-enterprise-unstable-server, mongodb-enterprise-unstable-shell, mongodb-enterprise-unstable-tools, mongodb-org-unstable, mongodb-org-unstable-mongos, mongodb-org-unstable-shell, mongodb-org-unstable-tools, mongodb-org-unstable-server, mongodb-nightly, mongodb-org, mongodb-org-mongos, mongodb-org-server, mongodb-org-shell, mongodb-org-tools, mongodb-stable, mongodb18-10gen, mongodb20-10gen
Architecture: any
Depends: ${shlibs:Depends}, snmp, adduser, tzdata, libsasl2-modules-gssapi-mit
Description: MongoDB database server (enterprise)
 MongoDB is built for scalability, performance and high availability, scaling from single server deployments to large, complex multi-site architectures. By leveraging in-memory computing, MongoDB provides high performance for both reads and writes. MongoDBs native replication and automated failover enable enterprise-grade reliability and operational flexibility.
 .
 MongoDB is an open-source database used by companies of all sizes, across all industries and for a wide variety of applications. It is an agile database that allows schemas to change quickly as applications evolve, while still providing the functionality developers expect from traditional databases, such as secondary indexes, a full query language and strict consistency.
 .
 MongoDB has a rich client ecosystem including hadoop integration, officially supported drivers for 10 programming languages and environments, as well as 40 drivers supported by the user community.
 .
 MongoDB features:
 * JSON Data Model with Dynamic Schemas
 * Auto-Sharding for Horizontal Scalability
 * Built-In Replication for High Availability
 * Rich Secondary Indexes, including geospatial
 * TTL indexes
 * Text Search
 * Aggregation Framework & Native MapReduce
 .
 This package contains the MongoDB server software, default configuration files, and init.d scripts.

Package: mongodb-enterprise-mongos
Conflicts: mongo-10gen, mongo-10gen-enterprise, mongo-10gen-enterprise-server, mongo-10gen-server, mongo-10gen-unstable, mongo-10gen-unstable-enterprise, mongo-10gen-unstable-enterprise-mongos, mongo-10gen-unstable-enterprise-server, mongo-10gen-unstable-enterprise-shell, mongo-10gen-unstable-enterprise-tools, mongo-10gen-unstable-mongos, mongo-10gen-unstable-server, mongo-10gen-unstable-shell, mongo-10gen-unstable-tools, mongo18-10gen, mongo18-10gen-server, mongo20-10gen, mongo20-10gen-server, mongodb, mongodb-server, mongodb-dev, mongodb-clients, mongodb-10gen, mongodb-10gen-enterprise, mongodb-10gen-unstable, mongodb-10gen-unstable-enterprise, mongodb-10gen-unstable-enterprise-mongos, mongodb-10gen-unstable-enterprise-server, mongodb-10gen-unstable-enterprise-shell, mongodb-10gen-unstable-enterprise-tools, mongodb-10gen-unstable-mongos, mongodb-10gen-unstable-server, mongodb-10gen-unstable-shell, mongodb-10gen-unstable-tools, mongodb-enterprise-unstable, mongodb-enterprise-unstable-mongos, mongodb-enterprise-unstable-server, mongodb-enterprise-unstable-shell, mongodb-enterprise-unstable-tools, mongodb-org-unstable, mongodb-org-unstable-mongos, mongodb-org-unstable-shell, mongodb-org-unstable-tools, mongodb-org-unstable-server, mongodb-nightly, mongodb-org, mongodb-org-mongos, mongodb-org-server, mongodb-org-shell, mongodb-org-tools, mongodb-stable, mongodb18-10gen, mongodb20-10gen
Architecture: any
Depends: ${shlibs:Depends}, snmp, tzdata
Description: MongoDB sharded cluster query router (enterprise)
 MongoDB is built for scalability, performance and high availability, scaling from single server deployments to large, complex multi-site architectures. By leveraging in-memory computing, MongoDB provides high performance for both reads and writes. MongoDBs native replication and automated failover enable enterprise-grade reliability and operational flexibility.
 .
 MongoDB is an open-source database used by companies of all sizes, across all industries and for a wide variety of applications. It is an agile database that allows schemas to change quickly as applications evolve, while still providing the functionality developers expect from traditional databases, such as secondary indexes, a full query language and strict consistency.
 .
 MongoDB has a rich client ecosystem including hadoop integration, officially supported drivers for 10 programming languages and environments, as well as 40 drivers supported by the user community.
 .
 MongoDB features:
 * JSON Data Model with Dynamic Schemas
 * Auto-Sharding for Horizontal Scalability
 * Built-In Replication for High Availability
 * Rich Secondary Indexes, including geospatial
 * TTL indexes
 * Text Search
 * Aggregation Framework & Native MapReduce
 .
 This package contains mongos, the MongoDB sharded cluster query router.

Package: mongodb-enterprise-tools
Conflicts: mongo-10gen, mongo-10gen-enterprise, mongo-10gen-enterprise-server, mongo-10gen-server, mongo-10gen-unstable, mongo-10gen-unstable-enterprise, mongo-10gen-unstable-enterprise-mongos, mongo-10gen-unstable-enterprise-server, mongo-10gen-unstable-enterprise-shell, mongo-10gen-unstable-enterprise-tools, mongo-10gen-unstable-mongos, mongo-10gen-unstable-server, mongo-10gen-unstable-shell, mongo-10gen-unstable-tools, mongo18-10gen, mongo18-10gen-server, mongo20-10gen, mongo20-10gen-server, mongodb, mongodb-server, mongodb-dev, mongodb-clients, mongodb-10gen, mongodb-10gen-enterprise, mongodb-10gen-unstable, mongodb-10gen-unstable-enterprise, mongodb-10gen-unstable-enterprise-mongos, mongodb-10gen-unstable-enterprise-server, mongodb-10gen-unstable-enterprise-shell, mongodb-10gen-unstable-enterprise-tools, mongodb-10gen-unstable-mongos, mongodb-10gen-unstable-server, mongodb-10gen-unstable-shell, mongodb-10gen-unstable-tools, mongodb-enterprise-unstable, mongodb-enterprise-unstable-mongos, mongodb-enterprise-unstable-server, mongodb-enterprise-unstable-shell, mongodb-enterprise-unstable-tools, mongodb-org-unstable, mongodb-org-unstable-mongos, mongodb-org-unstable-shell, mongodb-org-unstable-tools, mongodb-org-unstable-server, mongodb-nightly, mongodb-org, mongodb-org-mongos, mongodb-org-server, mongodb-org-shell, mongodb-org-tools, mongodb-stable, mongodb18-10gen, mongodb20-10gen
Architecture: any
Depends: mongodb-database-tools, mongodb-enterprise-database-tools-extra
Description: MongoDB tools (enterprise)
 MongoDB is built for scalability, performance and high availability, scaling from single server deployments to large, complex multi-site architectures. By leveraging in-memory computing, MongoDB provides high performance for both reads and writes. MongoDBs native replication and automated failover enable enterprise-grade reliability and operational flexibility.
 .
 MongoDB is an open-source database used by companies of all sizes, across all industries and for a wide variety of applications. It is an agile database that allows schemas to change quickly as applications evolve, while still providing the functionality developers expect from traditional databases, such as secondary indexes, a full query language and strict consistency.
 .
 MongoDB has a rich client ecosystem including hadoop integration, officially supported drivers for 10 programming languages and environments, as well as 40 drivers supported by the user community.
 .
 MongoDB features:
 * JSON Data Model with Dynamic Schemas
 * Auto-Sharding for Horizontal Scalability
 * Built-In Replication for High Availability
 * Rich Secondary Indexes, including geospatial
 * TTL indexes
 * Text Search
 * Aggregation Framework & Native MapReduce
 .
 This metapackage exists to simplfy acquisition of both the database tools and the extra database tools.

Package: mongodb-enterprise-database-tools-extra
Conflicts: mongo-10gen, mongo-10gen-enterprise, mongo-10gen-enterprise-server, mongo-10gen-server, mongo-10gen-unstable, mongo-10gen-unstable-enterprise, mongo-10gen-unstable-enterprise-mongos, mongo-10gen-unstable-enterprise-server, mongo-10gen-unstable-enterprise-shell, mongo-10gen-unstable-enterprise-tools, mongo-10gen-unstable-mongos, mongo-10gen-unstable-server, mongo-10gen-unstable-shell, mongo-10gen-unstable-tools, mongo18-10gen, mongo18-10gen-server, mongo20-10gen, mongo20-10gen-server, mongodb, mongodb-server, mongodb-dev, mongodb-clients, mongodb-10gen, mongodb-10gen-enterprise, mongodb-10gen-unstable, mongodb-10gen-unstable-enterprise, mongodb-10gen-unstable-enterprise-mongos, mongodb-10gen-unstable-enterprise-server, mongodb-10gen-unstable-enterprise-shell, mongodb-10gen-unstable-enterprise-tools, mongodb-10gen-unstable-mongos, mongodb-10gen-unstable-server, mongodb-10gen-unstable-shell, mongodb-10gen-unstable-tools, mongodb-enterprise-unstable, mongodb-enterprise-unstable-mongos, mongodb-enterprise-unstable-server, mongodb-enterprise-unstable-shell, mongodb-enterprise-unstable-tools, mongodb-org-unstable, mongodb-org-unstable-mongos, mongodb-org-unstable-shell, mongodb-org-unstable-tools, mongodb-org-unstable-server, mongodb-nightly, mongodb-org, mongodb-org-mongos, mongodb-org-server, mongodb-org-shell, mongodb-org-tools, mongodb-stable, mongodb18-10gen, mongodb20-10gen, mongodb-org-database-tools-extra, mongodb-org-unstable-database-tools-extra, mongodb-enterprise-unstable-database-tools-extra
Architecture: any
Depends: ${shlibs:Depends}, libsasl2-modules-gssapi-mit
Breaks: mongodb-enterprise-tools (<= 4.2)
Replaces: mongodb-enterprise-tools (<= 4.2)
Description: Extra MongoDB database tools (enterprise)
 MongoDB is built for scalability, performance and high availability, scaling from single server deployments to large, complex multi-site architectures. By leveraging in-memory computing, MongoDB provides high performance for both reads and writes. MongoDBs native replication and automated failover enable enterprise-grade reliability and operational flexibility.
 .
 MongoDB is an open-source database used by companies of all sizes, across all industries and for a wide variety of applications. It is an agile database that allows schemas to change quickly as applications evolve, while still providing the functionality developers expect from traditional databases, such as secondary indexes, a full query language and strict consistency.
 .
 MongoDB has a rich client ecosystem including hadoop integration, officially supported drivers for 10 programming languages and environments, as well as 40 drivers supported by the user community.
 .
 MongoDB features:
 * JSON Data Model with Dynamic Schemas
 * Auto-Sharding for Horizontal Scalability
 * Built-In Replication for High Availability
 * Rich Secondary Indexes, including geospatial
 * TTL indexes
 * Text Search
 * Aggregation Framework & Native MapReduce
 .
 This package contains extra database tools, like the Compass installer, mongodecrypt, mongoldap, and mongokerberos.

Package: mongodb-enterprise-cryptd
Conflicts: mongo-enterprise-unstable-cryptd
Architecture: any
Depends: ${shlibs:Depends}, libsasl2-modules-gssapi-mit
Description: MongoDB Client Side Field Level Encryption Support Daemon (enterprise)
 MongoDB is built for scalability, performance and high availability, scaling from single server deployments to large, complex multi-site architectures. By leveraging in-memory computing, MongoDB provides high performance for both reads and writes. MongoDBs native replication and automated failover enable enterprise-grade reliability and operational flexibility.
 .
 MongoDB is an open-source database used by companies of all sizes, across all industries and for a wide variety of applications. It is an agile database that allows schemas to change quickly as applications evolve, while still providing the functionality developers expect from traditional databases, such as secondary indexes, a full query language and strict consistency.
 .
 MongoDB has a rich client ecosystem including hadoop integration, officially supported drivers for 10 programming languages and environments, as well as 40 drivers supported by the user community.
 .
 MongoDB features:
 * JSON Data Model with Dynamic Schemas
 * Auto-Sharding for Horizontal Scalability
 * Built-In Replication for High Availability
 * Rich Secondary Indexes, including geospatial
 * TTL indexes
 * Text Search
 * Aggregation Framework & Native MapReduce
 .
 This package contains standard utilities for interacting with MongoDB.

#!/usr/bin/make -f
# -*- makefile -*-
TOOLS=mongodecrypt mongoldap mongokerberos

# Uncomment this to turn on verbose mode.
export DH_VERBOSE=1


configure: configure-stamp
configure-stamp:
	dh_testdir

	touch configure-stamp


build: build-stamp

build-stamp: configure-stamp
	dh_testdir

	# THE FOLLOWING LINE IS INTENTIONALLY COMMENTED.
	# scons
	#docbook-to-man debian/mongodb.sgml > mongodb.1
	echo -n > debian/mongodb-enterprise-database-tools-extra.manpages
	for binary in ${TOOLS} ; \
	do \
		if [ -e debian/$$binary.1 ] ; \
		then \
			echo debian/$$binary.1 >> debian/mongodb-enterprise-database-tools-extra.manpages ; \
		fi ; \
	done

	echo debian/mongo.1 > debian/mongodb-enterprise-shell.manpages
	echo debian/mongod.1 > debian/mongodb-enterprise-server.manpages
	echo debian/mongos.1 > debian/mongodb-enterprise-mongos.manpages

	touch $@

clean:
	dh_testdir
	dh_testroot
	rm -f build-stamp configure-stamp

	# FIXME: scons freaks out at the presence of target files
	# under debian/mongodb.
	#scons -c

	rm -f debian/*.manpages

	rm -rf $(CURDIR)/debian/mongodb-enterprise
	rm -rf $(CURDIR)/debian/mongodb-enterprise-shell
	rm -rf $(CURDIR)/debian/mongodb-enterprise-server
	rm -rf $(CURDIR)/debian/mongodb-enterprise-mongos
	rm -rf $(CURDIR)/debian/mongodb-enterprise-database-tools-extra
	rm -rf $(CURDIR)/debian/mongodb-enterprise-cryptd
	rm -f config.log
	rm -f mongo
	rm -f mongod
	rm -f mongocryptd
	rm -f install_compass
	rm -f .sconsign.dblite
	rm -f libmongoclient.a
	rm -rf client/*.o
	rm -rf tools/*.o
	rm -rf shell/*.o
	rm -rf .sconf_temp
	rm -f buildscripts/*.pyc
	rm -f *.pyc
	rm -f buildinfo.cpp
	dh_clean debian/files

install: build
	dh_testdir
	dh_testroot
	dh_prep
	dh_installdirs

	# THE FOLLOWING LINE IS INTENTIONALLY COMMENTED.
	# scons --prefix=$(CURDIR)/debian/mongodb/usr install
	mkdir -p $(CURDIR)/debian/mongodb-enterprise-shell/usr/bin
	mkdir -p $(CURDIR)/debian/mongodb-enterprise-server/usr/bin
	mkdir -p $(CURDIR)/debian/mongodb-enterprise-mongos/usr/bin
	mkdir -p $(CURDIR)/debian/mongodb-enterprise-database-tools-extra/usr/bin
	mkdir -p $(CURDIR)/debian/mongodb-enterprise-cryptd/usr/bin
	cp -v $(CURDIR)/bin/mongo $(CURDIR)/debian/mongodb-enterprise-shell/usr/bin
	cp -v $(CURDIR)/bin/mongod $(CURDIR)/debian/mongodb-enterprise-server/usr/bin
	cp -v $(CURDIR)/bin/mongos $(CURDIR)/debian/mongodb-enterprise-mongos/usr/bin
	cp -v $(CURDIR)/bin/install_compass $(CURDIR)/debian/mongodb-enterprise-database-tools-extra/usr/bin
	cp -v $(CURDIR)/bin/mongocryptd $(CURDIR)/debian/mongodb-enterprise-cryptd/usr/bin

	for binary in ${TOOLS} ; \
	do \
	  cp -v $(CURDIR)/bin/$$binary $(CURDIR)/debian/mongodb-enterprise-database-tools-extra/usr/bin ; \
	done

	mkdir -p $(CURDIR)/debian/mongodb-enterprise-server/etc
	cp $(CURDIR)/debian/mongod.conf $(CURDIR)/debian/mongodb-enterprise-server/etc/mongod.conf

	mkdir -p $(CURDIR)/debian/mongodb-enterprise-shell/usr/share/lintian/overrides/
	mkdir -p $(CURDIR)/debian/mongodb-enterprise-server/usr/share/lintian/overrides/
	mkdir -p $(CURDIR)/debian/mongodb-enterprise-mongos/usr/share/lintian/overrides/
	mkdir -p $(CURDIR)/debian/mongodb-enterprise-database-tools-extra/usr/share/lintian/overrides/
	mkdir -p $(CURDIR)/debian/mongodb-enterprise-cryptd/usr/share/lintian/overrides/
	install -m 644 $(CURDIR)/debian/lintian-overrides 		$(CURDIR)/debian/mongodb-enterprise-shell/usr/share/lintian/overrides/mongodb-enterprise-shell
	install -m 644 $(CURDIR)/debian/lintian-overrides 		$(CURDIR)/debian/mongodb-enterprise-server/usr/share/lintian/overrides/mongodb-enterprise-server
	install -m 644 $(CURDIR)/debian/lintian-overrides 		$(CURDIR)/debian/mongodb-enterprise-mongos/usr/share/lintian/overrides/mongodb-enterprise-mongos
	install -m 644 $(CURDIR)/debian/lintian-overrides 		$(CURDIR)/debian/mongodb-enterprise-database-tools-extra/usr/share/lintian/overrides/mongodb-enterprise-database-tools-extra
	install -m 644 $(CURDIR)/debian/lintian-overrides 		$(CURDIR)/debian/mongodb-enterprise-cryptd/usr/share/lintian/overrides/mongodb-enterprise-cryptd
	install -m 644 $(CURDIR)/debian/substvars				$(CURDIR)/debian/mongodb-enterprise-database.substvars
	install -m 644 $(CURDIR)/debian/substvars				$(CURDIR)/debian/mongodb-enterprise-shell.substvars
	install -m 644 $(CURDIR)/debian/substvars				$(CURDIR)/debian/mongodb-enterprise-server.substvars
	install -m 644 $(CURDIR)/debian/substvars				$(CURDIR)/debian/mongodb-enterprise-mongos.substvars
	install -m 644 $(CURDIR)/debian/substvars				$(CURDIR)/debian/mongodb-enterprise-database-tools-extra.substvars
	install -m 644 $(CURDIR)/debian/substvars				$(CURDIR)/debian/mongodb-enterprise-cryptd.substvars

# Build architecture-independent files here.
binary-indep: build install
# We have nothing to do by default.

# Build architecture-dependent files here.
binary-arch: build install
	dh_testdir
	dh_testroot
	dh_installchangelogs
	dh_installdocs
	dh_installexamples
#	dh_install
#	dh_installmenu
#	dh_installdebconf
#	dh_installlogrotate
#	dh_installemacsen
#	dh_installpam
#	dh_installmime
	dh_installinit -pmongodb-enterprise-server --name=mongod
#	dh_installinfo
	dh_installman
	dh_link
# Appears to be broken on Ubuntu 11.10...?
#	dh_strip
	dh_compress
	dh_fixperms
	dh_installdeb
	dh_shlibdeps
	dh_gencontrol
	dh_md5sums
	dh_builddeb

binary: binary-indep binary-arch
.PHONY: build clean binary-indep binary-arch binary install configure

snmp/mongod.conf.master
snmp/mongod.conf.subagent
snmp/README-snmp.txt
snmp/MONGOD-MIB.txt
snmp/MONGODBINC-MIB.txt
LICENSE-Enterprise.txt
README
THIRD-PARTY-NOTICES
MPL-2

#!/bin/sh
# postinst script for mongodb
#
# see: dh_installdeb(1)

set -e

# summary of how this script can be called:
#        * <postinst> `configure' <most-recently-configured-version>
#        * <old-postinst> `abort-upgrade' <new version>
#        * <conflictor's-postinst> `abort-remove' `in-favour' <package>
#          <new-version>
#        * <postinst> `abort-remove'
#        * <deconfigured's-postinst> `abort-deconfigure' `in-favour'
#          <failed-install-package> <version> `removing'
#          <conflicting-package> <version>
# for details, see http://www.debian.org/doc/debian-policy/ or
# the debian-policy package


case "$1" in
    configure)
        # create a mongodb group and user
        if ! getent passwd mongodb >/dev/null 2>&1; then
            adduser --system --no-create-home mongodb
            addgroup --system mongodb
            adduser mongodb mongodb
        fi

        # create db -- note: this should agree with dbpath in mongod.conf
        if [ ! -d /var/lib/mongodb ]; then
            mkdir -p /var/lib/mongodb
            chown mongodb:mongodb /var/lib/mongodb
        fi

        # create logdir -- note: this should agree with logpath in mongod.conf
        if [ ! -d /var/log/mongodb ]; then
            mkdir -p /var/log/mongodb
            chown mongodb:mongodb /var/log/mongodb
        fi

        # Check for changes to the service file, but ignore errors when
        # systemd is not running.
        if $(command systemctl --help >/dev/null); then
            systemctl daemon-reload || true
        fi
    ;;

    abort-upgrade|abort-remove|abort-deconfigure)
    ;;

    *)
        echo "postinst called with unknown argument \`$1'" >&2
        exit 1
    ;;
esac

# dh_installdeb will replace this with shell code automatically
# generated by other debhelper scripts.

#DEBHELPER#

exit 0



Source: mongodb-enterprise-unstable
Section: database
Priority: optional
Maintainer: MongoDB Packaging <packaging@mongodb.com>
Build-Depends:
Standards-Version: 3.8.0
Homepage: http://www.mongodb.org

Package: mongodb-enterprise-unstable-database
Conflicts: mongo-10gen, mongo-10gen-enterprise, mongo-10gen-enterprise-server, mongo-10gen-server, mongo-10gen-unstable, mongo-10gen-unstable-enterprise, mongo-10gen-unstable-enterprise-mongos, mongo-10gen-unstable-enterprise-server, mongo-10gen-unstable-enterprise-shell, mongo-10gen-unstable-enterprise-tools, mongo-10gen-unstable-mongos, mongo-10gen-unstable-server, mongo-10gen-unstable-shell, mongo-10gen-unstable-tools, mongo18-10gen, mongo18-10gen-server, mongo20-10gen, mongo20-10gen-server, mongodb, mongodb-server, mongodb-dev, mongodb-clients, mongodb-10gen, mongodb-10gen-enterprise, mongodb-10gen-unstable, mongodb-10gen-unstable-enterprise, mongodb-10gen-unstable-enterprise-mongos, mongodb-10gen-unstable-enterprise-server, mongodb-10gen-unstable-enterprise-shell, mongodb-10gen-unstable-enterprise-tools, mongodb-10gen-unstable-mongos, mongodb-10gen-unstable-server, mongodb-10gen-unstable-shell, mongodb-10gen-unstable-tools, mongodb-enterprise, mongodb-enterprise-mongos, mongodb-enterprise-server, mongodb-enterprise-shell, mongodb-enterprise-tools, mongodb-org-unstable, mongodb-org-unstable-mongos, mongodb-org-unstable-shell, mongodb-org-unstable-tools, mongodb-org-unstable-server, mongodb-nightly, mongodb-org, mongodb-org-mongos, mongodb-org-server, mongodb-org-shell, mongodb-org-tools, mongodb-stable, mongodb18-10gen, mongodb20-10gen
Architecture: any
Depends: mongodb-enterprise-unstable-shell, mongodb-enterprise-unstable-server, mongodb-enterprise-unstable-mongos, mongodb-enterprise-unstable-database-tools-extra, mongodb-enterprise-unstable-cryptd
Description: MongoDB open source document-oriented database system (enterprise metapackage)
 MongoDB is built for scalability, performance and high availability, scaling from single server deployments to large, complex multi-site architectures. By leveraging in-memory computing, MongoDB provides high performance for both reads and writes. MongoDBs native replication and automated failover enable enterprise-grade reliability and operational flexibility.
 .
 MongoDB is an open-source database used by companies of all sizes, across all industries and for a wide variety of applications. It is an agile database that allows schemas to change quickly as applications evolve, while still providing the functionality developers expect from traditional databases, such as secondary indexes, a full query language and strict consistency.
 .
 MongoDB has a rich client ecosystem including hadoop integration, officially supported drivers for 10 programming languages and environments, as well as 40 drivers supported by the user community.
 .
 MongoDB features:
 * JSON Data Model with Dynamic Schemas
 * Auto-Sharding for Horizontal Scalability
 * Built-In Replication for High Availability
 * Rich Secondary Indexes, including geospatial
 * TTL indexes
 * Text Search
 * Aggregation Framework & Native MapReduce
 .
 This metapackage will install the mongo shell, import/export tools, other client utilities, server software, default configuration, and init.d scripts.

Package: mongodb-enterprise-unstable
Conflicts: mongo-10gen, mongo-10gen-enterprise, mongo-10gen-enterprise-server, mongo-10gen-server, mongo-10gen-unstable, mongo-10gen-unstable-enterprise, mongo-10gen-unstable-enterprise-mongos, mongo-10gen-unstable-enterprise-server, mongo-10gen-unstable-enterprise-shell, mongo-10gen-unstable-enterprise-tools, mongo-10gen-unstable-mongos, mongo-10gen-unstable-server, mongo-10gen-unstable-shell, mongo-10gen-unstable-tools, mongo18-10gen, mongo18-10gen-server, mongo20-10gen, mongo20-10gen-server, mongodb, mongodb-server, mongodb-dev, mongodb-clients, mongodb-10gen, mongodb-10gen-enterprise, mongodb-10gen-unstable, mongodb-10gen-unstable-enterprise, mongodb-10gen-unstable-enterprise-mongos, mongodb-10gen-unstable-enterprise-server, mongodb-10gen-unstable-enterprise-shell, mongodb-10gen-unstable-enterprise-tools, mongodb-10gen-unstable-mongos, mongodb-10gen-unstable-server, mongodb-10gen-unstable-shell, mongodb-10gen-unstable-tools, mongodb-enterprise, mongodb-enterprise-mongos, mongodb-enterprise-server, mongodb-enterprise-shell, mongodb-enterprise-tools, mongodb-org-unstable, mongodb-org-unstable-mongos, mongodb-org-unstable-shell, mongodb-org-unstable-tools, mongodb-org-unstable-server, mongodb-nightly, mongodb-org, mongodb-org-mongos, mongodb-org-server, mongodb-org-shell, mongodb-org-tools, mongodb-stable, mongodb18-10gen, mongodb20-10gen
Architecture: any
Depends: mongodb-enterprise-unstable-database, mongodb-enterprise-unstable-tools, mongodb-mongosh
Description: MongoDB open source document-oriented database system (enterprise metapackage)
 MongoDB is built for scalability, performance and high availability, scaling from single server deployments to large, complex multi-site architectures. By leveraging in-memory computing, MongoDB provides high performance for both reads and writes. MongoDBs native replication and automated failover enable enterprise-grade reliability and operational flexibility.
 .
 MongoDB is an open-source database used by companies of all sizes, across all industries and for a wide variety of applications. It is an agile database that allows schemas to change quickly as applications evolve, while still providing the functionality developers expect from traditional databases, such as secondary indexes, a full query language and strict consistency.
 .
 MongoDB has a rich client ecosystem including hadoop integration, officially supported drivers for 10 programming languages and environments, as well as 40 drivers supported by the user community.
 .
 MongoDB features:
 * JSON Data Model with Dynamic Schemas
 * Auto-Sharding for Horizontal Scalability
 * Built-In Replication for High Availability
 * Rich Secondary Indexes, including geospatial
 * TTL indexes
 * Text Search
 * Aggregation Framework & Native MapReduce
 .
 This metapackage will install the mongo shell, import/export tools, other client utilities, server software, default configuration, and init.d scripts.

Package: mongodb-enterprise-unstable-shell
Conflicts: mongo-10gen, mongo-10gen-enterprise, mongo-10gen-enterprise-server, mongo-10gen-server, mongo-10gen-unstable, mongo-10gen-unstable-enterprise, mongo-10gen-unstable-enterprise-mongos, mongo-10gen-unstable-enterprise-server, mongo-10gen-unstable-enterprise-shell, mongo-10gen-unstable-enterprise-tools, mongo-10gen-unstable-mongos, mongo-10gen-unstable-server, mongo-10gen-unstable-shell, mongo-10gen-unstable-tools, mongo18-10gen, mongo18-10gen-server, mongo20-10gen, mongo20-10gen-server, mongodb, mongodb-server, mongodb-dev, mongodb-clients, mongodb-10gen, mongodb-10gen-enterprise, mongodb-10gen-unstable, mongodb-10gen-unstable-enterprise, mongodb-10gen-unstable-enterprise-mongos, mongodb-10gen-unstable-enterprise-server, mongodb-10gen-unstable-enterprise-shell, mongodb-10gen-unstable-enterprise-tools, mongodb-10gen-unstable-mongos, mongodb-10gen-unstable-server, mongodb-10gen-unstable-shell, mongodb-10gen-unstable-tools, mongodb-enterprise, mongodb-enterprise-mongos, mongodb-enterprise-server, mongodb-enterprise-shell, mongodb-enterprise-tools, mongodb-org-unstable, mongodb-org-unstable-mongos, mongodb-org-unstable-shell, mongodb-org-unstable-tools, mongodb-org-unstable-server, mongodb-nightly, mongodb-org, mongodb-org-mongos, mongodb-org-server, mongodb-org-shell, mongodb-org-tools, mongodb-stable, mongodb18-10gen, mongodb20-10gen
Architecture: any
Depends: ${shlibs:Depends}, libsasl2-modules-gssapi-mit
Description: MongoDB shell client (enterprise)
 MongoDB is built for scalability, performance and high availability, scaling from single server deployments to large, complex multi-site architectures. By leveraging in-memory computing, MongoDB provides high performance for both reads and writes. MongoDBs native replication and automated failover enable enterprise-grade reliability and operational flexibility.
 .
 MongoDB is an open-source database used by companies of all sizes, across all industries and for a wide variety of applications. It is an agile database that allows schemas to change quickly as applications evolve, while still providing the functionality developers expect from traditional databases, such as secondary indexes, a full query language and strict consistency.
 .
 MongoDB has a rich client ecosystem including hadoop integration, officially supported drivers for 10 programming languages and environments, as well as 40 drivers supported by the user community.
 .
 MongoDB features:
 * JSON Data Model with Dynamic Schemas
 * Auto-Sharding for Horizontal Scalability
 * Built-In Replication for High Availability
 * Rich Secondary Indexes, including geospatial
 * TTL indexes
 * Text Search
 * Aggregation Framework & Native MapReduce
 .
 This package contains the mongo shell.

Package: mongodb-enterprise-unstable-server
Conflicts: mongo-10gen, mongo-10gen-enterprise, mongo-10gen-enterprise-server, mongo-10gen-server, mongo-10gen-unstable, mongo-10gen-unstable-enterprise, mongo-10gen-unstable-enterprise-mongos, mongo-10gen-unstable-enterprise-server, mongo-10gen-unstable-enterprise-shell, mongo-10gen-unstable-enterprise-tools, mongo-10gen-unstable-mongos, mongo-10gen-unstable-server, mongo-10gen-unstable-shell, mongo-10gen-unstable-tools, mongo18-10gen, mongo18-10gen-server, mongo20-10gen, mongo20-10gen-server, mongodb, mongodb-server, mongodb-dev, mongodb-clients, mongodb-10gen, mongodb-10gen-enterprise, mongodb-10gen-unstable, mongodb-10gen-unstable-enterprise, mongodb-10gen-unstable-enterprise-mongos, mongodb-10gen-unstable-enterprise-server, mongodb-10gen-unstable-enterprise-shell, mongodb-10gen-unstable-enterprise-tools, mongodb-10gen-unstable-mongos, mongodb-10gen-unstable-server, mongodb-10gen-unstable-shell, mongodb-10gen-unstable-tools, mongodb-enterprise, mongodb-enterprise-mongos, mongodb-enterprise-server, mongodb-enterprise-shell, mongodb-enterprise-tools, mongodb-org-unstable, mongodb-org-unstable-mongos, mongodb-org-unstable-shell, mongodb-org-unstable-tools, mongodb-org-unstable-server, mongodb-nightly, mongodb-org, mongodb-org-mongos, mongodb-org-server, mongodb-org-shell, mongodb-org-tools, mongodb-stable, mongodb18-10gen, mongodb20-10gen
Architecture: any
Depends: ${shlibs:Depends}, snmp, adduser, tzdata, libsasl2-modules-gssapi-mit
Description: MongoDB database server (enterprise)
 MongoDB is built for scalability, performance and high availability, scaling from single server deployments to large, complex multi-site architectures. By leveraging in-memory computing, MongoDB provides high performance for both reads and writes. MongoDBs native replication and automated failover enable enterprise-grade reliability and operational flexibility.
 .
 MongoDB is an open-source database used by companies of all sizes, across all industries and for a wide variety of applications. It is an agile database that allows schemas to change quickly as applications evolve, while still providing the functionality developers expect from traditional databases, such as secondary indexes, a full query language and strict consistency.
 .
 MongoDB has a rich client ecosystem including hadoop integration, officially supported drivers for 10 programming languages and environments, as well as 40 drivers supported by the user community.
 .
 MongoDB features:
 * JSON Data Model with Dynamic Schemas
 * Auto-Sharding for Horizontal Scalability
 * Built-In Replication for High Availability
 * Rich Secondary Indexes, including geospatial
 * TTL indexes
 * Text Search
 * Aggregation Framework & Native MapReduce
 .
 This package contains the MongoDB server software, default configuration files, and init.d scripts.

Package: mongodb-enterprise-unstable-mongos
Conflicts: mongo-10gen, mongo-10gen-enterprise, mongo-10gen-enterprise-server, mongo-10gen-server, mongo-10gen-unstable, mongo-10gen-unstable-enterprise, mongo-10gen-unstable-enterprise-mongos, mongo-10gen-unstable-enterprise-server, mongo-10gen-unstable-enterprise-shell, mongo-10gen-unstable-enterprise-tools, mongo-10gen-unstable-mongos, mongo-10gen-unstable-server, mongo-10gen-unstable-shell, mongo-10gen-unstable-tools, mongo18-10gen, mongo18-10gen-server, mongo20-10gen, mongo20-10gen-server, mongodb, mongodb-server, mongodb-dev, mongodb-clients, mongodb-10gen, mongodb-10gen-enterprise, mongodb-10gen-unstable, mongodb-10gen-unstable-enterprise, mongodb-10gen-unstable-enterprise-mongos, mongodb-10gen-unstable-enterprise-server, mongodb-10gen-unstable-enterprise-shell, mongodb-10gen-unstable-enterprise-tools, mongodb-10gen-unstable-mongos, mongodb-10gen-unstable-server, mongodb-10gen-unstable-shell, mongodb-10gen-unstable-tools, mongodb-enterprise, mongodb-enterprise-mongos, mongodb-enterprise-server, mongodb-enterprise-shell, mongodb-enterprise-tools, mongodb-org-unstable, mongodb-org-unstable-mongos, mongodb-org-unstable-shell, mongodb-org-unstable-tools, mongodb-org-unstable-server, mongodb-nightly, mongodb-org, mongodb-org-mongos, mongodb-org-server, mongodb-org-shell, mongodb-org-tools, mongodb-stable, mongodb18-10gen, mongodb20-10gen
Architecture: any
Depends: ${shlibs:Depends}, tzdata
Description: MongoDB sharded cluster query router (enterprise)
 MongoDB is built for scalability, performance and high availability, scaling from single server deployments to large, complex multi-site architectures. By leveraging in-memory computing, MongoDB provides high performance for both reads and writes. MongoDBs native replication and automated failover enable enterprise-grade reliability and operational flexibility.
 .
 MongoDB is an open-source database used by companies of all sizes, across all industries and for a wide variety of applications. It is an agile database that allows schemas to change quickly as applications evolve, while still providing the functionality developers expect from traditional databases, such as secondary indexes, a full query language and strict consistency.
 .
 MongoDB has a rich client ecosystem including hadoop integration, officially supported drivers for 10 programming languages and environments, as well as 40 drivers supported by the user community.
 .
 MongoDB features:
 * JSON Data Model with Dynamic Schemas
 * Auto-Sharding for Horizontal Scalability
 * Built-In Replication for High Availability
 * Rich Secondary Indexes, including geospatial
 * TTL indexes
 * Text Search
 * Aggregation Framework & Native MapReduce
 .
 This package contains mongos, the MongoDB sharded cluster query router.

Package: mongodb-enterprise-unstable-tools
Conflicts: mongo-10gen, mongo-10gen-enterprise, mongo-10gen-enterprise-server, mongo-10gen-server, mongo-10gen-unstable, mongo-10gen-unstable-enterprise, mongo-10gen-unstable-enterprise-mongos, mongo-10gen-unstable-enterprise-server, mongo-10gen-unstable-enterprise-shell, mongo-10gen-unstable-enterprise-tools, mongo-10gen-unstable-mongos, mongo-10gen-unstable-server, mongo-10gen-unstable-shell, mongo-10gen-unstable-tools, mongo18-10gen, mongo18-10gen-server, mongo20-10gen, mongo20-10gen-server, mongodb, mongodb-server, mongodb-dev, mongodb-clients, mongodb-10gen, mongodb-10gen-enterprise, mongodb-10gen-unstable, mongodb-10gen-unstable-enterprise, mongodb-10gen-unstable-enterprise-mongos, mongodb-10gen-unstable-enterprise-server, mongodb-10gen-unstable-enterprise-shell, mongodb-10gen-unstable-enterprise-tools, mongodb-10gen-unstable-mongos, mongodb-10gen-unstable-server, mongodb-10gen-unstable-shell, mongodb-10gen-unstable-tools, mongodb-enterprise, mongodb-enterprise-mongos, mongodb-enterprise-server, mongodb-enterprise-shell, mongodb-enterprise-tools, mongodb-org-unstable, mongodb-org-unstable-mongos, mongodb-org-unstable-shell, mongodb-org-unstable-tools, mongodb-org-unstable-server, mongodb-nightly, mongodb-org, mongodb-org-mongos, mongodb-org-server, mongodb-org-shell, mongodb-org-tools, mongodb-stable, mongodb18-10gen, mongodb20-10gen
Architecture: any
Depends: mongodb-database-tools, mongodb-enterprise-unstable-database-tools-extra
Description: MongoDB tools (enterprise)
 MongoDB is built for scalability, performance and high availability, scaling from single server deployments to large, complex multi-site architectures. By leveraging in-memory computing, MongoDB provides high performance for both reads and writes. MongoDBs native replication and automated failover enable enterprise-grade reliability and operational flexibility.
 .
 MongoDB is an open-source database used by companies of all sizes, across all industries and for a wide variety of applications. It is an agile database that allows schemas to change quickly as applications evolve, while still providing the functionality developers expect from traditional databases, such as secondary indexes, a full query language and strict consistency.
 .
 MongoDB has a rich client ecosystem including hadoop integration, officially supported drivers for 10 programming languages and environments, as well as 40 drivers supported by the user community.
 .
 MongoDB features:
 * JSON Data Model with Dynamic Schemas
 * Auto-Sharding for Horizontal Scalability
 * Built-In Replication for High Availability
 * Rich Secondary Indexes, including geospatial
 * TTL indexes
 * Text Search
 * Aggregation Framework & Native MapReduce
 .
 This metapackage exists to simplfy acquisition of both the database tools and the extra database tools.

Package: mongodb-enterprise-unstable-database-tools-extra
Conflicts: mongo-10gen, mongo-10gen-enterprise, mongo-10gen-enterprise-server, mongo-10gen-server, mongo-10gen-unstable, mongo-10gen-unstable-enterprise, mongo-10gen-unstable-enterprise-mongos, mongo-10gen-unstable-enterprise-server, mongo-10gen-unstable-enterprise-shell, mongo-10gen-unstable-enterprise-tools, mongo-10gen-unstable-mongos, mongo-10gen-unstable-server, mongo-10gen-unstable-shell, mongo-10gen-unstable-tools, mongo18-10gen, mongo18-10gen-server, mongo20-10gen, mongo20-10gen-server, mongodb, mongodb-server, mongodb-dev, mongodb-clients, mongodb-10gen, mongodb-10gen-enterprise, mongodb-10gen-unstable, mongodb-10gen-unstable-enterprise, mongodb-10gen-unstable-enterprise-mongos, mongodb-10gen-unstable-enterprise-server, mongodb-10gen-unstable-enterprise-shell, mongodb-10gen-unstable-enterprise-tools, mongodb-10gen-unstable-mongos, mongodb-10gen-unstable-server, mongodb-10gen-unstable-shell, mongodb-10gen-unstable-tools, mongodb-enterprise, mongodb-enterprise-mongos, mongodb-enterprise-server, mongodb-enterprise-shell, mongodb-enterprise-tools, mongodb-org-unstable, mongodb-org-unstable-mongos, mongodb-org-unstable-shell, mongodb-org-unstable-tools, mongodb-org-unstable-server, mongodb-nightly, mongodb-org, mongodb-org-mongos, mongodb-org-server, mongodb-org-shell, mongodb-org-tools, mongodb-stable, mongodb18-10gen, mongodb20-10gen, mongodb-org-database-tools-extra, mongodb-org-unstable-database-tools-extra, mongodb-enterprise-database-tools-extra
Architecture: any
Depends: ${shlibs:Depends}, libsasl2-modules-gssapi-mit
Breaks: mongodb-enterprise-unstable-tools (<= 4.2)
Replaces: mongodb-enterprise-unstable-tools (<= 4.2)
Description: Extra MongoDB database tools (enterprise)
 MongoDB is built for scalability, performance and high availability, scaling from single server deployments to large, complex multi-site architectures. By leveraging in-memory computing, MongoDB provides high performance for both reads and writes. MongoDBs native replication and automated failover enable enterprise-grade reliability and operational flexibility.
 .
 MongoDB is an open-source database used by companies of all sizes, across all industries and for a wide variety of applications. It is an agile database that allows schemas to change quickly as applications evolve, while still providing the functionality developers expect from traditional databases, such as secondary indexes, a full query language and strict consistency.
 .
 MongoDB has a rich client ecosystem including hadoop integration, officially supported drivers for 10 programming languages and environments, as well as 40 drivers supported by the user community.
 .
 MongoDB features:
 * JSON Data Model with Dynamic Schemas
 * Auto-Sharding for Horizontal Scalability
 * Built-In Replication for High Availability
 * Rich Secondary Indexes, including geospatial
 * TTL indexes
 * Text Search
 * Aggregation Framework & Native MapReduce
 .
 This package contains extra database tools, like the Compass installer, mongodecrypt, mongoldap, and mongokerberos.

Package: mongodb-enterprise-unstable-cryptd
Conflicts: mongo-enterprise-cryptd
Architecture: any
Depends: ${shlibs:Depends}, libsasl2-modules-gssapi-mit
Description: MongoDB Client Side Field Level Encryption Support Daemon (enterprise)
 MongoDB is built for scalability, performance and high availability, scaling from single server deployments to large, complex multi-site architectures. By leveraging in-memory computing, MongoDB provides high performance for both reads and writes. MongoDBs native replication and automated failover enable enterprise-grade reliability and operational flexibility.
 .
 MongoDB is an open-source database used by companies of all sizes, across all industries and for a wide variety of applications. It is an agile database that allows schemas to change quickly as applications evolve, while still providing the functionality developers expect from traditional databases, such as secondary indexes, a full query language and strict consistency.
 .
 MongoDB has a rich client ecosystem including hadoop integration, officially supported drivers for 10 programming languages and environments, as well as 40 drivers supported by the user community.
 .
 MongoDB features:
 * JSON Data Model with Dynamic Schemas
 * Auto-Sharding for Horizontal Scalability
 * Built-In Replication for High Availability
 * Rich Secondary Indexes, including geospatial
 * TTL indexes
 * Text Search
 * Aggregation Framework & Native MapReduce
 .
 This package contains standard utilities for interacting with MongoDB.

#!/usr/bin/make -f
# -*- makefile -*-
TOOLS=mongodecrypt mongoldap mongokerberos

# Uncomment this to turn on verbose mode.
export DH_VERBOSE=1


configure: configure-stamp
configure-stamp:
	dh_testdir

	touch configure-stamp


build: build-stamp

build-stamp: configure-stamp
	dh_testdir

	# THE FOLLOWING LINE IS INTENTIONALLY COMMENTED.
	# scons
	#docbook-to-man debian/mongodb.sgml > mongodb.1

	echo -n > debian/mongodb-enterprise-unstable-database-tools-extra.manpages
	for binary in ${TOOLS} ; \
	do \
		if [ -e debian/$$binary.1 ] ; \
		then \
			echo debian/$$binary.1 >> debian/mongodb-enterprise-unstable-database-tools-extra.manpages ; \
		fi ; \
	done

	echo debian/mongo.1 > debian/mongodb-enterprise-unstable-shell.manpages
	echo debian/mongod.1 > debian/mongodb-enterprise-unstable-server.manpages
	echo debian/mongos.1 > debian/mongodb-enterprise-unstable-mongos.manpages

	touch $@

clean:
	dh_testdir
	dh_testroot
	rm -f build-stamp configure-stamp

	# FIXME: scons freaks out at the presence of target files
	# under debian/mongodb.
	#scons -c

	rm -f debian/*.manpages

	rm -rf $(CURDIR)/debian/mongodb-enterprise-unstable
	rm -rf $(CURDIR)/debian/mongodb-enterprise-unstable-shell
	rm -rf $(CURDIR)/debian/mongodb-enterprise-unstable-server
	rm -rf $(CURDIR)/debian/mongodb-enterprise-unstable-mongos
	rm -rf $(CURDIR)/debian/mongodb-enterprise-unstable-database-tools-extra
	rm -rf $(CURDIR)/debian/mongodb-enterprise-unstable-cryptd
	rm -f config.log
	rm -f mongo
	rm -f mongod
	rm -f mongocryptd
	rm -f install_compass
	rm -f .sconsign.dblite
	rm -f libmongoclient.a
	rm -rf client/*.o
	rm -rf tools/*.o
	rm -rf shell/*.o
	rm -rf .sconf_temp
	rm -f buildscripts/*.pyc
	rm -f *.pyc
	rm -f buildinfo.cpp
	dh_clean debian/files

install: build
	dh_testdir
	dh_testroot
	dh_prep
	dh_installdirs

	# THE FOLLOWING LINE IS INTENTIONALLY COMMENTED.
	# scons --prefix=$(CURDIR)/debian/mongodb/usr install
	mkdir -p $(CURDIR)/debian/mongodb-enterprise-unstable-shell/usr/bin
	mkdir -p $(CURDIR)/debian/mongodb-enterprise-unstable-server/usr/bin
	mkdir -p $(CURDIR)/debian/mongodb-enterprise-unstable-mongos/usr/bin
	mkdir -p $(CURDIR)/debian/mongodb-enterprise-unstable-database-tools-extra/usr/bin
	mkdir -p $(CURDIR)/debian/mongodb-enterprise-unstable-cryptd/usr/bin
	cp -v $(CURDIR)/bin/mongo $(CURDIR)/debian/mongodb-enterprise-unstable-shell/usr/bin
	cp -v $(CURDIR)/bin/mongod $(CURDIR)/debian/mongodb-enterprise-unstable-server/usr/bin
	cp -v $(CURDIR)/bin/mongos $(CURDIR)/debian/mongodb-enterprise-unstable-mongos/usr/bin
	cp -v $(CURDIR)/bin/install_compass $(CURDIR)/debian/mongodb-enterprise-unstable-database-tools-extra/usr/bin
	cp -v $(CURDIR)/bin/mongocryptd $(CURDIR)/debian/mongodb-enterprise-unstable-cryptd/usr/bin

	for binary in ${TOOLS} ; \
	do \
	  cp -v $(CURDIR)/bin/$$binary $(CURDIR)/debian/mongodb-enterprise-unstable-database-tools-extra/usr/bin ; \
	done

	mkdir -p $(CURDIR)/debian/mongodb-enterprise-unstable-server/etc
	cp $(CURDIR)/debian/mongod.conf $(CURDIR)/debian/mongodb-enterprise-unstable-server/etc/mongod.conf

	mkdir -p $(CURDIR)/debian/mongodb-enterprise-unstable-shell/usr/share/lintian/overrides/
	mkdir -p $(CURDIR)/debian/mongodb-enterprise-unstable-server/usr/share/lintian/overrides/
	mkdir -p $(CURDIR)/debian/mongodb-enterprise-unstable-mongos/usr/share/lintian/overrides/
	mkdir -p $(CURDIR)/debian/mongodb-enterprise-unstable-database-tools-extra/usr/share/lintian/overrides/
	mkdir -p $(CURDIR)/debian/mongodb-enterprise-unstable-cryptd/usr/share/lintian/overrides/
	install -m 644 $(CURDIR)/debian/lintian-overrides 		$(CURDIR)/debian/mongodb-enterprise-unstable-shell/usr/share/lintian/overrides/mongodb-enterprise-unstable-shell
	install -m 644 $(CURDIR)/debian/lintian-overrides 		$(CURDIR)/debian/mongodb-enterprise-unstable-server/usr/share/lintian/overrides/mongodb-enterprise-unstable-server
	install -m 644 $(CURDIR)/debian/lintian-overrides 		$(CURDIR)/debian/mongodb-enterprise-unstable-mongos/usr/share/lintian/overrides/mongodb-enterprise-unstable-mongos
	install -m 644 $(CURDIR)/debian/lintian-overrides 		$(CURDIR)/debian/mongodb-enterprise-unstable-database-tools-extra/usr/share/lintian/overrides/mongodb-enterprise-unstable-database-tools-extra
	install -m 644 $(CURDIR)/debian/lintian-overrides 		$(CURDIR)/debian/mongodb-enterprise-unstable-cryptd/usr/share/lintian/overrides/mongodb-enterprise-unstable-cryptd
	install -m 644 $(CURDIR)/debian/substvars				$(CURDIR)/debian/mongodb-enterprise-unstable-database.substvars
	install -m 644 $(CURDIR)/debian/substvars				$(CURDIR)/debian/mongodb-enterprise-unstable-shell.substvars
	install -m 644 $(CURDIR)/debian/substvars				$(CURDIR)/debian/mongodb-enterprise-unstable-server.substvars
	install -m 644 $(CURDIR)/debian/substvars				$(CURDIR)/debian/mongodb-enterprise-unstable-mongos.substvars
	install -m 644 $(CURDIR)/debian/substvars				$(CURDIR)/debian/mongodb-enterprise-unstable-database-tools-extra.substvars
	install -m 644 $(CURDIR)/debian/substvars				$(CURDIR)/debian/mongodb-enterprise-unstable-cryptd.substvars

# Build architecture-independent files here.
binary-indep: build install
# We have nothing to do by default.

# Build architecture-dependent files here.
binary-arch: build install
	dh_testdir
	dh_testroot
	dh_installchangelogs
	dh_installdocs
	dh_installexamples
#	dh_install
#	dh_installmenu
#	dh_installdebconf
#	dh_installlogrotate
#	dh_installemacsen
#	dh_installpam
#	dh_installmime
	dh_installinit -pmongodb-enterprise-unstable-server --name=mongod
#	dh_installinfo
	dh_installman
	dh_link
# Appears to be broken on Ubuntu 11.10...?
#	dh_strip
	dh_compress
	dh_fixperms
	dh_installdeb
	dh_shlibdeps
	dh_gencontrol
	dh_md5sums
	dh_builddeb

binary: binary-indep binary-arch
.PHONY: build clean binary-indep binary-arch binary install configure

snmp/mongod.conf.master
snmp/mongod.conf.subagent
snmp/README-snmp.txt
snmp/MONGOD-MIB.txt
snmp/MONGODBINC-MIB.txt
LICENSE-Enterprise.txt
README
THIRD-PARTY-NOTICES
MPL-2

#!/bin/sh
# postinst script for mongodb
#
# see: dh_installdeb(1)

set -e

# summary of how this script can be called:
#        * <postinst> `configure' <most-recently-configured-version>
#        * <old-postinst> `abort-upgrade' <new version>
#        * <conflictor's-postinst> `abort-remove' `in-favour' <package>
#          <new-version>
#        * <postinst> `abort-remove'
#        * <deconfigured's-postinst> `abort-deconfigure' `in-favour'
#          <failed-install-package> <version> `removing'
#          <conflicting-package> <version>
# for details, see http://www.debian.org/doc/debian-policy/ or
# the debian-policy package


case "$1" in
    configure)
        # create a mongodb group and user
        if ! getent passwd mongodb >/dev/null 2>&1; then
            adduser --system --no-create-home mongodb
            addgroup --system mongodb
            adduser mongodb mongodb
        fi

        # create db -- note: this should agree with dbpath in mongod.conf
        if [ ! -d /var/lib/mongodb ]; then
            mkdir -p /var/lib/mongodb
            chown mongodb:mongodb /var/lib/mongodb
        fi

        # create logdir -- note: this should agree with logpath in mongod.conf
        if [ ! -d /var/log/mongodb ]; then
            mkdir -p /var/log/mongodb
            chown mongodb:mongodb /var/log/mongodb
        fi

        # Check for changes to the service file, but ignore errors when
        # systemd is not running.
        if $(command systemctl --help >/dev/null); then
            systemctl daemon-reload || true
        fi
    ;;

    abort-upgrade|abort-remove|abort-deconfigure)
    ;;

    *)
        echo "postinst called with unknown argument \`$1'" >&2
        exit 1
    ;;
esac

# dh_installdeb will replace this with shell code automatically
# generated by other debhelper scripts.

#DEBHELPER#

exit 0



Source: mongodb-org
Section: database
Priority: optional
Maintainer: MongoDB Packaging <packaging@mongodb.com>
Build-Depends: 
Standards-Version: 3.8.0
Homepage: http://www.mongodb.org

Package: mongodb-org-database
Conflicts: mongo-10gen, mongo-10gen-enterprise, mongo-10gen-enterprise-server, mongo-10gen-server, mongo-10gen-unstable, mongo-10gen-unstable-enterprise, mongo-10gen-unstable-enterprise-mongos, mongo-10gen-unstable-enterprise-server, mongo-10gen-unstable-enterprise-shell, mongo-10gen-unstable-enterprise-tools, mongo-10gen-unstable-mongos, mongo-10gen-unstable-server, mongo-10gen-unstable-shell, mongo-10gen-unstable-tools, mongo18-10gen, mongo18-10gen-server, mongo20-10gen, mongo20-10gen-server, mongodb, mongodb-server, mongodb-dev, mongodb-clients, mongodb-10gen, mongodb-10gen-enterprise, mongodb-10gen-unstable, mongodb-10gen-unstable-enterprise, mongodb-10gen-unstable-enterprise-mongos, mongodb-10gen-unstable-enterprise-server, mongodb-10gen-unstable-enterprise-shell, mongodb-10gen-unstable-enterprise-tools, mongodb-10gen-unstable-mongos, mongodb-10gen-unstable-server, mongodb-10gen-unstable-shell, mongodb-10gen-unstable-tools, mongodb-enterprise-unstable, mongodb-enterprise-unstable-mongos, mongodb-enterprise-unstable-server, mongodb-enterprise-unstable-shell, mongodb-enterprise-unstable-tools, mongodb-org-unstable, mongodb-org-unstable-mongos, mongodb-org-unstable-shell, mongodb-org-unstable-tools, mongodb-org-unstable-server, mongodb-nightly, mongodb-nightly, mongodb-enterprise, mongodb-enterprise-mongos, mongodb-enterprise-server, mongodb-enterprise-shell, mongodb-enterprise-tools, mongodb-stable, mongodb18-10gen, mongodb20-10gen
Architecture: any
Depends: mongodb-org-shell, mongodb-org-server, mongodb-org-mongos, mongodb-org-database-tools-extra
Description: MongoDB open source document-oriented database system (metapackage)
 MongoDB is built for scalability, performance and high availability, scaling from single server deployments to large, complex multi-site architectures. By leveraging in-memory computing, MongoDB provides high performance for both reads and writes. MongoDBs native replication and automated failover enable enterprise-grade reliability and operational flexibility.
 .
 MongoDB is an open-source database used by companies of all sizes, across all industries and for a wide variety of applications. It is an agile database that allows schemas to change quickly as applications evolve, while still providing the functionality developers expect from traditional databases, such as secondary indexes, a full query language and strict consistency.
 .
 MongoDB has a rich client ecosystem including hadoop integration, officially supported drivers for 10 programming languages and environments, as well as 40 drivers supported by the user community.
 .
 MongoDB features:
 * JSON Data Model with Dynamic Schemas
 * Auto-Sharding for Horizontal Scalability
 * Built-In Replication for High Availability
 * Rich Secondary Indexes, including geospatial
 * TTL indexes
 * Text Search
 * Aggregation Framework & Native MapReduce
 .
 This metapackage will install the mongo shell, import/export tools, other client utilities, server software, default configuration, and init.d scripts.

Package: mongodb-org
Conflicts: mongo-10gen, mongo-10gen-enterprise, mongo-10gen-enterprise-server, mongo-10gen-server, mongo-10gen-unstable, mongo-10gen-unstable-enterprise, mongo-10gen-unstable-enterprise-mongos, mongo-10gen-unstable-enterprise-server, mongo-10gen-unstable-enterprise-shell, mongo-10gen-unstable-enterprise-tools, mongo-10gen-unstable-mongos, mongo-10gen-unstable-server, mongo-10gen-unstable-shell, mongo-10gen-unstable-tools, mongo18-10gen, mongo18-10gen-server, mongo20-10gen, mongo20-10gen-server, mongodb, mongodb-server, mongodb-dev, mongodb-clients, mongodb-10gen, mongodb-10gen-enterprise, mongodb-10gen-unstable, mongodb-10gen-unstable-enterprise, mongodb-10gen-unstable-enterprise-mongos, mongodb-10gen-unstable-enterprise-server, mongodb-10gen-unstable-enterprise-shell, mongodb-10gen-unstable-enterprise-tools, mongodb-10gen-unstable-mongos, mongodb-10gen-unstable-server, mongodb-10gen-unstable-shell, mongodb-10gen-unstable-tools, mongodb-enterprise-unstable, mongodb-enterprise-unstable-mongos, mongodb-enterprise-unstable-server, mongodb-enterprise-unstable-shell, mongodb-enterprise-unstable-tools, mongodb-org-unstable, mongodb-org-unstable-mongos, mongodb-org-unstable-shell, mongodb-org-unstable-tools, mongodb-org-unstable-server, mongodb-nightly, mongodb-nightly, mongodb-enterprise, mongodb-enterprise-mongos, mongodb-enterprise-server, mongodb-enterprise-shell, mongodb-enterprise-tools, mongodb-stable, mongodb18-10gen, mongodb20-10gen
Architecture: any
Depends: mongodb-org-database, mongodb-org-tools, mongodb-mongosh
Description: MongoDB open source document-oriented database system (metapackage)
 MongoDB is built for scalability, performance and high availability, scaling from single server deployments to large, complex multi-site architectures. By leveraging in-memory computing, MongoDB provides high performance for both reads and writes. MongoDBs native replication and automated failover enable enterprise-grade reliability and operational flexibility.
 .
 MongoDB is an open-source database used by companies of all sizes, across all industries and for a wide variety of applications. It is an agile database that allows schemas to change quickly as applications evolve, while still providing the functionality developers expect from traditional databases, such as secondary indexes, a full query language and strict consistency.
 .
 MongoDB has a rich client ecosystem including hadoop integration, officially supported drivers for 10 programming languages and environments, as well as 40 drivers supported by the user community.
 .
 MongoDB features:
 * JSON Data Model with Dynamic Schemas
 * Auto-Sharding for Horizontal Scalability
 * Built-In Replication for High Availability
 * Rich Secondary Indexes, including geospatial
 * TTL indexes
 * Text Search
 * Aggregation Framework & Native MapReduce
 .
 This metapackage will install the mongo shell, import/export tools, other client utilities, server software, default configuration, and init.d scripts.

Package: mongodb-org-shell
Conflicts: mongo-10gen, mongo-10gen-enterprise, mongo-10gen-enterprise-server, mongo-10gen-server, mongo-10gen-unstable, mongo-10gen-unstable-enterprise, mongo-10gen-unstable-enterprise-mongos, mongo-10gen-unstable-enterprise-server, mongo-10gen-unstable-enterprise-shell, mongo-10gen-unstable-enterprise-tools, mongo-10gen-unstable-mongos, mongo-10gen-unstable-server, mongo-10gen-unstable-shell, mongo-10gen-unstable-tools, mongo18-10gen, mongo18-10gen-server, mongo20-10gen, mongo20-10gen-server, mongodb, mongodb-server, mongodb-dev, mongodb-clients, mongodb-10gen, mongodb-10gen-enterprise, mongodb-10gen-unstable, mongodb-10gen-unstable-enterprise, mongodb-10gen-unstable-enterprise-mongos, mongodb-10gen-unstable-enterprise-server, mongodb-10gen-unstable-enterprise-shell, mongodb-10gen-unstable-enterprise-tools, mongodb-10gen-unstable-mongos, mongodb-10gen-unstable-server, mongodb-10gen-unstable-shell, mongodb-10gen-unstable-tools, mongodb-enterprise-unstable, mongodb-enterprise-unstable-mongos, mongodb-enterprise-unstable-server, mongodb-enterprise-unstable-shell, mongodb-enterprise-unstable-tools, mongodb-org-unstable, mongodb-org-unstable-mongos, mongodb-org-unstable-shell, mongodb-org-unstable-tools, mongodb-org-unstable-server, mongodb-nightly, mongodb-nightly, mongodb-enterprise, mongodb-enterprise-mongos, mongodb-enterprise-server, mongodb-enterprise-shell, mongodb-enterprise-tools, mongodb-stable, mongodb18-10gen, mongodb20-10gen
Architecture: any
Depends: ${shlibs:Depends}
Description: MongoDB shell client
 MongoDB is built for scalability, performance and high availability, scaling from single server deployments to large, complex multi-site architectures. By leveraging in-memory computing, MongoDB provides high performance for both reads and writes. MongoDBs native replication and automated failover enable enterprise-grade reliability and operational flexibility.
 .
 MongoDB is an open-source database used by companies of all sizes, across all industries and for a wide variety of applications. It is an agile database that allows schemas to change quickly as applications evolve, while still providing the functionality developers expect from traditional databases, such as secondary indexes, a full query language and strict consistency.
 .
 MongoDB has a rich client ecosystem including hadoop integration, officially supported drivers for 10 programming languages and environments, as well as 40 drivers supported by the user community.
 .
 MongoDB features:
 * JSON Data Model with Dynamic Schemas
 * Auto-Sharding for Horizontal Scalability
 * Built-In Replication for High Availability
 * Rich Secondary Indexes, including geospatial
 * TTL indexes
 * Text Search
 * Aggregation Framework & Native MapReduce
 .
 This package contains the mongo shell.

Package: mongodb-org-server
Conflicts: mongo-10gen, mongo-10gen-enterprise, mongo-10gen-enterprise-server, mongo-10gen-server, mongo-10gen-unstable, mongo-10gen-unstable-enterprise, mongo-10gen-unstable-enterprise-mongos, mongo-10gen-unstable-enterprise-server, mongo-10gen-unstable-enterprise-shell, mongo-10gen-unstable-enterprise-tools, mongo-10gen-unstable-mongos, mongo-10gen-unstable-server, mongo-10gen-unstable-shell, mongo-10gen-unstable-tools, mongo18-10gen, mongo18-10gen-server, mongo20-10gen, mongo20-10gen-server, mongodb, mongodb-server, mongodb-dev, mongodb-clients, mongodb-10gen, mongodb-10gen-enterprise, mongodb-10gen-unstable, mongodb-10gen-unstable-enterprise, mongodb-10gen-unstable-enterprise-mongos, mongodb-10gen-unstable-enterprise-server, mongodb-10gen-unstable-enterprise-shell, mongodb-10gen-unstable-enterprise-tools, mongodb-10gen-unstable-mongos, mongodb-10gen-unstable-server, mongodb-10gen-unstable-shell, mongodb-10gen-unstable-tools, mongodb-enterprise-unstable, mongodb-enterprise-unstable-mongos, mongodb-enterprise-unstable-server, mongodb-enterprise-unstable-shell, mongodb-enterprise-unstable-tools, mongodb-org-unstable, mongodb-org-unstable-mongos, mongodb-org-unstable-shell, mongodb-org-unstable-tools, mongodb-org-unstable-server, mongodb-nightly, mongodb-nightly, mongodb-enterprise, mongodb-enterprise-mongos, mongodb-enterprise-server, mongodb-enterprise-shell, mongodb-enterprise-tools, mongodb-stable, mongodb18-10gen, mongodb20-10gen
Architecture: any
Depends: ${shlibs:Depends}, adduser, tzdata
Description: MongoDB database server
 MongoDB is built for scalability, performance and high availability, scaling from single server deployments to large, complex multi-site architectures. By leveraging in-memory computing, MongoDB provides high performance for both reads and writes. MongoDBs native replication and automated failover enable enterprise-grade reliability and operational flexibility.
 .
 MongoDB is an open-source database used by companies of all sizes, across all industries and for a wide variety of applications. It is an agile database that allows schemas to change quickly as applications evolve, while still providing the functionality developers expect from traditional databases, such as secondary indexes, a full query language and strict consistency.
 .
 MongoDB has a rich client ecosystem including hadoop integration, officially supported drivers for 10 programming languages and environments, as well as 40 drivers supported by the user community.
 .
 MongoDB features:
 * JSON Data Model with Dynamic Schemas
 * Auto-Sharding for Horizontal Scalability
 * Built-In Replication for High Availability
 * Rich Secondary Indexes, including geospatial
 * TTL indexes
 * Text Search
 * Aggregation Framework & Native MapReduce
 .
 This package contains the MongoDB server software, default configuration files, and init.d scripts.

Package: mongodb-org-mongos
Conflicts: mongo-10gen, mongo-10gen-enterprise, mongo-10gen-enterprise-server, mongo-10gen-server, mongo-10gen-unstable, mongo-10gen-unstable-enterprise, mongo-10gen-unstable-enterprise-mongos, mongo-10gen-unstable-enterprise-server, mongo-10gen-unstable-enterprise-shell, mongo-10gen-unstable-enterprise-tools, mongo-10gen-unstable-mongos, mongo-10gen-unstable-server, mongo-10gen-unstable-shell, mongo-10gen-unstable-tools, mongo18-10gen, mongo18-10gen-server, mongo20-10gen, mongo20-10gen-server, mongodb, mongodb-server, mongodb-dev, mongodb-clients, mongodb-10gen, mongodb-10gen-enterprise, mongodb-10gen-unstable, mongodb-10gen-unstable-enterprise, mongodb-10gen-unstable-enterprise-mongos, mongodb-10gen-unstable-enterprise-server, mongodb-10gen-unstable-enterprise-shell, mongodb-10gen-unstable-enterprise-tools, mongodb-10gen-unstable-mongos, mongodb-10gen-unstable-server, mongodb-10gen-unstable-shell, mongodb-10gen-unstable-tools, mongodb-enterprise-unstable, mongodb-enterprise-unstable-mongos, mongodb-enterprise-unstable-server, mongodb-enterprise-unstable-shell, mongodb-enterprise-unstable-tools, mongodb-org-unstable, mongodb-org-unstable-mongos, mongodb-org-unstable-shell, mongodb-org-unstable-tools, mongodb-org-unstable-server, mongodb-nightly, mongodb-nightly, mongodb-enterprise, mongodb-enterprise-mongos, mongodb-enterprise-server, mongodb-enterprise-shell, mongodb-enterprise-tools, mongodb-stable, mongodb18-10gen, mongodb20-10gen
Architecture: any
Depends: ${shlibs:Depends}, tzdata
Description: MongoDB sharded cluster query router
 MongoDB is built for scalability, performance and high availability, scaling from single server deployments to large, complex multi-site architectures. By leveraging in-memory computing, MongoDB provides high performance for both reads and writes. MongoDBs native replication and automated failover enable enterprise-grade reliability and operational flexibility.
 .
 MongoDB is an open-source database used by companies of all sizes, across all industries and for a wide variety of applications. It is an agile database that allows schemas to change quickly as applications evolve, while still providing the functionality developers expect from traditional databases, such as secondary indexes, a full query language and strict consistency.
 .
 MongoDB has a rich client ecosystem including hadoop integration, officially supported drivers for 10 programming languages and environments, as well as 40 drivers supported by the user community.
 .
 MongoDB features:
 * JSON Data Model with Dynamic Schemas
 * Auto-Sharding for Horizontal Scalability
 * Built-In Replication for High Availability
 * Rich Secondary Indexes, including geospatial
 * TTL indexes
 * Text Search
 * Aggregation Framework & Native MapReduce
 .
 This package contains mongos, the MongoDB sharded cluster query router.

Package: mongodb-org-tools
Conflicts: mongo-10gen, mongo-10gen-enterprise, mongo-10gen-enterprise-server, mongo-10gen-server, mongo-10gen-unstable, mongo-10gen-unstable-enterprise, mongo-10gen-unstable-enterprise-mongos, mongo-10gen-unstable-enterprise-server, mongo-10gen-unstable-enterprise-shell, mongo-10gen-unstable-enterprise-tools, mongo-10gen-unstable-mongos, mongo-10gen-unstable-server, mongo-10gen-unstable-shell, mongo-10gen-unstable-tools, mongo18-10gen, mongo18-10gen-server, mongo20-10gen, mongo20-10gen-server, mongodb, mongodb-server, mongodb-dev, mongodb-clients, mongodb-10gen, mongodb-10gen-enterprise, mongodb-10gen-unstable, mongodb-10gen-unstable-enterprise, mongodb-10gen-unstable-enterprise-mongos, mongodb-10gen-unstable-enterprise-server, mongodb-10gen-unstable-enterprise-shell, mongodb-10gen-unstable-enterprise-tools, mongodb-10gen-unstable-mongos, mongodb-10gen-unstable-server, mongodb-10gen-unstable-shell, mongodb-10gen-unstable-tools, mongodb-enterprise-unstable, mongodb-enterprise-unstable-mongos, mongodb-enterprise-unstable-server, mongodb-enterprise-unstable-shell, mongodb-enterprise-unstable-tools, mongodb-org-unstable, mongodb-org-unstable-mongos, mongodb-org-unstable-shell, mongodb-org-unstable-tools, mongodb-org-unstable-server, mongodb-nightly, mongodb-nightly, mongodb-enterprise, mongodb-enterprise-mongos, mongodb-enterprise-server, mongodb-enterprise-shell, mongodb-enterprise-tools, mongodb-stable, mongodb18-10gen, mongodb20-10gen
Architecture: any
Depends: mongodb-database-tools, mongodb-org-database-tools-extra
Description: MongoDB tools
 MongoDB is built for scalability, performance and high availability, scaling from single server deployments to large, complex multi-site architectures. By leveraging in-memory computing, MongoDB provides high performance for both reads and writes. MongoDBs native replication and automated failover enable enterprise-grade reliability and operational flexibility.
 .
 MongoDB is an open-source database used by companies of all sizes, across all industries and for a wide variety of applications. It is an agile database that allows schemas to change quickly as applications evolve, while still providing the functionality developers expect from traditional databases, such as secondary indexes, a full query language and strict consistency.
 .
 MongoDB has a rich client ecosystem including hadoop integration, officially supported drivers for 10 programming languages and environments, as well as 40 drivers supported by the user community.
 .
 MongoDB features:
 * JSON Data Model with Dynamic Schemas
 * Auto-Sharding for Horizontal Scalability
 * Built-In Replication for High Availability
 * Rich Secondary Indexes, including geospatial
 * TTL indexes
 * Text Search
 * Aggregation Framework & Native MapReduce
 .
 This metapackage exists to simplfy acquisition of both the database tools and the extra database tools.

Package: mongodb-org-database-tools-extra
Conflicts: mongo-10gen, mongo-10gen-enterprise, mongo-10gen-enterprise-server, mongo-10gen-server, mongo-10gen-unstable, mongo-10gen-unstable-enterprise, mongo-10gen-unstable-enterprise-mongos, mongo-10gen-unstable-enterprise-server, mongo-10gen-unstable-enterprise-shell, mongo-10gen-unstable-enterprise-tools, mongo-10gen-unstable-mongos, mongo-10gen-unstable-server, mongo-10gen-unstable-shell, mongo-10gen-unstable-tools, mongo18-10gen, mongo18-10gen-server, mongo20-10gen, mongo20-10gen-server, mongodb, mongodb-server, mongodb-dev, mongodb-clients, mongodb-10gen, mongodb-10gen-enterprise, mongodb-10gen-unstable, mongodb-10gen-unstable-enterprise, mongodb-10gen-unstable-enterprise-mongos, mongodb-10gen-unstable-enterprise-server, mongodb-10gen-unstable-enterprise-shell, mongodb-10gen-unstable-enterprise-tools, mongodb-10gen-unstable-mongos, mongodb-10gen-unstable-server, mongodb-10gen-unstable-shell, mongodb-10gen-unstable-tools, mongodb-enterprise-unstable, mongodb-enterprise-unstable-mongos, mongodb-enterprise-unstable-server, mongodb-enterprise-unstable-shell, mongodb-enterprise-unstable-tools, mongodb-org-unstable, mongodb-org-unstable-mongos, mongodb-org-unstable-shell, mongodb-org-unstable-tools, mongodb-org-unstable-server, mongodb-nightly, mongodb-nightly, mongodb-enterprise, mongodb-enterprise-mongos, mongodb-enterprise-server, mongodb-enterprise-shell, mongodb-enterprise-tools, mongodb-stable, mongodb18-10gen, mongodb20-10gen, mongodb-org-unstable-database-tools-extra, mongodb-enterprise-database-tools-extra, mongodb-enterprise-unstable-database-tools-extra
Architecture: any
Depends: ${shlibs:Depends}
Breaks: mongodb-org-tools (<= 4.2)
Replaces: mongodb-org-tools (<= 4.2)
Description: Extra MongoDB database tools
 MongoDB is built for scalability, performance and high availability, scaling from single server deployments to large, complex multi-site architectures. By leveraging in-memory computing, MongoDB provides high performance for both reads and writes. MongoDBs native replication and automated failover enable enterprise-grade reliability and operational flexibility.
 .
 MongoDB is an open-source database used by companies of all sizes, across all industries and for a wide variety of applications. It is an agile database that allows schemas to change quickly as applications evolve, while still providing the functionality developers expect from traditional databases, such as secondary indexes, a full query language and strict consistency.
 .
 MongoDB has a rich client ecosystem including hadoop integration, officially supported drivers for 10 programming languages and environments, as well as 40 drivers supported by the user community.
 .
 MongoDB features:
 * JSON Data Model with Dynamic Schemas
 * Auto-Sharding for Horizontal Scalability
 * Built-In Replication for High Availability
 * Rich Secondary Indexes, including geospatial
 * TTL indexes
 * Text Search
 * Aggregation Framework & Native MapReduce
 .
 This package contains extra database tools, like the Compass installer.

#!/usr/bin/make -f
# -*- makefile -*-
TOOLS=

# Uncomment this to turn on verbose mode.
export DH_VERBOSE=1


configure: configure-stamp
configure-stamp:
	dh_testdir

	touch configure-stamp


build: build-stamp

build-stamp: configure-stamp  
	dh_testdir

	# THE FOLLOWING LINE IS INTENTIONALLY COMMENTED. 
	# scons 
	#docbook-to-man debian/mongodb.sgml > mongodb.1
	echo -n > debian/mongodb-org-database-tools-extra.manpages
	for binary in ${TOOLS} ; \
	do \
	  echo debian/$$binary.1 >> debian/mongodb-org-database-tools-extra.manpages ; \
	done

	echo debian/mongo.1 > debian/mongodb-org-shell.manpages
	echo debian/mongod.1 > debian/mongodb-org-server.manpages
	echo debian/mongos.1 > debian/mongodb-org-mongos.manpages

	touch $@

clean: 
	dh_testdir
	dh_testroot
	rm -f build-stamp configure-stamp

	# FIXME: scons freaks out at the presence of target files
	# under debian/mongodb.
	#scons -c

	rm -f debian/*.manpages

	rm -rf $(CURDIR)/debian/mongodb-org
	rm -rf $(CURDIR)/debian/mongodb-org-shell
	rm -rf $(CURDIR)/debian/mongodb-org-server
	rm -rf $(CURDIR)/debian/mongodb-org-mongos
	rm -rf $(CURDIR)/debian/mongodb-org-database-tools-extra
	rm -f config.log
	rm -f mongo
	rm -f mongod
	rm -f install_compass
	rm -f .sconsign.dblite
	rm -f libmongoclient.a
	rm -rf client/*.o
	rm -rf tools/*.o
	rm -rf shell/*.o
	rm -rf .sconf_temp
	rm -f buildscripts/*.pyc 
	rm -f *.pyc
	rm -f buildinfo.cpp
	dh_clean debian/files

install: build
	dh_testdir
	dh_testroot
	dh_prep
	dh_installdirs

	# THE FOLLOWING LINE IS INTENTIONALLY COMMENTED.
	# scons --prefix=$(CURDIR)/debian/mongodb/usr install
	mkdir -p $(CURDIR)/debian/mongodb-org-shell/usr/bin
	mkdir -p $(CURDIR)/debian/mongodb-org-server/usr/bin
	mkdir -p $(CURDIR)/debian/mongodb-org-mongos/usr/bin
	mkdir -p $(CURDIR)/debian/mongodb-org-database-tools-extra/usr/bin
	cp -v $(CURDIR)/bin/mongo $(CURDIR)/debian/mongodb-org-shell/usr/bin
	cp -v $(CURDIR)/bin/mongod $(CURDIR)/debian/mongodb-org-server/usr/bin
	cp -v $(CURDIR)/bin/mongos $(CURDIR)/debian/mongodb-org-mongos/usr/bin
	cp -v $(CURDIR)/bin/install_compass $(CURDIR)/debian/mongodb-org-database-tools-extra/usr/bin

	for binary in ${TOOLS} ; \
	do \
	  cp -v $(CURDIR)/bin/$$binary $(CURDIR)/debian/mongodb-org-database-tools-extra/usr/bin ; \
	done

	mkdir -p $(CURDIR)/debian/mongodb-org-server/etc
	cp $(CURDIR)/debian/mongod.conf $(CURDIR)/debian/mongodb-org-server/etc/mongod.conf 

	mkdir -p $(CURDIR)/debian/mongodb-org-shell/usr/share/lintian/overrides/
	mkdir -p $(CURDIR)/debian/mongodb-org-server/usr/share/lintian/overrides/
	mkdir -p $(CURDIR)/debian/mongodb-org-mongos/usr/share/lintian/overrides/
	mkdir -p $(CURDIR)/debian/mongodb-org-database-tools-extra/usr/share/lintian/overrides/
	install -m 644 $(CURDIR)/debian/lintian-overrides 		$(CURDIR)/debian/mongodb-org-shell/usr/share/lintian/overrides/mongodb-org-shell
	install -m 644 $(CURDIR)/debian/lintian-overrides 		$(CURDIR)/debian/mongodb-org-server/usr/share/lintian/overrides/mongodb-org-server
	install -m 644 $(CURDIR)/debian/lintian-overrides 		$(CURDIR)/debian/mongodb-org-mongos/usr/share/lintian/overrides/mongodb-org-mongos
	install -m 644 $(CURDIR)/debian/lintian-overrides 		$(CURDIR)/debian/mongodb-org-database-tools-extra/usr/share/lintian/overrides/mongodb-org-database-tools-extra
	install -m 644 $(CURDIR)/debian/substvars				$(CURDIR)/debian/mongodb-org-database.substvars
	install -m 644 $(CURDIR)/debian/substvars				$(CURDIR)/debian/mongodb-org-shell.substvars
	install -m 644 $(CURDIR)/debian/substvars				$(CURDIR)/debian/mongodb-org-server.substvars
	install -m 644 $(CURDIR)/debian/substvars				$(CURDIR)/debian/mongodb-org-mongos.substvars
	install -m 644 $(CURDIR)/debian/substvars				$(CURDIR)/debian/mongodb-org-database-tools-extra.substvars

# Build architecture-independent files here.
binary-indep: build install
# We have nothing to do by default.

# Build architecture-dependent files here.
binary-arch: build install
	dh_testdir
	dh_testroot
	dh_installchangelogs 
	dh_installdocs
	dh_installexamples
#	dh_install
#	dh_installmenu
#	dh_installdebconf	
#	dh_installlogrotate
#	dh_installemacsen
#	dh_installpam
#	dh_installmime
	dh_installinit -pmongodb-org-server --name=mongod
#	dh_installinfo
	dh_installman
	dh_link
# Appears to be broken on Ubuntu 11.10...?
#	dh_strip
	dh_compress
	dh_fixperms
	dh_installdeb
	dh_shlibdeps
	dh_gencontrol
	dh_md5sums
	dh_builddeb

binary: binary-indep binary-arch
.PHONY: build clean binary-indep binary-arch binary install configure

LICENSE-Community.txt
README
THIRD-PARTY-NOTICES
MPL-2

#!/bin/sh
# postinst script for mongodb
#
# see: dh_installdeb(1)

set -e

# summary of how this script can be called:
#        * <postinst> `configure' <most-recently-configured-version>
#        * <old-postinst> `abort-upgrade' <new version>
#        * <conflictor's-postinst> `abort-remove' `in-favour' <package>
#          <new-version>
#        * <postinst> `abort-remove'
#        * <deconfigured's-postinst> `abort-deconfigure' `in-favour'
#          <failed-install-package> <version> `removing'
#          <conflicting-package> <version>
# for details, see http://www.debian.org/doc/debian-policy/ or
# the debian-policy package


case "$1" in
    configure)
        # create a mongodb group and user
        if ! getent passwd mongodb >/dev/null 2>&1; then
            adduser --system --no-create-home mongodb
            addgroup --system mongodb
            adduser mongodb mongodb
        fi

        # create db -- note: this should agree with dbpath in mongod.conf
        if [ ! -d /var/lib/mongodb ]; then
            mkdir -p /var/lib/mongodb
            chown mongodb:mongodb /var/lib/mongodb
        fi

        # create logdir -- note: this should agree with logpath in mongod.conf
        if [ ! -d /var/log/mongodb ]; then
            mkdir -p /var/log/mongodb
            chown mongodb:mongodb /var/log/mongodb
        fi

        # Check for changes to the service file, but ignore errors when
        # systemd is not running.
        if $(command systemctl --help >/dev/null); then
            systemctl daemon-reload || true
        fi
    ;;

    abort-upgrade|abort-remove|abort-deconfigure)
    ;;

    *)
        echo "postinst called with unknown argument \`$1'" >&2
        exit 1
    ;;
esac

# dh_installdeb will replace this with shell code automatically
# generated by other debhelper scripts.

#DEBHELPER#

exit 0



Source: mongodb-org-unstable
Section: database
Priority: optional
Maintainer: MongoDB Packaging <packaging@mongodb.com>
Build-Depends: 
Standards-Version: 3.8.0
Homepage: http://www.mongodb.org

Package: mongodb-org-unstable-database
Conflicts: mongo-10gen, mongo-10gen-enterprise, mongo-10gen-enterprise-server, mongo-10gen-server, mongo-10gen-unstable, mongo-10gen-unstable-enterprise, mongo-10gen-unstable-enterprise-mongos, mongo-10gen-unstable-enterprise-server, mongo-10gen-unstable-enterprise-shell, mongo-10gen-unstable-enterprise-tools, mongo-10gen-unstable-mongos, mongo-10gen-unstable-server, mongo-10gen-unstable-shell, mongo-10gen-unstable-tools, mongo18-10gen, mongo18-10gen-server, mongo20-10gen, mongo20-10gen-server, mongodb, mongodb-server, mongodb-dev, mongodb-clients, mongodb-10gen, mongodb-10gen-enterprise, mongodb-10gen-unstable, mongodb-10gen-unstable-enterprise, mongodb-10gen-unstable-enterprise-mongos, mongodb-10gen-unstable-enterprise-server, mongodb-10gen-unstable-enterprise-shell, mongodb-10gen-unstable-enterprise-tools, mongodb-10gen-unstable-mongos, mongodb-10gen-unstable-server, mongodb-10gen-unstable-shell, mongodb-10gen-unstable-tools, mongodb-enterprise, mongodb-enterprise-mongos, mongodb-enterprise-server, mongodb-enterprise-shell, mongodb-enterprise-tools, mongodb-nightly, mongodb-org, mongodb-org-mongos, mongodb-org-server, mongodb-org-shell, mongodb-org-tools, mongodb-enterprise-unstable, mongodb-enterprise-unstable-mongos, mongodb-enterprise-unstable-server, mongodb-enterprise-unstable-shell, mongodb-enterprise-unstable-tools, mongodb-stable, mongodb18-10gen, mongodb20-10gen
Architecture: any
Depends: mongodb-org-unstable-shell, mongodb-org-unstable-server, mongodb-org-unstable-mongos, mongodb-org-unstable-database-tools-extra
Description: MongoDB open source document-oriented database system (metapackage)
 MongoDB is built for scalability, performance and high availability, scaling from single server deployments to large, complex multi-site architectures. By leveraging in-memory computing, MongoDB provides high performance for both reads and writes. MongoDBs native replication and automated failover enable enterprise-grade reliability and operational flexibility.
 .
 MongoDB is an open-source database used by companies of all sizes, across all industries and for a wide variety of applications. It is an agile database that allows schemas to change quickly as applications evolve, while still providing the functionality developers expect from traditional databases, such as secondary indexes, a full query language and strict consistency.
 .
 MongoDB has a rich client ecosystem including hadoop integration, officially supported drivers for 10 programming languages and environments, as well as 40 drivers supported by the user community.
 .
 MongoDB features:
 * JSON Data Model with Dynamic Schemas
 * Auto-Sharding for Horizontal Scalability
 * Built-In Replication for High Availability
 * Rich Secondary Indexes, including geospatial
 * TTL indexes
 * Text Search
 * Aggregation Framework & Native MapReduce
 .
 This metapackage will install the mongo shell, import/export tools, other client utilities, server software, default configuration, and init.d scripts.

Package: mongodb-org-unstable
Conflicts: mongo-10gen, mongo-10gen-enterprise, mongo-10gen-enterprise-server, mongo-10gen-server, mongo-10gen-unstable, mongo-10gen-unstable-enterprise, mongo-10gen-unstable-enterprise-mongos, mongo-10gen-unstable-enterprise-server, mongo-10gen-unstable-enterprise-shell, mongo-10gen-unstable-enterprise-tools, mongo-10gen-unstable-mongos, mongo-10gen-unstable-server, mongo-10gen-unstable-shell, mongo-10gen-unstable-tools, mongo18-10gen, mongo18-10gen-server, mongo20-10gen, mongo20-10gen-server, mongodb, mongodb-server, mongodb-dev, mongodb-clients, mongodb-10gen, mongodb-10gen-enterprise, mongodb-10gen-unstable, mongodb-10gen-unstable-enterprise, mongodb-10gen-unstable-enterprise-mongos, mongodb-10gen-unstable-enterprise-server, mongodb-10gen-unstable-enterprise-shell, mongodb-10gen-unstable-enterprise-tools, mongodb-10gen-unstable-mongos, mongodb-10gen-unstable-server, mongodb-10gen-unstable-shell, mongodb-10gen-unstable-tools, mongodb-enterprise, mongodb-enterprise-mongos, mongodb-enterprise-server, mongodb-enterprise-shell, mongodb-enterprise-tools, mongodb-nightly, mongodb-org, mongodb-org-mongos, mongodb-org-server, mongodb-org-shell, mongodb-org-tools, mongodb-enterprise-unstable, mongodb-enterprise-unstable-mongos, mongodb-enterprise-unstable-server, mongodb-enterprise-unstable-shell, mongodb-enterprise-unstable-tools, mongodb-stable, mongodb18-10gen, mongodb20-10gen
Architecture: any
Depends: mongodb-org-unstable-database, mongodb-org-unstable-tools, mongodb-mongosh
Description: MongoDB open source document-oriented database system (metapackage)
 MongoDB is built for scalability, performance and high availability, scaling from single server deployments to large, complex multi-site architectures. By leveraging in-memory computing, MongoDB provides high performance for both reads and writes. MongoDBs native replication and automated failover enable enterprise-grade reliability and operational flexibility.
 .
 MongoDB is an open-source database used by companies of all sizes, across all industries and for a wide variety of applications. It is an agile database that allows schemas to change quickly as applications evolve, while still providing the functionality developers expect from traditional databases, such as secondary indexes, a full query language and strict consistency.
 .
 MongoDB has a rich client ecosystem including hadoop integration, officially supported drivers for 10 programming languages and environments, as well as 40 drivers supported by the user community.
 .
 MongoDB features:
 * JSON Data Model with Dynamic Schemas
 * Auto-Sharding for Horizontal Scalability
 * Built-In Replication for High Availability
 * Rich Secondary Indexes, including geospatial
 * TTL indexes
 * Text Search
 * Aggregation Framework & Native MapReduce
 .
 This metapackage will install the mongo shell, import/export tools, other client utilities, server software, default configuration, and init.d scripts.

Package: mongodb-org-unstable-shell
Conflicts: mongo-10gen, mongo-10gen-enterprise, mongo-10gen-enterprise-server, mongo-10gen-server, mongo-10gen-unstable, mongo-10gen-unstable-enterprise, mongo-10gen-unstable-enterprise-mongos, mongo-10gen-unstable-enterprise-server, mongo-10gen-unstable-enterprise-shell, mongo-10gen-unstable-enterprise-tools, mongo-10gen-unstable-mongos, mongo-10gen-unstable-server, mongo-10gen-unstable-shell, mongo-10gen-unstable-tools, mongo18-10gen, mongo18-10gen-server, mongo20-10gen, mongo20-10gen-server, mongodb, mongodb-server, mongodb-dev, mongodb-clients, mongodb-10gen, mongodb-10gen-enterprise, mongodb-10gen-unstable, mongodb-10gen-unstable-enterprise, mongodb-10gen-unstable-enterprise-mongos, mongodb-10gen-unstable-enterprise-server, mongodb-10gen-unstable-enterprise-shell, mongodb-10gen-unstable-enterprise-tools, mongodb-10gen-unstable-mongos, mongodb-10gen-unstable-server, mongodb-10gen-unstable-shell, mongodb-10gen-unstable-tools, mongodb-enterprise, mongodb-enterprise-mongos, mongodb-enterprise-server, mongodb-enterprise-shell, mongodb-enterprise-tools, mongodb-nightly, mongodb-org, mongodb-org-mongos, mongodb-org-server, mongodb-org-shell, mongodb-org-tools, mongodb-enterprise-unstable, mongodb-enterprise-unstable-mongos, mongodb-enterprise-unstable-server, mongodb-enterprise-unstable-shell, mongodb-enterprise-unstable-tools, mongodb-stable, mongodb18-10gen, mongodb20-10gen
Architecture: any
Depends: ${shlibs:Depends}
Description: MongoDB shell client
 MongoDB is built for scalability, performance and high availability, scaling from single server deployments to large, complex multi-site architectures. By leveraging in-memory computing, MongoDB provides high performance for both reads and writes. MongoDBs native replication and automated failover enable enterprise-grade reliability and operational flexibility.
 .
 MongoDB is an open-source database used by companies of all sizes, across all industries and for a wide variety of applications. It is an agile database that allows schemas to change quickly as applications evolve, while still providing the functionality developers expect from traditional databases, such as secondary indexes, a full query language and strict consistency.
 .
 MongoDB has a rich client ecosystem including hadoop integration, officially supported drivers for 10 programming languages and environments, as well as 40 drivers supported by the user community.
 .
 MongoDB features:
 * JSON Data Model with Dynamic Schemas
 * Auto-Sharding for Horizontal Scalability
 * Built-In Replication for High Availability
 * Rich Secondary Indexes, including geospatial
 * TTL indexes
 * Text Search
 * Aggregation Framework & Native MapReduce
 .
 This package contains the mongo shell.

Package: mongodb-org-unstable-server
Conflicts: mongo-10gen, mongo-10gen-enterprise, mongo-10gen-enterprise-server, mongo-10gen-server, mongo-10gen-unstable, mongo-10gen-unstable-enterprise, mongo-10gen-unstable-enterprise-mongos, mongo-10gen-unstable-enterprise-server, mongo-10gen-unstable-enterprise-shell, mongo-10gen-unstable-enterprise-tools, mongo-10gen-unstable-mongos, mongo-10gen-unstable-server, mongo-10gen-unstable-shell, mongo-10gen-unstable-tools, mongo18-10gen, mongo18-10gen-server, mongo20-10gen, mongo20-10gen-server, mongodb, mongodb-server, mongodb-dev, mongodb-clients, mongodb-10gen, mongodb-10gen-enterprise, mongodb-10gen-unstable, mongodb-10gen-unstable-enterprise, mongodb-10gen-unstable-enterprise-mongos, mongodb-10gen-unstable-enterprise-server, mongodb-10gen-unstable-enterprise-shell, mongodb-10gen-unstable-enterprise-tools, mongodb-10gen-unstable-mongos, mongodb-10gen-unstable-server, mongodb-10gen-unstable-shell, mongodb-10gen-unstable-tools, mongodb-enterprise, mongodb-enterprise-mongos, mongodb-enterprise-server, mongodb-enterprise-shell, mongodb-enterprise-tools, mongodb-nightly, mongodb-org, mongodb-org-mongos, mongodb-org-server, mongodb-org-shell, mongodb-org-tools, mongodb-enterprise-unstable, mongodb-enterprise-unstable-mongos, mongodb-enterprise-unstable-server, mongodb-enterprise-unstable-shell, mongodb-enterprise-unstable-tools, mongodb-stable, mongodb18-10gen, mongodb20-10gen
Architecture: any
Depends: ${shlibs:Depends}, adduser, tzdata
Description: MongoDB database server
 MongoDB is built for scalability, performance and high availability, scaling from single server deployments to large, complex multi-site architectures. By leveraging in-memory computing, MongoDB provides high performance for both reads and writes. MongoDBs native replication and automated failover enable enterprise-grade reliability and operational flexibility.
 .
 MongoDB is an open-source database used by companies of all sizes, across all industries and for a wide variety of applications. It is an agile database that allows schemas to change quickly as applications evolve, while still providing the functionality developers expect from traditional databases, such as secondary indexes, a full query language and strict consistency.
 .
 MongoDB has a rich client ecosystem including hadoop integration, officially supported drivers for 10 programming languages and environments, as well as 40 drivers supported by the user community.
 .
 MongoDB features:
 * JSON Data Model with Dynamic Schemas
 * Auto-Sharding for Horizontal Scalability
 * Built-In Replication for High Availability
 * Rich Secondary Indexes, including geospatial
 * TTL indexes
 * Text Search
 * Aggregation Framework & Native MapReduce
 .
 This package contains the MongoDB server software, default configuration files, and init.d scripts.

Package: mongodb-org-unstable-mongos
Conflicts: mongo-10gen, mongo-10gen-enterprise, mongo-10gen-enterprise-server, mongo-10gen-server, mongo-10gen-unstable, mongo-10gen-unstable-enterprise, mongo-10gen-unstable-enterprise-mongos, mongo-10gen-unstable-enterprise-server, mongo-10gen-unstable-enterprise-shell, mongo-10gen-unstable-enterprise-tools, mongo-10gen-unstable-mongos, mongo-10gen-unstable-server, mongo-10gen-unstable-shell, mongo-10gen-unstable-tools, mongo18-10gen, mongo18-10gen-server, mongo20-10gen, mongo20-10gen-server, mongodb, mongodb-server, mongodb-dev, mongodb-clients, mongodb-10gen, mongodb-10gen-enterprise, mongodb-10gen-unstable, mongodb-10gen-unstable-enterprise, mongodb-10gen-unstable-enterprise-mongos, mongodb-10gen-unstable-enterprise-server, mongodb-10gen-unstable-enterprise-shell, mongodb-10gen-unstable-enterprise-tools, mongodb-10gen-unstable-mongos, mongodb-10gen-unstable-server, mongodb-10gen-unstable-shell, mongodb-10gen-unstable-tools, mongodb-enterprise, mongodb-enterprise-mongos, mongodb-enterprise-server, mongodb-enterprise-shell, mongodb-enterprise-tools, mongodb-nightly, mongodb-org, mongodb-org-mongos, mongodb-org-server, mongodb-org-shell, mongodb-org-tools, mongodb-enterprise-unstable, mongodb-enterprise-unstable-mongos, mongodb-enterprise-unstable-server, mongodb-enterprise-unstable-shell, mongodb-enterprise-unstable-tools, mongodb-stable, mongodb18-10gen, mongodb20-10gen
Architecture: any
Depends: ${shlibs:Depends}, tzdata
Description: MongoDB sharded cluster query router
 MongoDB is built for scalability, performance and high availability, scaling from single server deployments to large, complex multi-site architectures. By leveraging in-memory computing, MongoDB provides high performance for both reads and writes. MongoDBs native replication and automated failover enable enterprise-grade reliability and operational flexibility.
 .
 MongoDB is an open-source database used by companies of all sizes, across all industries and for a wide variety of applications. It is an agile database that allows schemas to change quickly as applications evolve, while still providing the functionality developers expect from traditional databases, such as secondary indexes, a full query language and strict consistency.
 .
 MongoDB has a rich client ecosystem including hadoop integration, officially supported drivers for 10 programming languages and environments, as well as 40 drivers supported by the user community.
 .
 MongoDB features:
 * JSON Data Model with Dynamic Schemas
 * Auto-Sharding for Horizontal Scalability
 * Built-In Replication for High Availability
 * Rich Secondary Indexes, including geospatial
 * TTL indexes
 * Text Search
 * Aggregation Framework & Native MapReduce
 .
 This package contains mongos, the MongoDB sharded cluster query router.

Package: mongodb-org-unstable-tools
Conflicts: mongo-10gen, mongo-10gen-enterprise, mongo-10gen-enterprise-server, mongo-10gen-server, mongo-10gen-unstable, mongo-10gen-unstable-enterprise, mongo-10gen-unstable-enterprise-mongos, mongo-10gen-unstable-enterprise-server, mongo-10gen-unstable-enterprise-shell, mongo-10gen-unstable-enterprise-tools, mongo-10gen-unstable-mongos, mongo-10gen-unstable-server, mongo-10gen-unstable-shell, mongo-10gen-unstable-tools, mongo18-10gen, mongo18-10gen-server, mongo20-10gen, mongo20-10gen-server, mongodb, mongodb-server, mongodb-dev, mongodb-clients, mongodb-10gen, mongodb-10gen-enterprise, mongodb-10gen-unstable, mongodb-10gen-unstable-enterprise, mongodb-10gen-unstable-enterprise-mongos, mongodb-10gen-unstable-enterprise-server, mongodb-10gen-unstable-enterprise-shell, mongodb-10gen-unstable-enterprise-tools, mongodb-10gen-unstable-mongos, mongodb-10gen-unstable-server, mongodb-10gen-unstable-shell, mongodb-10gen-unstable-tools, mongodb-enterprise, mongodb-enterprise-mongos, mongodb-enterprise-server, mongodb-enterprise-shell, mongodb-enterprise-tools, mongodb-nightly, mongodb-org, mongodb-org-mongos, mongodb-org-server, mongodb-org-shell, mongodb-org-tools, mongodb-enterprise-unstable, mongodb-enterprise-unstable-mongos, mongodb-enterprise-unstable-server, mongodb-enterprise-unstable-shell, mongodb-enterprise-unstable-tools, mongodb-stable, mongodb18-10gen, mongodb20-10gen
Architecture: any
Depends: mongodb-database-tools, mongodb-org-unstable-database-tools-extra
Description: MongoDB tools
 MongoDB is built for scalability, performance and high availability, scaling from single server deployments to large, complex multi-site architectures. By leveraging in-memory computing, MongoDB provides high performance for both reads and writes. MongoDBs native replication and automated failover enable enterprise-grade reliability and operational flexibility.
 .
 MongoDB is an open-source database used by companies of all sizes, across all industries and for a wide variety of applications. It is an agile database that allows schemas to change quickly as applications evolve, while still providing the functionality developers expect from traditional databases, such as secondary indexes, a full query language and strict consistency.
 .
 MongoDB has a rich client ecosystem including hadoop integration, officially supported drivers for 10 programming languages and environments, as well as 40 drivers supported by the user community.
 .
 MongoDB features:
 * JSON Data Model with Dynamic Schemas
 * Auto-Sharding for Horizontal Scalability
 * Built-In Replication for High Availability
 * Rich Secondary Indexes, including geospatial
 * TTL indexes
 * Text Search
 * Aggregation Framework & Native MapReduce
 .
 This metapackage exists to simplfy acquisition of both the database tools and the extra database tools.

Package: mongodb-org-unstable-database-tools-extra
Conflicts: mongo-10gen, mongo-10gen-enterprise, mongo-10gen-enterprise-server, mongo-10gen-server, mongo-10gen-unstable, mongo-10gen-unstable-enterprise, mongo-10gen-unstable-enterprise-mongos, mongo-10gen-unstable-enterprise-server, mongo-10gen-unstable-enterprise-shell, mongo-10gen-unstable-enterprise-tools, mongo-10gen-unstable-mongos, mongo-10gen-unstable-server, mongo-10gen-unstable-shell, mongo-10gen-unstable-tools, mongo18-10gen, mongo18-10gen-server, mongo20-10gen, mongo20-10gen-server, mongodb, mongodb-server, mongodb-dev, mongodb-clients, mongodb-10gen, mongodb-10gen-enterprise, mongodb-10gen-unstable, mongodb-10gen-unstable-enterprise, mongodb-10gen-unstable-enterprise-mongos, mongodb-10gen-unstable-enterprise-server, mongodb-10gen-unstable-enterprise-shell, mongodb-10gen-unstable-enterprise-tools, mongodb-10gen-unstable-mongos, mongodb-10gen-unstable-server, mongodb-10gen-unstable-shell, mongodb-10gen-unstable-tools, mongodb-enterprise, mongodb-enterprise-mongos, mongodb-enterprise-server, mongodb-enterprise-shell, mongodb-enterprise-tools, mongodb-nightly, mongodb-org, mongodb-org-mongos, mongodb-org-server, mongodb-org-shell, mongodb-org-tools, mongodb-enterprise-unstable, mongodb-enterprise-unstable-mongos, mongodb-enterprise-unstable-server, mongodb-enterprise-unstable-shell, mongodb-enterprise-unstable-tools, mongodb-stable, mongodb18-10gen, mongodb20-10gen, mongodb-org-database-tools-extra, mongodb-enterprise-database-tools-extra, mongodb-enterprise-unstable-database-tools-extra
Architecture: any
Depends: ${shlibs:Depends}
Breaks: mongodb-org-unstable-tools (<= 4.2)
Replaces: mongodb-org-unstable-tools (<= 4.2)
Description: Extra MongoDB database tools
 MongoDB is built for scalability, performance and high availability, scaling from single server deployments to large, complex multi-site architectures. By leveraging in-memory computing, MongoDB provides high performance for both reads and writes. MongoDBs native replication and automated failover enable enterprise-grade reliability and operational flexibility.
 .
 MongoDB is an open-source database used by companies of all sizes, across all industries and for a wide variety of applications. It is an agile database that allows schemas to change quickly as applications evolve, while still providing the functionality developers expect from traditional databases, such as secondary indexes, a full query language and strict consistency.
 .
 MongoDB has a rich client ecosystem including hadoop integration, officially supported drivers for 10 programming languages and environments, as well as 40 drivers supported by the user community.
 .
 MongoDB features:
 * JSON Data Model with Dynamic Schemas
 * Auto-Sharding for Horizontal Scalability
 * Built-In Replication for High Availability
 * Rich Secondary Indexes, including geospatial
 * TTL indexes
 * Text Search
 * Aggregation Framework & Native MapReduce
 .
 This package contains extra database tools, like the Compass installer.

#!/usr/bin/make -f
# -*- makefile -*-
TOOLS=

# Uncomment this to turn on verbose mode.
export DH_VERBOSE=1


configure: configure-stamp
configure-stamp:
	dh_testdir

	touch configure-stamp


build: build-stamp

build-stamp: configure-stamp
	dh_testdir

	# THE FOLLOWING LINE IS INTENTIONALLY COMMENTED.
	# scons
	#docbook-to-man debian/mongodb.sgml > mongodb.1

	echo -n > debian/mongodb-org-unstable-database-tools-extra.manpages
	for binary in ${TOOLS} ; \
	do \
	  echo debian/$$binary.1 >> debian/mongodb-org-unstable-database-tools-extra.manpages ; \
	done

	echo debian/mongo.1 > debian/mongodb-org-unstable-shell.manpages
	echo debian/mongod.1 > debian/mongodb-org-unstable-server.manpages
	echo debian/mongos.1 > debian/mongodb-org-unstable-mongos.manpages

	touch $@

clean:
	dh_testdir
	dh_testroot
	rm -f build-stamp configure-stamp

	# FIXME: scons freaks out at the presence of target files
	# under debian/mongodb.
	#scons -c

	rm -f debian/*.manpages

	rm -rf $(CURDIR)/debian/mongodb-org-unstable
	rm -rf $(CURDIR)/debian/mongodb-org-unstable-shell
	rm -rf $(CURDIR)/debian/mongodb-org-unstable-server
	rm -rf $(CURDIR)/debian/mongodb-org-unstable-mongos
	rm -rf $(CURDIR)/debian/mongodb-org-unstable-database-tools-extra
	rm -f config.log
	rm -f mongo
	rm -f mongod
	rm -f install_compass
	rm -f .sconsign.dblite
	rm -f libmongoclient.a
	rm -rf client/*.o
	rm -rf tools/*.o
	rm -rf shell/*.o
	rm -rf .sconf_temp
	rm -f buildscripts/*.pyc
	rm -f *.pyc
	rm -f buildinfo.cpp
	dh_clean debian/files

install: build
	dh_testdir
	dh_testroot
	dh_prep
	dh_installdirs

	# THE FOLLOWING LINE IS INTENTIONALLY COMMENTED.
	# scons --prefix=$(CURDIR)/debian/mongodb/usr install
	mkdir -p $(CURDIR)/debian/mongodb-org-unstable-shell/usr/bin
	mkdir -p $(CURDIR)/debian/mongodb-org-unstable-server/usr/bin
	mkdir -p $(CURDIR)/debian/mongodb-org-unstable-mongos/usr/bin
	mkdir -p $(CURDIR)/debian/mongodb-org-unstable-database-tools-extra/usr/bin
	cp -v $(CURDIR)/bin/mongo $(CURDIR)/debian/mongodb-org-unstable-shell/usr/bin
	cp -v $(CURDIR)/bin/mongod $(CURDIR)/debian/mongodb-org-unstable-server/usr/bin
	cp -v $(CURDIR)/bin/mongos $(CURDIR)/debian/mongodb-org-unstable-mongos/usr/bin
	cp -v $(CURDIR)/bin/install_compass $(CURDIR)/debian/mongodb-org-unstable-database-tools-extra/usr/bin

	for binary in ${TOOLS} ; \
	do \
	  cp -v $(CURDIR)/bin/$$binary $(CURDIR)/debian/mongodb-org-unstable-database-tools-extra/usr/bin ; \
	done

	mkdir -p $(CURDIR)/debian/mongodb-org-unstable-server/etc
	cp $(CURDIR)/debian/mongod.conf $(CURDIR)/debian/mongodb-org-unstable-server/etc/mongod.conf

	mkdir -p $(CURDIR)/debian/mongodb-org-unstable-shell/usr/share/lintian/overrides/
	mkdir -p $(CURDIR)/debian/mongodb-org-unstable-server/usr/share/lintian/overrides/
	mkdir -p $(CURDIR)/debian/mongodb-org-unstable-mongos/usr/share/lintian/overrides/
	mkdir -p $(CURDIR)/debian/mongodb-org-unstable-database-tools-extra/usr/share/lintian/overrides/
	install -m 644 $(CURDIR)/debian/lintian-overrides 		$(CURDIR)/debian/mongodb-org-unstable-shell/usr/share/lintian/overrides/mongodb-org-unstable-shell
	install -m 644 $(CURDIR)/debian/lintian-overrides 		$(CURDIR)/debian/mongodb-org-unstable-server/usr/share/lintian/overrides/mongodb-org-unstable-server
	install -m 644 $(CURDIR)/debian/lintian-overrides 		$(CURDIR)/debian/mongodb-org-unstable-mongos/usr/share/lintian/overrides/mongodb-org-unstable-mongos
	install -m 644 $(CURDIR)/debian/lintian-overrides 		$(CURDIR)/debian/mongodb-org-unstable-database-tools-extra/usr/share/lintian/overrides/mongodb-org-unstable-database-tools-extra
	install -m 644 $(CURDIR)/debian/substvars				$(CURDIR)/debian/mongodb-org-unstable-database.substvars
	install -m 644 $(CURDIR)/debian/substvars				$(CURDIR)/debian/mongodb-org-unstable-shell.substvars
	install -m 644 $(CURDIR)/debian/substvars				$(CURDIR)/debian/mongodb-org-unstable-server.substvars
	install -m 644 $(CURDIR)/debian/substvars				$(CURDIR)/debian/mongodb-org-unstable-mongos.substvars
	install -m 644 $(CURDIR)/debian/substvars				$(CURDIR)/debian/mongodb-org-unstable-database-tools-extra.substvars

# Build architecture-independent files here.
binary-indep: build install
# We have nothing to do by default.

# Build architecture-dependent files here.
binary-arch: build install
	dh_testdir
	dh_testroot
	dh_installchangelogs
	dh_installdocs
	dh_installexamples
#	dh_install
#	dh_installmenu
#	dh_installdebconf
#	dh_installlogrotate
#	dh_installemacsen
#	dh_installpam
#	dh_installmime
	dh_installinit -pmongodb-org-unstable-server --name=mongod
#	dh_installinfo
	dh_installman
	dh_link
# Appears to be broken on Ubuntu 11.10...?
#	dh_strip
	dh_compress
	dh_fixperms
	dh_installdeb
	dh_shlibdeps
	dh_gencontrol
	dh_md5sums
	dh_builddeb

binary: binary-indep binary-arch
.PHONY: build clean binary-indep binary-arch binary install configure

LICENSE-Community.txt
README
THIRD-PARTY-NOTICES
MPL-2

#!/bin/sh
# postinst script for mongodb
#
# see: dh_installdeb(1)

set -e

# summary of how this script can be called:
#        * <postinst> `configure' <most-recently-configured-version>
#        * <old-postinst> `abort-upgrade' <new version>
#        * <conflictor's-postinst> `abort-remove' `in-favour' <package>
#          <new-version>
#        * <postinst> `abort-remove'
#        * <deconfigured's-postinst> `abort-deconfigure' `in-favour'
#          <failed-install-package> <version> `removing'
#          <conflicting-package> <version>
# for details, see http://www.debian.org/doc/debian-policy/ or
# the debian-policy package


case "$1" in
    configure)
        # create a mongodb group and user
        if ! getent passwd mongodb >/dev/null 2>&1; then
            adduser --system --no-create-home mongodb
            addgroup --system mongodb
            adduser mongodb mongodb
        fi

        # create db -- note: this should agree with dbpath in mongod.conf
        if [ ! -d /var/lib/mongodb ]; then
            mkdir -p /var/lib/mongodb
            chown mongodb:mongodb /var/lib/mongodb
        fi

        # create logdir -- note: this should agree with logpath in mongod.conf
        if [ ! -d /var/log/mongodb ]; then
            mkdir -p /var/log/mongodb
            chown mongodb:mongodb /var/log/mongodb
        fi

        # Check for changes to the service file, but ignore errors when
        # systemd is not running.
        if $(command systemctl --help >/dev/null); then
            systemctl daemon-reload || true
        fi
    ;;

    abort-upgrade|abort-remove|abort-deconfigure)
    ;;

    *)
        echo "postinst called with unknown argument \`$1'" >&2
        exit 1
    ;;
esac

# dh_installdeb will replace this with shell code automatically
# generated by other debhelper scripts.

#DEBHELPER#

exit 0



.\" Man page generated from reStructuredText.
.
.TH "MONGODB-PARAMETERS" "5" "Jun 23, 2020" "4.4" "mongodb-manual"
.SH NAME
mongodb-parameters \- MongoDB setParameter Options
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.SS On this page
.INDENT 0.0
.IP \(bu 2
\fI\%Synopsis\fP
.IP \(bu 2
\fI\%Parameters\fP
.INDENT 2.0
.IP \(bu 2
\fI\%Authentication Parameters\fP
.IP \(bu 2
\fI\%General Parameters\fP
.IP \(bu 2
\fI\%Logging Parameters\fP
.IP \(bu 2
\fI\%Diagnostic Parameters\fP
.IP \(bu 2
\fI\%Logical Session Parameters\fP
.IP \(bu 2
\fI\%Replication Parameters\fP
.IP \(bu 2
\fI\%Sharding Parameters\fP
.IP \(bu 2
\fI\%Storage Parameters\fP
.IP \(bu 2
\fI\%WiredTiger Parameters\fP
.IP \(bu 2
\fI\%Auditing Parameters\fP
.IP \(bu 2
\fI\%Transaction Parameters\fP
.UNINDENT
.UNINDENT
.SH SYNOPSIS
.sp
MongoDB provides a number of configuration options that you can set
using:
.INDENT 0.0
.IP \(bu 2
the \fBsetParameter\fP command:
.INDENT 2.0
.INDENT 3.5
.sp
.nf
.ft C
db.adminCommand( { setParameter: 1, <parameter>: <value>  } )
.ft P
.fi
.UNINDENT
.UNINDENT
.IP \(bu 2
the \fBsetParameter\fP configuration setting:
.INDENT 2.0
.INDENT 3.5
.sp
.nf
.ft C
setParameter:
   <parameter1>: <value1>
   ...
.ft P
.fi
.UNINDENT
.UNINDENT
.IP \(bu 2
the \fB\-\-setParameter\fP command\-line option for \fBmongod\fP
and \fBmongos\fP:
.INDENT 2.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter <parameter>=<value>
mongos \-\-setParameter <parameter>=<value>
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.sp
For additional configuration options, see
/reference/configuration\-options, \fBmongod\fP and
\fBmongos\fP\&.
.SH PARAMETERS
.SS Authentication Parameters
.INDENT 0.0
.TP
.B authenticationMechanisms
Changed in version 4.0: Remove support for the deprecated \fBMONGODB\-CR\fP authentication mechanism.

.sp
Available for both \fBmongod\fP and \fBmongos\fP\&.
.sp
Specifies the list of authentication mechanisms the server accepts. Set
this to one or more of the following values. If you specify multiple
values, use a comma\-separated list and no spaces. For descriptions
of the authentication mechanisms, see /core/authentication\&.
.TS
center;
|l|l|.
_
T{
Value
T}	T{
Description
T}
_
T{
SCRAM\-SHA\-1
T}	T{
\fI\%RFC 5802\fP standard
Salted Challenge Response Authentication Mechanism using the SHA\-1
hash function.
T}
_
T{
SCRAM\-SHA\-256
T}	T{
\fI\%RFC 7677\fP standard
Salted Challenge Response Authentication Mechanism using the SHA\-256
hash function.
.sp
Requires featureCompatibilityVersion set to \fB4.0\fP\&.
.sp
New in version 4.0.
T}
_
T{
MONGODB\-X509
T}	T{
MongoDB TLS/SSL certificate authentication.
T}
_
T{
GSSAPI (Kerberos)
T}	T{
External authentication using Kerberos. This mechanism is
available only in \fI\%MongoDB Enterprise\fP\&.
T}
_
T{
PLAIN (LDAP SASL)
T}	T{
External authentication using LDAP. You can also use \fBPLAIN\fP
for authenticating in\-database users. \fBPLAIN\fP transmits
passwords in plain text. This mechanism is available only in
\fI\%MongoDB Enterprise\fP\&.
T}
_
.TE
.sp
You can only set \fI\%authenticationMechanisms\fP during
start\-up.
.sp
For example, to specify both \fBPLAIN\fP and \fBSCRAM\-SHA\-256\fP as the
authentication mechanisms, use the following command:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter authenticationMechanisms=PLAIN,SCRAM\-SHA\-256 \-\-auth
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B clusterAuthMode
Available for both \fBmongod\fP and \fBmongos\fP\&.
.sp
Set the \fBclusterAuthMode\fP to either \fBsendX509\fP or
\fBx509\fP\&. Useful during rolling upgrade to use x509 for
membership authentication
to minimize downtime.
.sp
For more information about TLS/SSL and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
db.adminCommand( { setParameter: 1, clusterAuthMode: "sendX509" } )
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B enableLocalhostAuthBypass
Available for both \fBmongod\fP and \fBmongos\fP\&.
.sp
Specify \fB0\fP or \fBfalse\fP to disable localhost authentication
bypass. Enabled by default.
.sp
\fI\%enableLocalhostAuthBypass\fP is not available using
\fBsetParameter\fP database command. Use the
\fBsetParameter\fP option in the configuration file or the
\fB\-\-setParameter\fP option on the
command line.
.sp
See localhost\-exception for more information.
.UNINDENT
.INDENT 0.0
.TP
.B KeysRotationIntervalSec
New in version 3.6.

.sp
\fIDefault\fP: 7776000 seconds (90 days)
.sp
Specifies the number of seconds for which an \fI\%HMAC signing key\fP
is valid before rotating to the next one. This parameter is intended
primarily to facilitate authentication testing.
.sp
You can only set \fI\%KeysRotationIntervalSec\fP during
start\-up, and cannot change this setting with the
\fBsetParameter\fP database command.
.UNINDENT
.INDENT 0.0
.TP
.B ldapUserCacheInvalidationInterval
For use with MongoDB deployments using
security\-ldap\-external\&. Available for \fBmongod\fP
instances only.
.sp
The interval (in seconds) that the \fBmongod\fP instance
waits between external user cache flushes. After MongoDB flushes the
external user cache, MongoDB
reacquires authorization data from the LDAP server the
next time an LDAP\-authorized user issues an operation.
.sp
Increasing the value specified increases the amount of time
MongoDB and the LDAP server can be out of sync, but reduces the load on
the LDAP server. Conversely, decreasing the value specified
decreases the time MongoDB and the LDAP server can be out of sync while
increasing the load on the LDAP server.
.sp
Defaults to 30 seconds.
.UNINDENT
.INDENT 0.0
.TP
.B ldapUseConnectionPool
New in version 4.0.9.

.sp
Specifies whether MongoDB should use connection pooling when
connecting to the LDAP server for authentication/authorization.
.sp
\fBStarting in version 4.2\fP, MongoDB uses the following default values:
.INDENT 7.0
.IP \(bu 2
true on Windows.
.IP \(bu 2
true on Linux where MongoDB Enterprise binaries are linked against
\fBlibldap_r\fP\&.
.IP \(bu 2
false on Linux where MongoDB Enterprise binaries are linked against
\fBlibldap\fP\&.
.UNINDENT
.sp
\fBIn earlier versions (versions 4.0.9+)\fP, the default value is
\fBfalse\fP\&.
.sp
You can only set \fI\%ldapUseConnectionPool\fP during
start\-up, and cannot change this setting with the
\fBsetParameter\fP database command.
.UNINDENT
.INDENT 0.0
.TP
.B ldapConnectionPoolUseLatencyForHostPriority
\fINew in version 4.2.1 and 4.0.13\fP
.sp
\fIDefault\fP: true
.sp
A boolean that determines whether the LDAP connection pool (see
\fI\%ldapUseConnectionPool\fP) should use latency of the LDAP
servers to determine the connection order (from lowest latency to
highest).
.sp
You can only set
\fI\%ldapConnectionPoolUseLatencyForHostPriority\fP during
start\-up, and cannot change this setting during runtime with the
\fBsetParameter\fP database command.
.UNINDENT
.INDENT 0.0
.TP
.B ldapConnectionPoolMinimumConnectionsPerHost
\fINew in version 4.2.1 and 4.0.13\fP
.sp
\fIDefault\fP: 1
.sp
The minimum number of connections to keep open to each LDAP server.
.sp
You can only set
\fI\%ldapConnectionPoolMinimumConnectionsPerHost\fP during
start\-up, and cannot change this setting during runtime with the
\fBsetParameter\fP database command.
.UNINDENT
.INDENT 0.0
.TP
.B ldapConnectionPoolMaximumConnectionsPerHost
\fINew in version 4.2.1 and 4.0.13\fP
.sp
\fIChanged in version 4.4\fP Changed default value to \fB2\fP\&. In previous
versions, the default is unset.
.sp
\fIDefault\fP: 2
.sp
The maximum number of connections to keep open to each LDAP server.
.sp
You can only set
\fI\%ldapConnectionPoolMaximumConnectionsPerHost\fP during
start\-up, and cannot change this setting during runtime with the
\fBsetParameter\fP database command.
.UNINDENT
.INDENT 0.0
.TP
.B ldapConnectionPoolMaximumConnectionsInProgressPerHost
\fINew in version 4.2.1 and 4.0.13\fP
.sp
The maximum number of in\-progress connect operations to each LDAP server.
.sp
You can only set
\fI\%ldapConnectionPoolMaximumConnectionsInProgressPerHost\fP
during start\-up, and cannot change this setting with the
\fBsetParameter\fP database command.
.UNINDENT
.INDENT 0.0
.TP
.B ldapConnectionPoolHostRefreshIntervalMillis
\fINew in version 4.2.1 and 4.0.13\fP
.sp
\fIDefault\fP: 60000
.sp
The number of milliseconds in\-between health checks of the pooled
LDAP connections.
.sp
You can only set
\fI\%ldapConnectionPoolHostRefreshIntervalMillis\fP during
start\-up, and cannot change this setting with the
\fBsetParameter\fP database command.
.UNINDENT
.INDENT 0.0
.TP
.B ldapConnectionPoolIdleHostTimeoutSecs
\fINew in version 4.2.1 and 4.0.13\fP
.sp
\fIDefault\fP: 300
.sp
The maximum number of seconds that the pooled connections to an LDAP
server can remain idle before being closed.
.sp
You can only set
\fI\%ldapConnectionPoolIdleHostTimeoutSecs\fP during
start\-up, and cannot change this setting with the
\fBsetParameter\fP database command.
.UNINDENT
.INDENT 0.0
.TP
.B ocspEnabled
New in version 4.4: Available on Linux and macOS.

.sp
\fIDefault\fP: true
.sp
The flag that enables or disables OCSP.
.sp
You can only set \fI\%ocspEnabled\fP during startup in the
\fBconfiguration file\fP or with the
\fB\-\-setParameter\fP option on the command line. For example, the
following disables OCSP:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter ocspEnabled=false ...
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
\fBSEE ALSO:\fP
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
\fI\%ocspValidationRefreshPeriodSecs\fP
.IP \(bu 2
\fI\%tlsOCSPStaplingTimeoutSecs\fP
.IP \(bu 2
\fI\%tlsOCSPVerifyTimeoutSecs\fP
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B ocspValidationRefreshPeriodSecs
New in version 4.4: Available on Linux.

.sp
The number of seconds to wait before refreshing the stapled OCSP
status response. Specify a number greater than or equal to 1.
.sp
You can only set \fI\%ocspValidationRefreshPeriodSecs\fP during
startup in the \fBconfiguration file\fP or with
the \fB\-\-setParameter\fP option on the command line. For example, the
following sets the parameter to 3600 seconds:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter ocspValidationRefreshPeriodSecs=3600 ...
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
\fBSEE ALSO:\fP
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
\fI\%ocspEnabled\fP
.IP \(bu 2
\fI\%tlsOCSPStaplingTimeoutSecs\fP
.IP \(bu 2
\fI\%tlsOCSPVerifyTimeoutSecs\fP
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B opensslCipherConfig
New in version 3.6.

.sp
Changed in version 4.0: With the use of native TLS/SSL libraries, the parameter
\fI\%opensslCipherConfig\fP is supported for Linux/BSD and
no longer supported in Windows and macOS. See MongoDB 4.0
TLS/SSL\&.

.sp
Specify the cipher string for OpenSSL when using TLS/SSL encryption.
For a list of cipher strings, see
\fI\%https://www.openssl.org/docs/man1.0.2/apps/ciphers.html#CIPHER\-STRINGS\fP
.sp
You can only set \fI\%opensslCipherConfig\fP during start\-up, and
cannot change this setting using the \fBsetParameter\fP
database command.
.sp
For version 4.2 and greater, the use of \fBTLS\fP options is preferred
over \fBSSL\fP options. The TLS options have the same functionality as
the \fBSSL\fP options.
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter opensslCipherConfig=\(aqHIGH:!EXPORT:!aNULL@STRENGTH\(aq \-\-tlsMode requireTLS \-\-tlsCertificateKeyFile Certs/server.pem
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
For versions 4.0 and earlier:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter opensslCipherConfig=\(aqHIGH:!EXPORT:!aNULL@STRENGTH\(aq \-\-sslMode requireSSL \-\-sslPEMKeyFile Certs/server.pem
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B opensslDiffieHellmanParameters
New in version 3.6.

.sp
\fIAvailable on Linux only\fP
.sp
Specify the path to the PEM file that contains the OpenSSL
Diffie\-Hellman parameters. Specifying the OpenSSL Diffie\-Hellman
parameters enables support for dhe cipher suites during
TLS/SSL encryption.
.sp
Ephemeral Diffie\-Hellman (DHE) cipher suites (and Ephemeral Elliptic
Curve Diffie\-Hellman (ECDHE) cipher suites) provide
tls\-forward\-secrecy\&. tls\-forward\-secrecy cipher suites
create an ephemeral session key that is protected by the server\(aqs
private key but never transmitted. This ensures that even if a
server\(aqs private key is compromised, you cannot decrypt past
sessions with the compromised key.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
Starting in MongoDB 4.2, if
\fI\%opensslDiffieHellmanParameters\fP is unset but
ECDHE is enabled, MongoDB enables DHE using
\fBffdhe3072\fP Diffie\-Hellman parameter, as defined in
\fI\%RFC 7919#appendix\-A.2\fP\&. The \fBffdhe3072\fP is a strong parameter
(i.e. size is greater than 1024). Strong parameters are not
supported with Java 6 and 7 unless extended support has been
purchased from Oracle.
.UNINDENT
.UNINDENT
.sp
You can only set \fI\%opensslDiffieHellmanParameters\fP during
startup, and cannot change this setting using the
\fBsetParameter\fP database command.
.sp
If for performance reasons, you need to disable support for DHE
cipher suites, use the \fI\%opensslCipherConfig\fP parameter:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter opensslCipherConfig=\(aqHIGH:!EXPORT:!aNULL:!DHE:!kDHE@STRENGTH\(aq ...
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B saslauthdPath
.
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
Available only in MongoDB Enterprise (except MongoDB Enterprise for Windows).
.UNINDENT
.UNINDENT
.sp
Available for both \fBmongod\fP and \fBmongos\fP\&.
.sp
Specify the path to the Unix Domain Socket of the \fBsaslauthd\fP
instance to use for proxy authentication.
.UNINDENT
.INDENT 0.0
.TP
.B saslHostName
Available for both \fBmongod\fP and \fBmongos\fP\&.
.sp
\fI\%saslHostName\fP overrides MongoDB\(aqs default hostname
detection for the purpose of configuring SASL and Kerberos
authentication.
.sp
\fI\%saslHostName\fP does not affect the hostname of the
\fBmongod\fP or \fBmongos\fP instance for any purpose
beyond the configuration of SASL and Kerberos.
.sp
You can only set \fI\%saslHostName\fP during start\-up, and
cannot change this setting using the \fBsetParameter\fP
database command.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
\fI\%saslHostName\fP supports Kerberos authentication and is
only included in MongoDB Enterprise. For more information, see the
following:
.INDENT 0.0
.IP \(bu 2
Linux:
/tutorial/control\-access\-to\-mongodb\-with\-kerberos\-authentication
.IP \(bu 2
Windows:
/tutorial/control\-access\-to\-mongodb\-windows\-with\-kerberos\-authentication
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B saslServiceName
Available for both \fBmongod\fP and \fBmongos\fP\&.
.sp
Allows users to override the default Kerberos
service name component of the Kerberos
principal name, on a per\-instance basis. If unspecified, the
default value is \fBmongodb\fP\&.
.sp
MongoDB only permits setting \fI\%saslServiceName\fP at
startup. The \fBsetParameter\fP command can not change
this setting.
.sp
\fI\%saslServiceName\fP is only available in MongoDB
Enterprise.
.sp
\fBIMPORTANT:\fP
.INDENT 7.0
.INDENT 3.5
Ensure that your driver supports alternate service names.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B scramIterationCount
\fIDefault\fP: \fB10000\fP
.sp
Available for both \fBmongod\fP and \fBmongos\fP\&.
.sp
Changes the number of hashing iterations used for all new
\fBSCRAM\-SHA\-1\fP passwords. More iterations increase the amount of
time required for clients to authenticate to MongoDB, but makes
passwords less susceptible to brute\-force attempts. The default
value is ideal for most common use cases and requirements.
.sp
If you modify this value, it does not change the iteration count for
existing passwords. The \fI\%scramIterationCount\fP value must
be \fB5000\fP or greater.
.sp
For example, the following sets the \fI\%scramIterationCount\fP
to \fB12000\fP\&.
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter scramIterationCount=12000
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Or, if using the \fBsetParameter\fP command within the
\fBmongo\fP shell:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
db.adminCommand( { setParameter: 1, scramIterationCount: 12000 } )
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
\fBSEE ALSO:\fP
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
\fBdb.changeUserPassword()\fP
.IP \(bu 2
\fBdb.createUser()\fP
.IP \(bu 2
\fBdb.updateUser()\fP
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B scramSHA256IterationCount
New in version 4.0.

.sp
\fIDefault\fP: \fB15000\fP
.sp
Available for both \fBmongod\fP and \fBmongos\fP\&.
.sp
Changes the number of hashing iterations used for all new
\fBSCRAM\-SHA\-256\fP passwords. More iterations increase the amount of
time required for clients to authenticate to MongoDB, but makes
passwords less susceptible to brute\-force attempts. The default
value is ideal for most common use cases and requirements.
.sp
If you modify this value, it does not change iteration count for
existing passwords. The \fI\%scramSHA256IterationCount\fP value
must be \fB5000\fP or greater.
.sp
For example, the following sets the \fI\%scramSHA256IterationCount\fP
to \fB20000\fP\&.
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter scramSHA256IterationCount=20000
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Or, if using the \fBsetParameter\fP command within the
\fBmongo\fP shell:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
db.adminCommand( { setParameter: 1, scramSHA256IterationCount: 20000 } )
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
\fBSEE ALSO:\fP
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
\fBdb.changeUserPassword()\fP
.IP \(bu 2
\fBdb.createUser()\fP
.IP \(bu 2
\fBdb.updateUser()\fP
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B sslMode
Available for both \fBmongod\fP and \fBmongos\fP\&.
.sp
Set the \fBnet.ssl.mode\fP to either \fBpreferSSL\fP or
\fBrequireSSL\fP\&. Useful during rolling upgrade to TLS/SSL to minimize downtime.
.sp
For more information about TLS/SSL and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
db.adminCommand( { setParameter: 1, sslMode: "preferSSL" } )
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
\fBSEE ALSO:\fP
.INDENT 7.0
.INDENT 3.5
\fI\%tlsMode\fP
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B tlsMode
New in version 4.2.

.sp
Available for both \fBmongod\fP and \fBmongos\fP\&.
.sp
Set to either:
.INDENT 7.0
.IP \(bu 2
\fBpreferTLS\fP
.IP \(bu 2
\fBrequireTLS\fP
.UNINDENT
.sp
The \fI\%tlsMode\fP parameter is useful during rolling
upgrade to TLS/SSL to minimize
downtime.
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
db.adminCommand( { setParameter: 1, tlsMode: "preferTLS" } )
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
For more information about TLS/SSL and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.sp
\fBSEE ALSO:\fP
.INDENT 7.0
.INDENT 3.5
\fI\%sslMode\fP
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B tlsOCSPStaplingTimeoutSecs
New in version 4.4: Available for Linux.

.sp
The maximum number of seconds the
\fBmongod\fP/\fBmongos\fP instance should wait to
receive the OCSP status response for its certificates.
.sp
Specify an integer greater than or equal to (\fB>=\fP) 1. If unset,
\fI\%tlsOCSPStaplingTimeoutSecs\fP uses the
\fI\%tlsOCSPVerifyTimeoutSecs\fP value.
.sp
You can only set \fI\%tlsOCSPStaplingTimeoutSecs\fP during
startup in the \fBconfiguration file\fP or with
the \fB\-\-setParameter\fP option on the command line. For example, the
following sets the \fI\%tlsOCSPStaplingTimeoutSecs\fP to 20
seconds:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter tlsOCSPStaplingTimeoutSecs=20 ...
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
\fBSEE ALSO:\fP
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
\fI\%ocspEnabled\fP
.IP \(bu 2
\fI\%ocspValidationRefreshPeriodSecs\fP
.IP \(bu 2
\fI\%tlsOCSPVerifyTimeoutSecs\fP
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B tlsOCSPVerifyTimeoutSecs
New in version 4.4: Available for Linux and Windows.

.sp
\fIDefault\fP: 5
.sp
The maximum number of seconds that the
\fBmongod\fP/\fBmongos\fP should wait for the OCSP
response when verifying client certificates.
.sp
Specify an integer greater than or equal to (\fB>=\fP) 1. Default is
unlimited.
.sp
You can only set \fI\%tlsOCSPVerifyTimeoutSecs\fP during
startup in the \fBconfiguration file\fP or with
the \fB\-\-setParameter\fP option on the command line. For example, the
following sets the \fI\%tlsOCSPVerifyTimeoutSecs\fP to 20
seconds:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter tlsOCSPVerifyTimeoutSecs=20 ...
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
\fBSEE ALSO:\fP
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
\fI\%ocspEnabled\fP
.IP \(bu 2
\fI\%ocspValidationRefreshPeriodSecs\fP
.IP \(bu 2
\fI\%tlsOCSPStaplingTimeoutSecs\fP
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B tlsWithholdClientCertificate
\fIDefault\fP: false
.sp
New in version 4.2.

.sp
Available for both \fBmongod\fP and \fBmongos\fP\&.
.sp
A TLS certificate is set for a \fBmongod\fP or
\fBmongos\fP either by the
\fB\-\-tlsClusterFile\fP option or by the
\fB\-\-tlsCertificateKeyFile\fP option when
\fB\-\-tlsClusterFile\fP is not set. If the TLS
certificate is set, by default, the instance sends the certificate when
initiating intra\-cluster communications with other
\fBmongod\fP or \fBmongos\fP instances in
the deployment. Set \fBtlsWithholdClientCertificate\fP to \fB1\fP or \fBtrue\fP to
direct the instance to withhold sending its TLS certificate during these
communications. Use this option with
\fB\-\-tlsAllowConnectionsWithoutCertificates\fP
(to allow inbound connections without certificates) on all members of the
deployment. \fBtlsWithholdClientCertificate\fP is mutually exclusive with
\fB\-\-clusterAuthMode x509\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B tlsX509ClusterAuthDNOverride
New in version 4.2.

.sp
Available for both \fBmongod\fP and \fBmongos\fP\&.
.sp
An alternative Distinguished Name (DN) that the instance can also
use to identify members of the deployment.
.sp
For a MongoDB deployment that uses x.509 certificates for
\fBclusterAuthMode\fP, deployment members identify
each other using x.509 certificates (
\fBnet.tls.clusterFile\fP, if specified, and
\fBnet.tls.certificateKeyFile\fP) during intra\-cluster
communications. For members of the same deployment, the \fBDN\fP from
their certificates must have the same Organization attributes
(\fBO\fP\(aqs), the Organizational Unit attributes (\fBOU\fP\(aqs), and the
Domain Components (\fBDC\fP\(aqs).
.sp
If \fI\%tlsX509ClusterAuthDNOverride\fP is set for a member,
the member can also use the override value when comparing the \fBDN\fP
components (\fBO\fP\(aqs, \fBOU\fP\(aqs, and \fBDC\fP\(aqs) of the presented
certificates. That is the member checks the presented certificates
against its
\fBnet.tls.clusterFile\fP/\fBnet.tls.certificateKeyFile\fP\&.
If the DN does not match, the member checks the presented
certificate against the \fI\%tlsX509ClusterAuthDNOverride\fP
value.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
If set, you must set this parameter on all members of the
deployment.
.UNINDENT
.UNINDENT
.sp
You can use this parameter for a rolling update of certificates to
new certificates that contain a new \fBDN\fP value. See
/tutorial/rotate\-x509\-membership\-certificates\&.
.sp
For more information about membership certificate requirements, see
x509\-member\-certificate\-requirements for details.
.UNINDENT
.INDENT 0.0
.TP
.B tlsX509ExpirationWarningThresholdDays
New in version 4.4.

.sp
\fIDefault\fP : 30
.sp
Available for both \fBmongod\fP and \fBmongos\fP\&.
.sp
Starting in MongoDB 4.4, \fBmongod\fP/\fBmongos\fP
logs a warning on connection if the presented x.509 certificate
expires within \fB30\fP days of the \fBmongod/mongos\fP system clock.
Use the \fI\%tlsX509ExpirationWarningThresholdDays\fP parameter
to control the certificate expiration warning threshold:
.INDENT 7.0
.IP \(bu 2
Increase the parameter value to trigger warnings farther ahead of
the certificate expiration date.
.IP \(bu 2
Decrease the parameter value to trigger warnings closer to the
certificate expiration date.
.IP \(bu 2
Set the parameter to \fB0\fP to disable the warning.
.UNINDENT
.sp
This parameter has a minimum value of \fB0\fP\&.
.sp
You can only set \fI\%tlsX509ExpirationWarningThresholdDays\fP
during \fBmongod/mongos\fP startup using either:
.INDENT 7.0
.IP \(bu 2
The \fBsetParameter\fP configuration setting, \fIor\fP
.IP \(bu 2
The \fBmongod \-\-setParameter\fP /
\fBmongos \-\-setParameter\fP command
line option.
.UNINDENT
.sp
See 4.4\-rel\-notes\-certificate\-expiration\-warning for more
information on x.509 expiration warnings in MongoDB 4.4.
.sp
For more information on x.509 certificate validity, see \fI\%RFC 5280
4.1.2.5\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B sslWithholdClientCertificate
\fIDefault\fP: false
.sp
Deprecated since version 4.2: Use \fI\%tlsWithholdClientCertificate\fP instead.

.sp
Available for both \fBmongod\fP and \fBmongos\fP\&.
.sp
A TLS certificate is set for a \fBmongod\fP or
\fBmongos\fP either by the
\fB\-\-tlsClusterFile\fP option or by the
\fB\-\-tlsCertificateKeyFile\fP option when
\fB\-\-tlsClusterFile\fP is not set. If the TLS
certificate is set, by default, the instance sends the certificate when
initiating intra\-cluster communications with other
\fBmongod\fP or \fBmongos\fP instances in
the deployment. Set \fBsslWithholdClientCertificate\fP to \fB1\fP or \fBtrue\fP to
direct the instance to withhold sending its TLS certificate during these
communications. Use this option with
\fB\-\-tlsAllowConnectionsWithoutCertificates\fP
(to allow inbound connections without certificates) on all members of the
deployment. \fBsslWithholdClientCertificate\fP is mutually exclusive with
\fB\-\-clusterAuthMode x509\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B userCacheInvalidationIntervalSecs
\fIDefault\fP: 30
.sp
Available for \fBmongos\fP only.
.sp
On a \fBmongos\fP instance, specifies the interval (in seconds)
at which the \fBmongos\fP instance checks to determine whether
the in\-memory cache of user objects has stale data, and if so,
clears the cache. If there are no changes to user objects,
\fBmongos\fP will not clear the cache.
.sp
This parameter has a minimum value of \fB1\fP second and a maximum
value of \fB86400\fP seconds (24 hours).
.UNINDENT
.INDENT 0.0
.TP
.B authFailedDelayMs
\fIDefault\fP: 0
.sp
Available for both \fBmongod\fP and \fBmongos\fP\&.
.sp
New in version 3.4.

.INDENT 7.0
.INDENT 3.5
.IP "Enterprise Feature"
.sp
Available in MongoDB Enterprise only.
.UNINDENT
.UNINDENT
.sp
The number of milliseconds to wait before informing clients that their
authentication attempt has failed. This parameter may be in the range
\fB0\fP to \fB5000\fP, inclusive.
.sp
Setting this parameter makes brute\-force login attacks on a database
more time\-consuming. However, clients waiting for a response from the
MongoDB server still consume server resources, and this may adversely
impact benign login attempts if the server is denying access to many
other clients simultaneously.
.UNINDENT
.INDENT 0.0
.TP
.B allowRolesFromX509Certificates
\fIDefault\fP: true
.sp
Available for both \fBmongod\fP and \fBmongos\fP\&.
.sp
\fIAvailable starting in MongoDB 4.0.11 (and 3.6.14 and 3.4.22)\fP
.sp
A boolean flag that allows or disallows the retrieval of
authorization roles from client x.509 certificates.
.sp
You can only set \fI\%allowRolesFromX509Certificates\fP during
startup in the config file or on the command line.
.UNINDENT
.SS General Parameters
.INDENT 0.0
.TP
.B connPoolMaxShardedConnsPerHost
\fIDefault\fP: 200
.sp
Available for both \fBmongod\fP and \fBmongos\fP\&.
.sp
Sets the maximum size of the legacy connection pools for communication to the
shards. The size of a pool does not prevent the creation of
additional connections, but \fIdoes\fP prevent the connection pools from
retaining connections above this limit.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
The parameter is separate from the connections in TaskExecutor
pools. See \fI\%ShardingTaskExecutorPoolMaxSize\fP\&.
.UNINDENT
.UNINDENT
.sp
Increase the \fI\%connPoolMaxShardedConnsPerHost\fP value
\fBonly\fP if the number of connections in a connection pool has a
high level of churn or if the total number of created connections
increase.
.sp
You can only set \fI\%connPoolMaxShardedConnsPerHost\fP during
startup in the config file or on the command line. For example:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongos \-\-setParameter connPoolMaxShardedConnsPerHost=250
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B connPoolMaxShardedInUseConnsPerHost
New in version 3.6.3.

.sp
Available for both \fBmongod\fP and \fBmongos\fP\&.
.sp
Sets the maximum number of in\-use connections at any given time for
the legacy sharded cluster connection pools.
.sp
By default, the parameter is unset.
.sp
You can only set \fI\%connPoolMaxShardedConnsPerHost\fP during
startup in the config file or on the command line. For example:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongos \-\-setParameter connPoolMaxShardedInUseConnsPerHost=100
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
\fBSEE ALSO:\fP
.INDENT 7.0
.INDENT 3.5
\fI\%connPoolMaxShardedConnsPerHost\fP
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B shardedConnPoolIdleTimeoutMinutes
New in version 3.6.3.

.sp
Available for both \fBmongod\fP and \fBmongos\fP\&.
.sp
Sets the time limit that a connection in the legacy sharded cluster
connection pool can remain idle before being closed.
.sp
By default, the parameter is unset.
.sp
You can only set \fI\%shardedConnPoolIdleTimeoutMinutes\fP during
startup in the config file or on the command line. For example:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongos \-\-setParameter shardedConnPoolIdleTimeoutMinutes=10
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
\fBSEE ALSO:\fP
.INDENT 7.0
.INDENT 3.5
\fI\%connPoolMaxShardedConnsPerHost\fP
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B connPoolMaxConnsPerHost
\fIDefault\fP: 200
.sp
Available for both \fBmongod\fP and \fBmongos\fP\&.
.sp
Sets the maximum size of the legacy connection pools for outgoing connections
to other \fBmongod\fP instances in the global connection pool. The size
of a pool does not prevent the creation of additional connections,
but \fIdoes\fP prevent a connection pool from retaining connections in
excess of the value of \fI\%connPoolMaxConnsPerHost\fP\&.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
The parameter is separate from the connections in TaskExecutor
pools. See \fI\%ShardingTaskExecutorPoolMaxSize\fP\&.
.UNINDENT
.UNINDENT
.sp
\fBOnly\fP adjust this setting if your driver does \fInot\fP pool
connections and you\(aqre using authentication in the
context of a sharded cluster.
.sp
You can only set \fI\%connPoolMaxConnsPerHost\fP during startup
in the config file or on the command line. For example:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter connPoolMaxConnsPerHost=250
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B connPoolMaxInUseConnsPerHost
New in version 3.6.3.

.sp
Available for both \fBmongod\fP and \fBmongos\fP\&.
.sp
Sets the maximum number of in\-use connections at any given time for
for outgoing connections to other \fBmongod\fP instances in
the legacy global connection pool.
.sp
By default, the parameter is unset.
.sp
You can only set \fI\%connPoolMaxInUseConnsPerHost\fP during
startup in the config file or on the command line. For example:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter connPoolMaxInUseConnsPerHost=100
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
\fBSEE ALSO:\fP
.INDENT 7.0
.INDENT 3.5
\fI\%connPoolMaxConnsPerHost\fP
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B globalConnPoolIdleTimeoutMinutes
New in version 3.6.3.

.sp
Available for both \fBmongod\fP and \fBmongos\fP\&.
.sp
Sets the time limit that connection in the legacy global connection
pool can remain idle before being closed.
.sp
By default, the parameter is unset.
.sp
You can only set \fI\%globalConnPoolIdleTimeoutMinutes\fP
during startup in the config file or on the command line. For
example:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongos \-\-setParameter globalConnPoolIdleTimeoutMinutes=10
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
\fBSEE ALSO:\fP
.INDENT 7.0
.INDENT 3.5
\fI\%connPoolMaxShardedConnsPerHost\fP
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B cursorTimeoutMillis
\fIDefault\fP: 600000 (i.e. 10 minutes)
.sp
Available for both \fBmongod\fP and \fBmongos\fP\&.
.sp
Sets the expiration threshold in milliseconds for idle cursors
before MongoDB removes them; i.e. MongoDB removes cursors that have
been idle for the specified \fI\%cursorTimeoutMillis\fP\&.
.sp
For example, the following sets the \fI\%cursorTimeoutMillis\fP
to \fB300000\fP milliseconds (i.e. 5 minutes).
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter cursorTimeoutMillis=300000
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Or, if using the \fBsetParameter\fP command within the
\fBmongo\fP shell:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
db.adminCommand( { setParameter: 1, cursorTimeoutMillis: 300000 } )
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Setting \fI\%cursorTimeoutMillis\fP to less than or equal
to \fB0\fP results in all cursors being immediately eligible for timeout.
Generally, the timeout value should be greater than the average amount of
time for a query to return results. Use tools like the \fBcursor.explain()\fP
cursor modifier to analyze the average query time and select an appropriate
timeout period.
.UNINDENT
.INDENT 0.0
.TP
.B failIndexKeyTooLong
\fIRemoved in 4.4\fP
.sp
\fBIMPORTANT:\fP
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
\fBMongoDB 4.4\fP \fIremoves\fP the deprecated
\fI\%failIndexKeyTooLong\fP parameter. Attempting to use
this parameter with MongoDB 4.4 will result in an error.
.IP \(bu 2
\fBMongoDB 4.2\fP \fIdeprecates\fP the
\fI\%failIndexKeyTooLong\fP parameter and \fIremoves\fP the
\fBIndex Key Length Limit\fP for
featureCompatibilityVersion (fCV) set to
\fB"4.2"\fP or greater.
.UNINDENT
.UNINDENT
.UNINDENT
.sp
For MongoDB 2.6 through MongoDB versions with
featureCompatibilityVersion (fCV) set to \fB"4.0"\fP or earlier,
\fBIndex Key Length Limit\fP applies. If you
attempt to insert or update a document whose index field exceeds
the \fBIndex Key Length Limit\fP, the operation
will fail and return an error to the client.
.sp
To avoid this issue, consider using hashed indexes or indexing a computed value. If you have an
existing data set and want to disable this behavior so you can
upgrade and then gradually resolve these indexing issues, you can
use \fI\%failIndexKeyTooLong\fP to disable this behavior.
.sp
Setting \fI\%failIndexKeyTooLong\fP to \fBfalse\fP is
a temporary workaround, not a permanent solution to the
problem of oversized index keys. With
\fI\%failIndexKeyTooLong\fP set to \fBfalse\fP, queries can
return incomplete results if they use indexes that skip over
documents whose indexed fields exceed the
\fBIndex Key Length Limit\fP\&.
.sp
\fI\%failIndexKeyTooLong\fP defaults to \fBtrue\fP\&.
.sp
Issue the following command to disable the index key length
validation:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
db.adminCommand( { setParameter: 1, failIndexKeyTooLong: false } )
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
You can also set \fI\%failIndexKeyTooLong\fP  at
startup time with the following option:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter failIndexKeyTooLong=false
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B notablescan
Available for \fBmongod\fP only.
.sp
Specify whether \fBall\fP queries must use indexes. If \fB1\fP, MongoDB
will not execute queries that require a collection scan and will return an
error.
.sp
Consider the following example which sets \fI\%notablescan\fP to \fB1\fP
or true:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
db.adminCommand( { setParameter: 1, notablescan: 1 } )
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Setting \fI\%notablescan\fP to \fB1\fP can be useful for testing
application queries, for example, to identify queries that scan an
entire collection and cannot use an index.
.sp
To detect unindexed queries without \fBnotablescan\fP, consider reading
the /tutorial/evaluate\-operation\-performance and
/tutorial/optimize\-query\-performance\-with\-indexes\-and\-projections
sections and using the \fI\%logLevel\fP parameter,
/reference/program/mongostat and profiling\&.
.sp
Don\(aqt run production \fBmongod\fP instances with
\fI\%notablescan\fP because preventing collection scans can potentially
affect queries in all databases, including administrative queries.
.UNINDENT
.INDENT 0.0
.TP
.B ttlMonitorEnabled
Available for \fBmongod\fP only.
.sp
To support TTL Indexes, \fBmongod\fP
instances have a background thread that is responsible for deleting
documents from collections with TTL indexes.
.sp
To disable this worker thread for a \fBmongod\fP, set
\fI\%ttlMonitorEnabled\fP to \fBfalse\fP, as in the following
operations:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
db.adminCommand( { setParameter: 1, ttlMonitorEnabled: false } )
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Alternately, you may disable the thread at startup time by starting the
\fBmongod\fP instance with the following option:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter ttlMonitorEnabled=false
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B tcpFastOpenServer
New in version 4.4.

.sp
Available for both \fBmongod\fP and \fBmongos\fP\&.
.sp
\fIDefault\fP: \fBtrue\fP
.sp
Enables support for accepting inbound TCP Fast Open (TFO) connections
to the \fBmongod/mongos\fP from a client. TFO requires both the
client and \fBmongod/mongos\fP host machine support and enable
TFO:
.INDENT 7.0
.TP
.B Windows
The following Windows operating systems support TFO:
.INDENT 7.0
.IP \(bu 2
Microsoft Windows Server 2016 and later.
.IP \(bu 2
Microsoft Windows 10 Update 1607 and later.
.UNINDENT
.TP
.B macOS
macOS 10.11 (El Capitan) and later support TFO.
.TP
.B Linux
Linux operating systems running Linux Kernel 3.7 or later
can support inbound TFO.
.sp
Set the value of \fB/proc/sys/net/ipv4/tcp_fastopen\fP to
enable inbound TFO connections:
.INDENT 7.0
.IP \(bu 2
Set to \fB2\fP to enable only inbound TFO connections.
.IP \(bu 2
Set to \fB3\fP to enable inbound and outbound TFO connections.
.UNINDENT
.UNINDENT
.sp
This parameter has no effect if the host operating system does not
support \fIor\fP is not configured to support TFO connections.
.sp
You can only set this parameter on startup, using either the
\fBsetParameter\fP configuration file setting or the
\fB\-\-setParameter\fP command line option.
.sp
See 4.4\-rel\-notes\-tcp\-fast\-open for more information on
MongoDB TFO support.
.sp
\fBSEE ALSO:\fP
.INDENT 7.0
.INDENT 3.5
\fI\%RFC7413\fP\&.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B tcpFastOpenClient
New in version 4.4.

.sp
Available for both \fBmongod\fP and \fBmongos\fP\&.
.sp
\fIDefault\fP: \fBtrue\fP
.sp
\fILinux Operating System Only\fP
.sp
Enables support for outbound TCP Fast Open (TFO) connections from the
\fBmongod/mongos\fP to a client. TFO requires both the client
and the \fBmongod/mongos\fP host machine support and enable TFO.
.sp
Linux operating systems running Linux Kernel 4.11 or later can
support outbound TFO.
.sp
Set the value of \fB/proc/sys/net/ipv4/tcp_fastopen\fP to enable
outbound TFO connections:
.INDENT 7.0
.IP \(bu 2
\fB1\fP to enable only outbound TFO connections.
.IP \(bu 2
\fB3\fP to enable inbound and outbound TFO connections.
.UNINDENT
.sp
This parameter has no effect if the host operating system does not
support \fIor\fP is not configured to support TFO connections.
.sp
You can only set this parameter on startup, using either the
\fBsetParameter\fP configuration file setting or the
\fB\-\-setParameter\fP command line option.
.sp
See 4.4\-rel\-notes\-tcp\-fast\-open for more information on
MongoDB TFO support.
.sp
\fBSEE ALSO:\fP
.INDENT 7.0
.INDENT 3.5
\fI\%RFC7413\fP\&.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B tcpFastOpenQueueSize
New in version 4.4.

.sp
Available for both \fBmongod\fP and \fBmongos\fP\&.
.sp
\fIDefault\fP: \fB1024\fP
.sp
As part of establishing a TCP Fast Open (TFO) connection, the client
submits a valid TFO cookie to the \fBmongod/mongos\fP \fIbefore\fP
completion of the standard TCP 3\-way handshake. The
\fBmongod/mongos\fP keeps a queue of all such pending TFO connections.
.sp
The \fBtcpFastOpenQueueSize\fP parameter sets the size of the queue of
pending TFO connections. While the queue is full, the
\fBmongod/mongos\fP falls back to the normal three\-way handshake for
incoming client requests and ignores the presence of TFO cookies.
Once the queue size falls back below the limit, the \fBmongod/mongos\fP
begins accepting new TFO cookies.
.INDENT 7.0
.IP \(bu 2
Increasing the default queue size may improve the effect of
TFO on network performance. However, large queue sizes also
increase the risk of server resource exhaustion due to excessive
incoming TFO requests.
.IP \(bu 2
Decreasing the default queue size may reduce the risk of resource
server resource exhaustion due to excessive incoming TFO requests.
However, small queue sizes may also reduce the effect of TFO on
network performance.
.sp
The minimum queue size is \fB0\fP\&. A queue of \fB0\fP effectively
disables TFO.
.UNINDENT
.sp
This parameter has no effect on host operating systems that do
not support or are not configured for TFO connections. See
4.4\-rel\-notes\-tcp\-fast\-open for more information on
MongoDB TFO support.
.sp
\fBSEE ALSO:\fP
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
\fI\%RFC7413 TCP Fast Open Section 5: Security Considerations\fP
.IP \(bu 2
\fI\%RFC7413 TCP Fast Open Section 6: TFO Applicability\fP
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B disableJavaScriptJIT
Changed in version 4.0: The JavaScript engine\(aqs JIT compiler is now disabled by default.

.sp
Available for \fBmongod\fP only.
.sp
The MongoDB JavaScript engine uses SpiderMonkey, which implements
Just\-in\-Time (JIT) compilation for improved performance when running scripts.
.sp
To enable the JIT, set \fI\%disableJavaScriptJIT\fP to \fBfalse\fP, as in
the following example:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
db.adminCommand( { setParameter: 1, disableJavaScriptJIT: false } )
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
\fB$where\fP will reuse existing JavaScript interpreter
contexts, so changes to \fI\%disableJavaScriptJIT\fP may not
take effect immediately for these operations.
.UNINDENT
.UNINDENT
.sp
Alternately, you may enable the JIT at startup time by starting the
\fBmongod\fP instance with the following option:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter disableJavaScriptJIT=false
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B maxIndexBuildMemoryUsageMegabytes
New in version 3.4.

.sp
\fIDefault\fP:
.INDENT 7.0
.IP \(bu 2
200 (For versions 4.2.3 and later)
.IP \(bu 2
500 (For versions 4.2.2 and earlier)
.UNINDENT
.sp
Limits the amount of memory that simultaneous index
builds on one collection may consume for the duration of the
builds. The specified amount of memory is shared between all
indexes built using a single
\fBcreateIndexes\fP command or its shell helper
\fBdb.collection.createIndexes()\fP\&.
.sp
The memory consumed by an index build is separate from the
WiredTiger cache memory (see
\fBcacheSizeGB\fP).
.sp
Index builds may be initiated either by a user command
such as Create Index
or by an administrative process such as an
initial sync\&.
Both are subject to the limit set by
\fI\%maxIndexBuildMemoryUsageMegabytes\fP\&.
.sp
An initial sync operation populates
only one collection at a time and has no risk of exceeding the memory
limit. However, it is possible for a user to start index
builds on multiple collections in multiple databases simultaneously
and potentially consume an amount of memory greater than the limit
set in \fI\%maxIndexBuildMemoryUsageMegabytes\fP\&.
.INDENT 7.0
.INDENT 3.5
.SS Tip
.sp
To minimize the impact of building an index on replica sets and
sharded clusters with replica set shards, use a rolling index build
procedure as described on
/tutorial/build\-indexes\-on\-replica\-sets\&.
.UNINDENT
.UNINDENT
.sp
Changed in version 4.2.

.INDENT 7.0
.IP \(bu 2
For feature compatibility version (fcv) \fB"4.2"\fP,
the index build memory limit applies to all index builds.
.IP \(bu 2
For feature compatibility version (fcv) \fB"4.0"\fP,
the index build memory limit only applies to foreground
index builds.
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B reportOpWriteConcernCountersInServerStatus
New in version 4.0.6.

.sp
\fIDefault\fP: false
.sp
A boolean flag that determines whether the
\fBdb.serverStatus()\fP method and \fBserverStatus\fP
command return \fBopWriteConcernCounters\fP information. [1]
.sp
You can only set
\fI\%reportOpWriteConcernCountersInServerStatus\fP during
startup in the config file or on the command line. For example:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter reportOpWriteConcernCountersInServerStatus=true
.ft P
.fi
.UNINDENT
.UNINDENT
.IP [1] 5
Enabling \fI\%reportOpWriteConcernCountersInServerStatus\fP
can have a negative performance impact; specificaly, when running
\fIwithout\fP TLS.
.UNINDENT
.INDENT 0.0
.TP
.B watchdogPeriodSeconds
Available for \fBmongod\fP only.
.sp
\fIType\fP: integer
.sp
\fIDefault\fP: \-1 (disabled)
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
Starting in MongoDB 4.2, the Storage Node Watchdog is available in both the Community and
MongoDB Enterprise editions.
.IP \(bu 2
In earlier versions (3.2.16+, 3.4.7+, 3.6.0+, 4.0.0+), the
Storage Node Watchdog is only
available in MongoDB Enterprise edition.
.UNINDENT
.UNINDENT
.UNINDENT
.sp
Determines how frequent the Storage Node Watchdog checks the status of the monitored
filesystems:
.INDENT 7.0
.IP \(bu 2
The \fB\-\-dbpath\fP directory
.IP \(bu 2
The \fBjournal\fP directory inside the \fB\-\-dbpath\fP directory if
\fBjournaling\fP is enabled
.IP \(bu 2
The directory of \fB\-\-logpath\fP file
.IP \(bu 2
The directory of \fB\-\-auditPath\fP file
.UNINDENT
.sp
Valid values for \fI\%watchdogPeriodSeconds\fP are:
.INDENT 7.0
.IP \(bu 2
\fB\-1\fP (the default), to disable/pause Storage Node Watchdog, or
.IP \(bu 2
An integer greater than or equal to 60.
.UNINDENT
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
If a filesystem on a monitored directory becomes unresponsive,
it can take a maximum of nearly \fItwice\fP the value of
\fI\%watchdogPeriodSeconds\fP to terminate the
\fBmongod\fP\&.
.IP \(bu 2
If any of its monitored directory is a symlink to other
volumes, the Storage Node Watchdog does not monitor the symlink
target. For example, if the \fBmongod\fP uses
\fBstorage.directoryPerDB: true\fP (or \fB\-\-directoryperdb\fP) and symlinks a database directory to
another volume, the Storage Node Watchdog does not follow the
symlink to monitor the target.
.UNINDENT
.UNINDENT
.UNINDENT
.sp
To enable Storage Node Watchdog,
\fI\%watchdogPeriodSeconds\fP must be set during startup.
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter watchdogPeriodSeconds=60
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
You can only enable the Storage Node Watchdog at startup. However, once enabled, you can
pause the Storage Node Watchdog or
change the \fI\%watchdogPeriodSeconds\fP during runtime.
.sp
Once enabled,
.INDENT 7.0
.IP \(bu 2
To pause the Storage Node Watchdog
during runtime, set \fI\%watchdogPeriodSeconds\fP to \-1.
.INDENT 2.0
.INDENT 3.5
.sp
.nf
.ft C
db.adminCommand( { setParameter: 1, watchdogPeriodSeconds: \-1 } )
.ft P
.fi
.UNINDENT
.UNINDENT
.IP \(bu 2
To resume or change the period during runtime, set
\fI\%watchdogPeriodSeconds\fP to a number greater than or
equal to 60.
.INDENT 2.0
.INDENT 3.5
.sp
.nf
.ft C
db.adminCommand( { setParameter: 1, watchdogPeriodSeconds: 120 } )
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
It is an error to set \fI\%watchdogPeriodSeconds\fP at runtime if the
Storage Node Watchdog was not enabled at
startup time.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B tcmallocReleaseRate
New in version 4.2.3: \fIAlso available in 3.6.17+ and 4.0.14+\fP

.sp
Default: 1.0
.sp
Specifies the tcmalloc release rate (\fI\%TCMALLOC_RELEASE_RATE\fP).
Per \fI\%https://gperftools.github.io/gperftools/tcmalloc.html#runtime\fP
TCMALLOC_RELEASE_RATE is described as:
.INDENT 7.0
.INDENT 3.5
Rate at which we release unused memory to the system, via
madvise(MADV_DONTNEED), on systems that support it. Zero means we
never release memory back to the system. Increase this flag to
return memory faster; decrease it to return memory slower.
Reasonable rates are in the range [0,10].
\(em \fI\%https://gperftools.github.io/gperftools/tcmalloc.html#runtime\fP
.UNINDENT
.UNINDENT
.sp
To modify the release rate during runtime, you can use the
\fBsetParameter\fP command; for example:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
db.adminCommand( { setParameter: 1, tcmallocReleaseRate: 5.0 } )
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
You can also set \fI\%tcmallocReleaseRate\fP at startup time;
for example:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter "tcmallocReleaseRate=5.0"
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.SS Logging Parameters
.INDENT 0.0
.TP
.B logLevel
Available for both \fBmongod\fP and \fBmongos\fP\&.
.sp
Specify an integer between \fB0\fP and \fB5\fP signifying the verbosity
of the logging, where \fB5\fP is the
most verbose. [2]
.sp
The default \fI\%logLevel\fP is \fB0\fP (Informational).
.sp
The following example sets the \fI\%logLevel\fP to \fB2\fP:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
db.adminCommand( { setParameter: 1, logLevel: 2 } )
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
\fBSEE ALSO:\fP
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
\fI\%logComponentVerbosity\fP
.IP \(bu 2
\fBsystemLog.verbosity\fP
.UNINDENT
.UNINDENT
.UNINDENT
.IP [2] 5
Starting in version 4.2, MongoDB includes the Debug verbosity level
(1\-5) in the log messages\&. For example,
if the verbosity level is 2, MongoDB logs \fBD2\fP\&. In previous
versions, MongoDB log messages only specified \fBD\fP for Debug level.
.UNINDENT
.INDENT 0.0
.TP
.B logComponentVerbosity
Available for both \fBmongod\fP and \fBmongos\fP\&.
.sp
Sets the verbosity levels of various components for log messages\&. The verbosity level determines the
amount of Informational and Debug
messages MongoDB outputs. [3]
.sp
The verbosity level can range from \fB0\fP to \fB5\fP:
.INDENT 7.0
.IP \(bu 2
\fB0\fP is the MongoDB\(aqs default log verbosity level, to include
Informational messages.
.IP \(bu 2
\fB1\fP to \fB5\fP increases the verbosity level to include
Debug messages.
.UNINDENT
.sp
For a component, you can also specify \fB\-1\fP to inherit the parent\(aqs
verbosity level.
.sp
To specify the verbosity level, use a document similar to the
following:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
{
  verbosity: <int>,
  <component1>: { verbosity: <int> },
  <component2>: {
     verbosity: <int>,
     <component3>: { verbosity: <int> }
  },
  ...
}
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
For the components, you can specify just the \fB<component>: <int>\fP
in the document, unless you are setting both the parent verbosity
level and that of the child component(s) as well:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
{
  verbosity: <int>,
  <component1>: <int> ,
  <component2>: {
     verbosity: <int>,
     <component3>: <int>
  }
  ...
}
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
The top\-level \fBverbosity\fP field corresponds to
\fBsystemLog.verbosity\fP which sets the default level for all
components. The default value of \fBsystemLog.verbosity\fP is
\fB0\fP\&.
.sp
The components correspond to the following settings:
.INDENT 7.0
.IP \(bu 2
\fBaccessControl\fP
.IP \(bu 2
\fBcommand\fP
.IP \(bu 2
\fBcontrol\fP
.IP \(bu 2
\fBftdc\fP
.IP \(bu 2
\fBgeo\fP
.IP \(bu 2
\fBindex\fP
.IP \(bu 2
\fBnetwork\fP
.IP \(bu 2
\fBquery\fP
.IP \(bu 2
\fBreplication\fP
.IP \(bu 2
\fBreplication.election\fP
.IP \(bu 2
\fBreplication.heartbeats\fP
.IP \(bu 2
\fBreplication.initialSync\fP
.IP \(bu 2
\fBreplication.rollback\fP
.IP \(bu 2
\fBrecovery\fP
.IP \(bu 2
\fBsharding\fP
.IP \(bu 2
\fBstorage\fP
.IP \(bu 2
\fBstorage.journal\fP
.IP \(bu 2
\fBtransaction\fP
.IP \(bu 2
\fBwrite\fP
.UNINDENT
.sp
Unless explicitly set, the component has the verbosity level of its
parent. For example, \fBstorage\fP is the parent of
\fBstorage.journal\fP\&. That is, if you specify a \fBstorage\fP verbosity level, this level
also applies to:
.INDENT 7.0
.IP \(bu 2
\fBstorage.journal\fP components
\fIunless\fP you specify the verbosity level for
\fBstorage.journal\fP\&.
.IP \(bu 2
\fBstorage.recovery\fP components
\fIunless\fP you specify the verbosity level for
\fBstorage.recovery\fP\&.
.UNINDENT
.sp
For example, the following sets the \fBdefault verbosity
level\fP to \fB1\fP, the \fBquery\fP to \fB2\fP, the
\fBstorage\fP to \fB2\fP,
and the \fBstorage.journal\fP to \fB1\fP\&.
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
db.adminCommand( {
   setParameter: 1,
   logComponentVerbosity: {
      verbosity: 1,
      query: { verbosity: 2 },
      storage: {
         verbosity: 2,
         journal: {
            verbosity: 1
         }
      }
   }
} )
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
You can also set parameter \fI\%logComponentVerbosity\fP at
startup time, passing the verbosity level document as a string.
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter "logComponentVerbosity={command: 3}"
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
The \fBmongo\fP shell also provides the \fBdb.setLogLevel()\fP
to set the log level for a single component. For various ways to set
the log verbosity level, see log\-messages\-configure\-verbosity\&.
.IP [3] 5
Starting in version 4.2, MongoDB includes the Debug verbosity level
(1\-5) in the log messages\&. For example,
if the verbosity level is 2, MongoDB logs \fBD2\fP\&. In previous
versions, MongoDB log messages only specified \fBD\fP for Debug level.
.UNINDENT
.INDENT 0.0
.TP
.B maxLogSizeKB
New in version 3.4.

.sp
Available for both \fBmongod\fP and \fBmongos\fP\&.
.sp
\fIType\fP: non\-negative integer
.sp
\fIDefault\fP: 10
.sp
Specifies the maxium size, in kilobytes, for an individual
attribute field in a log entry; attributes exceeding this limit are
truncated.
.sp
Truncated attribute fields print field content up to the
\fI\%maxLogSizeKB\fP limit and excise field content past that
limit, retaining valid JSON formating. Log entires that contain
truncated attributes append a \fBtruncated\fP object to the end of the
log entry.
.sp
See log message truncation for more
information.
.sp
A value of \fB0\fP disables truncation entirely. Negative values for
this parameter are not valid.
.sp
\fBWARNING:\fP
.INDENT 7.0
.INDENT 3.5
Using a large value, or disabling truncation with a value of
\fB0\fP, may adversely affect system performance and negatively
impact database operations.
.UNINDENT
.UNINDENT
.sp
The following example sets the maximum log line size to \fB20\fP
kilobytes:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter maxLogSizeKB=20
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B quiet
Available for both \fBmongod\fP and \fBmongos\fP\&.
.sp
Sets quiet logging mode. If
\fB1\fP, \fBmongod\fP will go into a quiet logging
mode which will not log the following events/activities:
.INDENT 7.0
.IP \(bu 2
connection events;
.IP \(bu 2
the \fBdrop\fP command, the
\fBdropIndexes\fP command, the
\fBdiagLogging\fP command, the
\fBvalidate\fP command, and the
\fBclean\fP command; and
.IP \(bu 2
replication synchronization activities.
.UNINDENT
.sp
Consider the following example which sets the
\fBquiet\fP to \fB1\fP:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
db.adminCommand( { setParameter: 1, quiet: 1 } )
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
\fBSEE ALSO:\fP
.INDENT 7.0
.INDENT 3.5
\fBsystemLog.quiet\fP
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B redactClientLogData
New in version 3.4.

.sp
Available for both \fBmongod\fP and \fBmongos\fP\&.
.sp
\fIType\fP: boolean
.INDENT 7.0
.INDENT 3.5
.IP "Enterprise Feature"
.sp
Available in MongoDB Enterprise only.
.UNINDENT
.UNINDENT
.sp
Configure the \fBmongod\fP or \fBmongos\fP to
redact any message accompanying a given log event before logging.
This prevents the program from writing potentially sensitive data
stored on the database to the diagnostic log. Metadata such as error
or operation codes, line numbers, and source file names are still
visible in the logs.
.sp
Use \fI\%redactClientLogData\fP in conjunction with
/core/security\-encryption\-at\-rest and
/core/security\-transport\-encryption to assist compliance with
regulatory requirements.
.sp
To enable log redaction on a running \fBmongod\fP or
\fBmongos\fP, use the following command:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
db.adminCommand( { setParameter: 1, redactClientLogData : true } )
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
\fBSEE ALSO:\fP
.INDENT 7.0
.INDENT 3.5
\fBsecurity.redactClientLogData\fP
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B traceExceptions
Available for both \fBmongod\fP and \fBmongos\fP\&.
.sp
Configures \fBmongod\fP to log full source code stack traces
for every database and socket C++ exception, for use with debugging.
If \fBtrue\fP, \fBmongod\fP will log full stack traces.
.sp
Consider the following example which sets the
\fBtraceExceptions\fP to \fBtrue\fP:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
db.adminCommand( { setParameter: 1, traceExceptions: true } )
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
\fBSEE ALSO:\fP
.INDENT 7.0
.INDENT 3.5
\fBsystemLog.traceAllExceptions\fP
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B suppressNoTLSPeerCertificateWarning
New in version 4.0.1.

.sp
Available for both \fBmongod\fP and \fBmongos\fP\&.
.sp
\fIType\fP: boolean
.sp
\fIDefault\fP: false
.sp
By default, a \fBmongod\fP or \fBmongos\fP with
TLS/SSL enabled and
\fBnet.ssl.allowConnectionsWithoutCertificates\fP : \fBtrue\fP
lets clients connect without providing a certificate for
validation while logging an warning. Set
\fBsuppressNoTLSPeerCertificateWarning\fP to \fB1\fP or \fBtrue\fP to
suppress those warnings.
.sp
The following operation sets \fBsuppressNoTLSPeerCertificateWarning\fP
to \fBtrue\fP:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
db.adminCommand( { setParameter: 1, suppressNoTLSPeerCertificateWarning: true} )
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.SS Diagnostic Parameters
.sp
To facilitate analysis of the MongoDB server behavior by MongoDB
engineers, MongoDB logs server statistics to diagnostic files at
periodic intervals.
.sp
For \fBmongod\fP, the diagnostic data files are stored in the
\fBdiagnostic.data\fP directory under the \fBmongod\fP instance\(aqs
\fB\-\-dbpath\fP or \fBstorage.dbPath\fP\&.
.sp
For \fBmongos\fP, the diagnostic data files, by default, are
stored in a directory under the \fBmongos\fP instance\(aqs
\fB\-\-logpath\fP or \fBsystemLog.path\fP directory. The diagnostic
data directory is computed by truncating the logpath\(aqs file
extension(s) and concatenating \fBdiagnostic.data\fP to the remaining
name.
.sp
For example, if \fBmongos\fP has \fB\-\-logpath
/var/log/mongodb/mongos.log.201708015\fP, then the diagnostic data
directory is \fB/var/log/mongodb/mongos.diagnostic.data/\fP directory. To
specify a different diagnostic data directory for \fBmongos\fP,
set the \fI\%diagnosticDataCollectionDirectoryPath\fP parameter.
.sp
The following parameters support diagnostic data capture (FTDC):
.sp
\fBNOTE:\fP
.INDENT 0.0
.INDENT 3.5
The default values for the diagnostic data capture interval and the
maximum sizes are chosen to provide useful data to MongoDB engineers
with minimal impact on performance and storage size. Typically, these
values will only need modifications as requested by MongoDB engineers
for specific diagnostic purposes.
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B diagnosticDataCollectionEnabled
New in version 3.2.

.sp
Changed in version 3.4.14: Available for both \fBmongod\fP and \fBmongos\fP\&.

.sp
\fIType\fP: boolean
.sp
\fIDefault\fP: true
.sp
Determines whether to enable the collecting and logging of data for
diagnostic purposes. Diagnostic logging is enabled by default.
.sp
For example, the following disables the diagnostic collection:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter diagnosticDataCollectionEnabled=false
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B diagnosticDataCollectionDirectoryPath
New in version 3.4.14.

.sp
\fIType\fP: String
.sp
Available for \fBmongos\fP only.
.sp
Specify the directory for the diagnostic directory for
\fBmongos\fP\&. If the directory does not exist,
\fBmongos\fP creates the directory.
.sp
If unspecified, the diagnostic data directory is computed by
truncating the \fBmongos\fP instance\(aqs \fB\-\-logpath\fP or
\fBsystemLog.path\fP file extension(s) and concatenating
\fBdiagnostic.data\fP\&.
.sp
For example, if \fBmongos\fP has \fB\-\-logpath
/var/log/mongodb/mongos.log.201708015\fP, then the diagnostic data
directory is \fB/var/log/mongodb/mongos.diagnostic.data/\fP\&.
.sp
\fBIMPORTANT:\fP
.INDENT 7.0
.INDENT 3.5
If \fBmongos\fP cannot create the specified directory, e.g.
a file exists with the same name in the path or the process does
not have permissions to create the directory, the diagnostic data
capture will be disabled for that instance.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B diagnosticDataCollectionDirectorySizeMB
New in version 3.2.

.sp
Changed in version 3.4: Increased default size to 200 megabytes.

.sp
Changed in version 3.4.14: Available for both \fBmongod\fP and \fBmongos\fP\&.

.sp
\fIType\fP: integer
.sp
\fIDefault\fP: 200
.sp
Specifies the maximum size, in megabytes, of the \fBdiagnostic.data\fP
directory. If directory size exceeds this number, the oldest
diagnostic files in the directory are automatically deleted based on
the timestamp in the file name.
.sp
For example, the following sets the maximum size of the directory to
\fB250\fP megabytes:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter diagnosticDataCollectionDirectorySizeMB=250
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
The minimum value for
\fI\%diagnosticDataCollectionDirectorySizeMB\fP is \fB10\fP
megabytes. \fI\%diagnosticDataCollectionDirectorySizeMB\fP must
be greater than maximum diagnostic file size
\fI\%diagnosticDataCollectionFileSizeMB\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B diagnosticDataCollectionFileSizeMB
New in version 3.2.

.sp
Changed in version 3.4.14: Available for both \fBmongod\fP and \fBmongos\fP\&.

.sp
\fIType\fP: integer
.sp
\fIDefault\fP: 10
.sp
Specifies the maximum size, in megabytes, of each diagnostic
file\&. If the file exceeds the maximum
file size, MongoDB creates a new file.
.sp
For example, the following sets the maximum size of each diagnostic
file to \fB20\fP megabytes:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter diagnosticDataCollectionFileSizeMB=20
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
The minimum value for
\fI\%diagnosticDataCollectionFileSizeMB\fP is \fB1\fP megabyte.
.UNINDENT
.INDENT 0.0
.TP
.B diagnosticDataCollectionPeriodMillis
New in version 3.2.

.sp
Changed in version 3.4.14: Available for both \fBmongod\fP and \fBmongos\fP\&.

.sp
\fIType\fP: integer
.sp
\fIDefault\fP: 1000
.sp
Specifies the interval, in milliseconds, at which to collect
diagnostic data.
.sp
For example, the following sets the interval to
\fB5000\fP milliseconds or 5 seconds:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter diagnosticDataCollectionPeriodMillis=5000
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
The minimum value for
\fI\%diagnosticDataCollectionPeriodMillis\fP is \fB100\fP
milliseconds.
.UNINDENT
.SS Logical Session Parameters
.INDENT 0.0
.TP
.B logicalSessionRefreshMillis
.INDENT 7.0
.INDENT 3.5
.IP "Availability"
.sp
New in version 4.0.4 (and version 3.6.9).
.UNINDENT
.UNINDENT
.sp
Available for both \fBmongod\fP and \fBmongos\fP\&.
.sp
\fIType\fP: integer
.sp
\fIDefault\fP: 300000 (i.e. 5 minutes)
.sp
The interval (in milliseconds) at which the cache refreshes its logical
session records against the main session store.
.sp
You can only set \fI\%logicalSessionRefreshMillis\fP at
startup and cannot change this setting with the
\fBsetParameter\fP command.
.sp
For example, to set the \fI\%logicalSessionRefreshMillis\fP
for a \fBmongod\fP instance to 10 minutes:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter logicalSessionRefreshMillis=600000
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B localLogicalSessionTimeoutMinutes
New in version 3.6.

.sp
Available for both \fBmongod\fP and \fBmongos\fP\&.
.sp
\fIType\fP: integer
.sp
\fIDefault\fP: 30
.INDENT 7.0
.INDENT 3.5
.IP "For testing purposes only"
.sp
This parameter is intended for testing purposes only and not for
production use.
.UNINDENT
.UNINDENT
.sp
The time in minutes that a session remains active
after its most recent use. Sessions that have not received a new
read/write operation from the client or been refreshed with
\fBrefreshSessions\fP within this threshold are cleared from the
cache. State associated with an expired session may be cleaned up by the
server at any time.
.sp
This parameter applies only to the instance on which it is set. To
set this parameter on replica sets and sharded clusters, you must
specify the same value on every member; otherwise, sessions will
not function properly.
.sp
You can only set \fI\%localLogicalSessionTimeoutMinutes\fP at
startup and cannot change this setting with the
\fBsetParameter\fP command.
.sp
For example, to set the \fI\%localLogicalSessionTimeoutMinutes\fP
for a test \fBmongod\fP instance to 20 minutes:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter localLogicalSessionTimeoutMinutes=20
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B maxAcceptableLogicalClockDriftSecs
New in version 3.6.

.sp
Available for both \fBmongod\fP and \fBmongos\fP\&.
.sp
\fIType\fP: integer
.sp
\fIDefault\fP: 31536000 (1 year)
.sp
The maximum amount by which the current cluster time can be advanced;
i.e., \fI\%maxAcceptableLogicalClockDriftSecs\fP is the maximum
difference between the new value of the cluster time and the current
cluster time. Cluster time is a logical time used for ordering of
operations.
.sp
You cannot advance the cluster time to a new value if the new
cluster time differs from the current cluster time by more than
\fI\%maxAcceptableLogicalClockDriftSecs\fP,
.sp
You can only set \fI\%maxAcceptableLogicalClockDriftSecs\fP at
startup and cannot change this setting with the
\fBsetParameter\fP command.
.sp
For example, to set the \fI\%maxAcceptableLogicalClockDriftSecs\fP
for a \fBmongod\fP instance to 15 minutes:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter maxAcceptableLogicalClockDriftSecs=900
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B maxSessions
New in version 4.0.1.

.sp
Available for both \fBmongod\fP and \fBmongos\fP\&.
.sp
\fIType\fP: integer
.sp
\fIDefault\fP: 1000000
.sp
The maximum number of sessions that can be cached.
.sp
You can only set \fI\%maxSessions\fP during start\-up.
.sp
For example, to set the \fI\%maxSessions\fP
for a \fBmongod\fP instance to 1000:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter maxSessions=1000
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B TransactionRecordMinimumLifetimeMinutes
New in version 3.6.

.sp
Available for \fBmongod\fP only.
.sp
\fIType\fP: integer
.sp
\fIDefault\fP: 30
.sp
The minimum lifetime a transaction record exists in the
\fBtransactions\fP collection before the record becomes
eligible for cleanup.
.sp
You can only set \fI\%TransactionRecordMinimumLifetimeMinutes\fP at
startup and cannot change this setting with the
\fBsetParameter\fP command.
.sp
For example, to set the \fI\%TransactionRecordMinimumLifetimeMinutes\fP
for a \fBmongod\fP instance to 20 minutes:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter TransactionRecordMinimumLifetimeMinutes=20
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
\fBSEE ALSO:\fP
.INDENT 7.0
.INDENT 3.5
\fI\%localLogicalSessionTimeoutMinutes\fP
.UNINDENT
.UNINDENT
.UNINDENT
.SS Replication Parameters
.INDENT 0.0
.TP
.B enableFlowControl
New in version 4.2.

.sp
\fIType\fP: boolean
.sp
\fIDefault\fP: true
.sp
Enables or disables the mechanism that controls the rate at which the
primary applies its writes with the goal of keeping the secondary members\(aq
\fBmajority committed\fP lag under a
configurable maximum value.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
For flow control to engage, the replica set/sharded cluster must
have: featureCompatibilityVersion (FCV) of
\fB4.2\fP and read concern \fBmajority enabled\fP\&. That is, enabled flow
control has no effect if FCV is not \fB4.2\fP or if read concern
majority is disabled.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B flowControlTargetLagSeconds
New in version 4.2.

.sp
\fIType\fP: integer
.sp
\fIDefault\fP: 10
.sp
The target maximum \fBmajority committed\fP lag when running
with flow control. When flow control is enabled, the mechanism
attempts to keep the \fBmajority committed\fP lag under
the specified seconds. The parameter has no effect if flow control
is disabled.
.sp
The specified value must be greater than 0.
.sp
In general, the default settings should suffice; however, if
modifying from the default value, decreasing, rather than
increasing, the value may prove to be more useful.
.UNINDENT
.INDENT 0.0
.TP
.B flowControlWarnThresholdSeconds
New in version 4.2.

.sp
\fIType\fP: integer
.sp
\fIDefault\fP: 10
.sp
The amount of time to wait to log a warning once the flow control
mechanism detects the majority commit point has not moved.
.sp
The specified value must be greater than or equal to 0, with 0 to
disable warnings.
.UNINDENT
.INDENT 0.0
.TP
.B initialSyncTransientErrorRetryPeriodSeconds
New in version 4.4.

.sp
\fIType\fP: integer
.sp
\fIDefault\fP: 86400
.sp
The amount of time in seconds a secondary performing initial sync
attempts to resume the process if interrupted by a transient
network error. The default value is equivalent to 24 hours.
.UNINDENT
.INDENT 0.0
.TP
.B initialSyncSourceReadPreference
New in version 4.4.

.sp
\fIType\fP: String
.sp
Available for \fBmongod\fP only.
.sp
The preferred source for performing initial sync\&. Specify one of the following read
preference modes:
.INDENT 7.0
.IP \(bu 2
\fBprimary\fP
.IP \(bu 2
\fBprimaryPreferred\fP (Default for voting replica set members)
.IP \(bu 2
\fBsecondary\fP
.IP \(bu 2
\fBsecondaryPreferred\fP
.IP \(bu 2
\fBnearest\fP (Default for newly added \fIor\fP non\-voting replica set members)
.UNINDENT
.sp
If the replica set has disabled \fBchaining\fP, the default
\fI\%initialSyncSourceReadPreference\fP read preference mode
is \fBprimary\fP\&.
.sp
You cannot specify a tag set or \fBmaxStalenessSeconds\fP to
\fI\%initialSyncSourceReadPreference\fP\&.
.sp
If the \fBmongod\fP cannot find a sync source based on the
specified read preference, it logs an error and restarts the initial
sync process. The \fBmongod\fP exits with an error if it
cannot complete the initial sync process after \fB10\fP attempts. For
more information on sync source selection, see
replica\-set\-initial\-sync\-source\-selection\&.
.sp
\fI\%initialSyncSourceReadPreference\fP takes precedence over
the replica set\(aqs \fBsettings.chainingAllowed\fP setting when
selecting an initial sync source. After a replica set member
successfully completes initial sync, it defers to the value of
\fBchainingAllowed\fP when selecting a replication sync
source.
.sp
You can only set this parameter on startup, using either the
\fBsetParameter\fP
configuration file setting or the
\fB\-\-setParameter\fP command line option.
.UNINDENT
.INDENT 0.0
.TP
.B oplogInitialFindMaxSeconds
New in version 3.6.

.sp
\fIType\fP: integer
.sp
\fIDefault\fP: 60
.sp
Available for \fBmongod\fP only.
.sp
Maximum time in seconds for a member of a replica set to wait
for the \fBfind\fP command to finish during
data synchronization\&.
.UNINDENT
.INDENT 0.0
.TP
.B replWriterThreadCount
New in version 3.2.

.sp
\fIType\fP: integer
.sp
\fIDefault\fP: 16
.sp
Available for \fBmongod\fP only.
.sp
Number of threads to use to apply replicated operations in parallel.
Values can range from 1 to 256 inclusive. You can only set
\fI\%replWriterThreadCount\fP at startup and cannot change this
setting with the \fBsetParameter\fP command.
.UNINDENT
.INDENT 0.0
.TP
.B rollbackTimeLimitSecs
\fIType\fP: 64\-bit integer
.sp
\fIDefault\fP: 86400  (1 day)
.sp
Maximum age of data that can be rolled back. Negative values for
this parameter are not valid.
.sp
Starting in MongoDB 4.2+ and 4.0.13+, if the time between the end
of the to\-be\-rolledback instance\(aqs oplog and the first operation
after the common point (the last point where the source node and the
to\-be\-rolledback node had the same data) exceeds this value, the
rollback will fail.
.sp
In MongoDB 4.0.0\-4.0.12, if the time between the end of the to\-be\-rolledback
instance\(aqs oplog and the common point (the last point where the
source node and the to\-be\-rolledback node had the same data) exceeds
this value, the rollback will fail.
.sp
To effectively have an unlimited rollback period, set the value to
\fB2147483647\fP which is the maximum value allowed and equivalent to
roughly 68 years.
.sp
New in version 4.0.

.UNINDENT
.INDENT 0.0
.TP
.B waitForSecondaryBeforeNoopWriteMS
New in version 3.6.

.sp
Available for \fBmongod\fP only.
.sp
\fIType\fP: integer
.sp
\fIDefault\fP: 10
.sp
The length of time (in milliseconds) that a secondary must wait if
the \fBafterClusterTime\fP is greater than the last applied time from
the oplog. After the \fBwaitForSecondaryBeforeNoopWriteMS\fP passes,
if the \fBafterClusterTime\fP is still greater than the last applied
time, the secondary makes a no\-op write to advance the last applied
time.
.sp
The following example sets the
\fI\%waitForSecondaryBeforeNoopWriteMS\fP to 20 milliseconds:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter waitForSecondaryBeforeNoopWriteMS=20
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
During runtime, you can also set the parameter with the
\fBsetParameter\fP command:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
db.adminCommand( { setParameter: 1, waitForSecondaryBeforeNoopWriteMS: 20 } )
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B createRollbackDataFiles
Available for \fBmongod\fP only.
.sp
\fIType\fP: boolean
.sp
\fIDefault\fP: true
.sp
New in version 4.0.

.sp
Flag that determines whether MongoDB creates rollback files that contains documents affected during a
rollback.
.sp
By default, \fI\%createRollbackDataFiles\fP is \fBtrue\fP and
MongoDB creates the rollback files.
.sp
The following example sets \fI\%createRollbackDataFiles\fP
to false so that the rollback files are not created:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter createRollbackDataFiles=false
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
During runtime, you can also set the parameter with the
\fBsetParameter\fP command:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
db.adminCommand( { setParameter: 1, createRollbackDataFiles: false } )
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
For more information, see rollback\-data\-files\&.
.UNINDENT
.INDENT 0.0
.TP
.B enableElectionHandoff
New in version 4.0.2.

.sp
\fIType\fP: boolean
.sp
\fIDefault\fP: true
.sp
A flag that can reduce the downtime after the primary steps down
from either the \fBrs.stepDown()\fP method or the
\fBreplSetStepDown\fP command. Specifically, if true, when a
primary steps down after \fBrs.stepDown()\fP (or the
\fBreplSetStepDown\fP command without the \fBforce: true\fP),
it nominates an eligible secondary to call an election immediately.
If false, after the step down, secondaries can wait up to
\fBsettings.electionTimeoutMillis\fP before calling an election.
.sp
An eligible secondary must be caught up with the stepped down
primary and have \fBpriority\fP greater than 0. If
multiple secondary members meet this criteria, the stepped down
primary selects the eligible secondary with the highest
\fBpriority\fP\&. If the more than one eligible
secondary members have the same \fBpriority\fP, the
stepped down primary selects the secondary with the lowest
\fB_id\fP\&. The stepped down primary does not wait
for the effects of the handoff.
.sp
The parameter has no impact if the primary steps down for reasons
other than \fBrs.stepDown()\fP (or the
\fBreplSetStepDown\fP command without the \fBforce: true\fP).
.UNINDENT
.INDENT 0.0
.TP
.B replBatchLimitBytes
\fIDefault\fP: 104857600 (100MB)
.sp
Sets the maximum oplog application batch size in bytes.
.sp
Values can range from 16777216 (16MB) to 104857600 (100MB) inclusive.
.sp
The following example sets \fI\%replBatchLimitBytes\fP
to 64 MB so that the rollback files are not created:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter replBatchLimitBytes=67108864
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
During runtime, you can also set the parameter with the
\fBsetParameter\fP command:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
db.adminCommand( { setParameter: 1, replBatchLimitBytes: 64 * 1024 * 1024 } )
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
New in version 4.0.10.

.UNINDENT
.INDENT 0.0
.TP
.B mirrorReads
Available for \fBmongod\fP only.
.sp
\fINew in version 4.4\fP
.sp
\fIType\fP: Document
.sp
\fIDefault\fP: \fB{ samplingRate: 0.01, maxTimeMS: 1000 }\fP
.sp
Specifies the settings for mirrored reads
for the \fBmongod\fP instance. The settings only take
effect when the member is a primary.
.sp
The parameter \fI\%mirrorReads\fP takes a JSON document with
the following fields:
.TS
center;
|l|l|.
_
T{
Field
T}	T{
Description
T}
_
T{
\fBsamplingRate\fP
T}	T{
The sampling rate used to mirror a subset of operations
that support mirroring
to a subset of electable (i.e. \fBpriority greater than
0\fP) secondaries. That is, the primary
mirrors reads to each electable secondary at the specified
sampling rate.
.sp
Valid values are greater than or equal to \fB0.0\fP and less
than or equal to \fB1.0\fP\&.  Value of \fB0.0\fP turns off mirroring.
.sp
For example, given a replica set with a primary and two
electable secondaries and a sampling rate of \fB0.10\fP, the
primary mirrors reads to each electable secondary at the
sampling rate of 10 percent such that one read may be
mirrored to one secondary and not to the other or to both or
to neither. That is, if the primary receives \fB100\fP
operations that can be mirrored, the sampling rate of
\fB0.10\fP may result in \fB8\fP reads being mirrored to one
secondary and \fB13\fP reads to the other or \fB10\fP to each,
etc.
.sp
The default value is \fB0.01\fP\&.
T}
_
T{
\fBmaxTimeMS\fP
T}	T{
The maximum time in milliseconds for the mirrored reads. The
default value is \fB1000\fP\&.
.sp
The \fBmaxTimeMS\fP for the mirrored reads is separate from the
\fBmaxTimeMS\fP of the original read being mirrored.
T}
_
.TE
.sp
You can set \fI\%mirrorReads\fP during startup in the
\fBconfiguration file\fP or with the
\fB\-\-setParameter\fP option on the command line. If specifying from
the configuration file or on the command line, \fBenclose the\fP
\fBmirrorReads\fP \fBdocument in quotes\fP\&.
.sp
For example, the following sets the mirror reads sampling rate to
\fB0.10\fP from the command line:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter mirrorReads=\(aq{ samplingRate: 0.10 }\(aq
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Or, to specify in a configuration file:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
setParameter:
   mirrorReads: \(aq{samplingRate: 0.10}\(aq
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Or if using the \fBsetParameter\fP command in a
\fBmongo\fP shell connected to a running
\fBmongod\fP, do \fBnot\fP enclose the document in quotes:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
db.adminCommand( { setParameter: 1, mirrorReads: { samplingRate: 0.10 } } )
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.SS Sharding Parameters
.sp
\fBNOTE:\fP
.INDENT 0.0
.INDENT 3.5
Starting in version 4.2, MongoDB removes the parameter
\fBAsyncRequestsSenderUseBaton\fP and always enables the performance
enhancement controlled by the parameter.
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B enableShardedIndexConsistencyCheck
\fINew in version 4.4 (and 4.2.6).\fP
.sp
\fIType\fP: boolean
.sp
\fIDefault\fP: true
.sp
Available for \fBmongod\fP only.
.sp
If set on the config server\(aqs primary, enables or disables the index
consistency check for sharded collections. The parameter has no
effect on the \fBmongod\fP if it is not the config server\(aqs
primary.
.sp
The following example sets
\fI\%enableShardedIndexConsistencyCheck\fP to \fBfalse\fP for a
config server primary:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter enableShardedIndexConsistencyCheck=false
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
During runtime, you can also set the parameter with the
\fBsetParameter\fP command:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
db.adminCommand( { setParameter: 1, enableShardedIndexConsistencyCheck: false } )
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
\fBSEE ALSO:\fP
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
\fI\%shardedIndexConsistencyCheckIntervalMS\fP parameter
.IP \(bu 2
\fBshardedIndexConsistency\fP metrics returned by the
\fBserverStatus\fP command.
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B shardedIndexConsistencyCheckIntervalMS
\fINew in version 4.4 (and 4.2.6).\fP
.sp
\fIType\fP: integer
.sp
\fIDefault\fP: 600000
.sp
Available for \fBmongod\fP only.
.sp
If set on the config server\(aqs primary, the interval, in
milliseconds, at which the config server\(aqs primary checks the index
consistency of sharded collections. The parameter has no effect on
the \fBmongod\fP if it is not the config server\(aqs primary.
.sp
You can only set the parameter during startup, and cannot change
this setting using the \fBsetParameter\fP database command.
.sp
For example, the following sets the interval at 300000 milliseconds
(i.e. 5 minutes) at startup:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter shardedIndexConsistencyCheckIntervalMS=300000
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
\fBSEE ALSO:\fP
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
\fI\%enableShardedIndexConsistencyCheck\fP parameter
.IP \(bu 2
\fBshardedIndexConsistency\fP metrics returned by the
\fBserverStatus\fP commandq
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B maxTimeMSForHedgedReads
New in version 4.4.

.sp
\fIType\fP: integer
.sp
\fIDefault\fP: 150
.sp
Available for \fBmongos\fP only.
.sp
Specifies the maximimum time limit (in milliseconds) for the
hedged read\&. That is, the additional
read sent to hedge the read operation uses the \fBmaxTimeMS\fP value
of \fI\%maxTimeMSForHedgedReads\fP while the read operation
that is being hedged uses the \fBmaxTimeMS\fP value specified for the
operation.
.sp
For example, to set the limit to 200 milliseconds, you can issue the
following during startup:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongos \-\-setParameter maxTimeMSForHedgedReads=200
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Or if using the \fBsetParameter\fP command in a
\fBmongo\fP shell connected to a running
\fBmongos\fP:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
db.adminCommand( { setParameter: 1, maxTimeMSForHedgedReads: 200 } )
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
\fBSEE ALSO:\fP
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
\fI\%readHedgingMode\fP
.IP \(bu 2
mongos\-hedged\-reads
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B readHedgingMode
New in version 4.4.

.sp
\fIType\fP: string
.sp
\fIDefault\fP: on
.sp
Available for \fBmongos\fP only.
.sp
Specifies whether \fBmongos\fP supports hedged reads for
those read operations whose read preference have enabled the hedged read option.
.sp
Available values are:
.TS
center;
|l|l|.
_
T{
Value
T}	T{
Description
T}
_
T{
\fBon\fP
T}	T{
The \fBmongos\fP instance supports hedged reads for
read operations whose read preference have enabled the hedged read option.
T}
_
T{
\fBoff\fP
T}	T{
The \fBmongos\fP instance does not support hedged
reads. That is, hedged reads are unavailable, even for read
operations whose read preference have enabled the hedged read
option.
T}
_
.TE
.sp
For example, to turn off hedged read support for a
\fBmongos\fP instance, you can issue the following during
startup:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongos \-\-setParameter readHedgingMode=off
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Or if using the \fBsetParameter\fP command in a
\fBmongo\fP shell connected to a running
\fBmongos\fP:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
db.adminCommand( { setParameter: 1, readHedgingMode: "off" } )
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
\fBSEE ALSO:\fP
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
mongos\-hedged\-reads
.IP \(bu 2
\fI\%maxTimeMSForHedgedReads\fP
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B replMonitorMaxFailedChecks
\fIAvailable in MongoDB 3.2 only\fP
.sp
Type: integer
.sp
Default: 30
.sp
The number of times the \fBmongod\fP or \fBmongos\fP
instance tries to reach the replica sets in the sharded cluster
(e.g. shard replica sets, config server replica set) to monitor the
replica set status and topology.
.sp
When the number of consecutive unsuccessful attempts exceeds this
parameter value, the \fBmongod\fP or \fBmongos\fP instance
denotes the monitored replica set as unavailable. If the monitored
replica set is the config server replica set:
.INDENT 7.0
.IP \(bu 2
For MongoDB 3.2.0\-3.2.9, the monitoring \fBmongod\fP or
\fBmongos\fP instance will become unusable and needs to be
restarted. See the \fI\%v3.2 troubleshooting guide\fP
for more details.
.IP \(bu 2
For MongoDB 3.2.10 and later 3.2\-series, see also
\fI\%timeOutMonitoringReplicaSets\fP\&.
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B timeOutMonitoringReplicaSets
\fIAvailable in MongoDB 3.2.10 and later 3.2\-series only\fP
.sp
Type: integer
.sp
Default: false
.sp
The flag that determines whether the \fBmongod\fP or
\fBmongos\fP instance should stop its attempt to reach the
monitored replica set after unsuccessfully trying
\fI\%replMonitorMaxFailedChecks\fP number of times.
.sp
If the monitored replica set is the config server replica set and
\fI\%timeOutMonitoringReplicaSets\fP is set to \fBtrue\fP, you
must restart \fBmongod\fP or \fBmongos\fP if the
\fBmongod\fP or \fBmongos\fP instance cannot reach any of
the config servers for the specified number of times. See the
\fI\%v3.2 troubleshooting guide\fP
for more details.
.UNINDENT
.INDENT 0.0
.TP
.B ShardingTaskExecutorPoolHostTimeoutMS
Type: integer
.sp
Default: 300000 (i.e. 5 minutes)
.sp
Available for \fBmongos\fP only.
.sp
Maximum time that \fBmongos\fP goes without communication to a
host before \fBmongos\fP drops all connections to the host.
.sp
You can only set this parameter during start\-up and cannot change
this setting using the \fBsetParameter\fP database command.
.sp
If set, \fI\%ShardingTaskExecutorPoolHostTimeoutMS\fP should be
greater than the sum of
\fI\%ShardingTaskExecutorPoolRefreshRequirementMS\fP and
\fI\%ShardingTaskExecutorPoolRefreshTimeoutMS\fP\&. Otherwise,
\fBmongos\fP adjusts the value of
\fI\%ShardingTaskExecutorPoolHostTimeoutMS\fP to be greater than the
sum.
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongos \-\-setParameter ShardingTaskExecutorPoolHostTimeoutMS=120000
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B ShardingTaskExecutorPoolMaxConnecting
New in version 3.6.

.sp
Type: integer
.sp
Default: 2
.sp
Available for \fBmongos\fP only.
.sp
Maximum number of simultaneous initiating connections (including
pending connections in setup/refresh state) each TaskExecutor
connection pool can have to a \fBmongod\fP instance. You can
set this parameter to control the rate at which \fBmongos\fP
adds connections to a \fBmongod\fP instance.
.sp
If set, \fI\%ShardingTaskExecutorPoolMaxConnecting\fP should be
less than or equal to \fI\%ShardingTaskExecutorPoolMaxSize\fP\&.
If it is greater, \fBmongos\fP ignores the
\fI\%ShardingTaskExecutorPoolMaxConnecting\fP value.
.sp
You can only set this parameter during start\-up and cannot change
this setting using the \fBsetParameter\fP database command.
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongos \-\-setParameter ShardingTaskExecutorPoolMaxConnecting=20
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B ShardingTaskExecutorPoolMaxSize
Type: integer
.sp
Default: 2\s-2\u64\d\s0 \- 1
.sp
Available for \fBmongos\fP only.
.sp
Maximum number of outbound connections each TaskExecutor connection
pool can open to any given \fBmongod\fP instance. The maximum
possible connections to any given host across all TaskExecutor pools
is:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
ShardingTaskExecutorPoolMaxSize * taskExecutorPoolSize
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
You can only set this parameter during start\-up and cannot change
this setting using the \fBsetParameter\fP database command.
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongos \-\-setParameter ShardingTaskExecutorPoolMaxSize=4
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
\fBmongos\fP can have up to \fBn\fP TaskExecutor connection
pools, where \fBn\fP is the number of cores. See
\fI\%taskExecutorPoolSize\fP\&.
.sp
\fBSEE ALSO:\fP
.INDENT 7.0
.INDENT 3.5
\fI\%ShardingTaskExecutorPoolMinSize\fP
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B ShardingTaskExecutorPoolMinSize
Type: integer
.sp
Default: 1
.sp
Available for both \fBmongod\fP and \fBmongos\fP\&.
.sp
Minimum number of outbound connections each TaskExecutor connection
pool can open to any given \fBmongod\fP instance.
.sp
\fBShardingTaskExecutorPoolMinSize\fP connections are created the
first time a connection to a new host is requested from the pool.
While the pool is idle, the pool maintains this number of
connections until \fI\%ShardingTaskExecutorPoolHostTimeoutMS\fP
milliseconds pass without any application using that pool.
.sp
For a \fBmongos\fP using the
\fI\%warmMinConnectionsInShardingTaskExecutorPoolOnStartup\fP
parameter, the \fBShardingTaskExecutorPoolMinSize\fP parameter also
controls how many connections to each shard host are established on
startup of the \fBmongos\fP instance before it begins
accepting incoming client connections.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
In MongoDB 4.4, the
\fI\%warmMinConnectionsInShardingTaskExecutorPoolOnStartup\fP
parameter is enabled by default for the \fBmongos\fP\&.
.UNINDENT
.UNINDENT
.sp
You can only set this parameter during start\-up and cannot change
this setting using the \fBsetParameter\fP database command.
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongos \-\-setParameter ShardingTaskExecutorPoolMinSize=2
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
\fBmongos\fP can have up to \fBn\fP TaskExecutor connection
pools, where \fBn\fP is the number of cores. See
\fI\%taskExecutorPoolSize\fP\&.
.sp
\fBSEE ALSO:\fP
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
\fI\%ShardingTaskExecutorPoolMaxSize\fP
.IP \(bu 2
\fI\%warmMinConnectionsInShardingTaskExecutorPoolOnStartup\fP
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B ShardingTaskExecutorPoolRefreshRequirementMS
Type: integer
.sp
Default: 60000 (1 minute)
.sp
Available for \fBmongos\fP only.
.sp
Maximum time the \fBmongos\fP waits before attempting to
heartbeat a resting connection in the pool.
.sp
You can only set this parameter during start\-up and cannot change
this setting using the \fBsetParameter\fP database command.
.sp
If set, \fI\%ShardingTaskExecutorPoolRefreshRequirementMS\fP should be
greater than \fI\%ShardingTaskExecutorPoolRefreshTimeoutMS\fP\&.
Otherwise, \fBmongos\fP adjusts the value of
\fI\%ShardingTaskExecutorPoolRefreshTimeoutMS\fP to be less than
\fI\%ShardingTaskExecutorPoolRefreshRequirementMS\fP\&.
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongos \-\-setParameter ShardingTaskExecutorPoolRefreshRequirementMS=90000
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B ShardingTaskExecutorPoolRefreshTimeoutMS
Type: integer
.sp
Default: 20000 (20 seconds)
.sp
Available for \fBmongos\fP only.
.sp
Maximum time the \fBmongos\fP waits for a heartbeat before
timing out the heartbeat.
.sp
You can only set this parameter during start\-up and cannot change
this setting using the \fBsetParameter\fP database command.
.sp
If set, \fI\%ShardingTaskExecutorPoolRefreshTimeoutMS\fP should be
less than \fI\%ShardingTaskExecutorPoolRefreshRequirementMS\fP\&.
Otherwise, \fBmongos\fP adjusts the value of
\fI\%ShardingTaskExecutorPoolRefreshTimeoutMS\fP to be less than
\fI\%ShardingTaskExecutorPoolRefreshRequirementMS\fP\&.
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongos \-\-setParameter ShardingTaskExecutorPoolRefreshTimeoutMS=30000
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B ShardingTaskExecutorPoolReplicaSetMatching
New in version 4.2.

.sp
Type: string
.sp
Default: "matchPrimaryNode"
.sp
Available for \fBmongos\fP only.
.sp
The policy that determines the minimum size limit of the
\fBmongos\fP instance\(aqs connection pools to the sharded
cluster\(aqs replica set secondaries.
.sp
Available values are:
.TS
center;
|l|l|.
_
T{
Matching Policy
T}	T{
Description
T}
_
T{
\fB"matchPrimaryNode"\fP (Default)
T}	T{
For each replica set in the sharded cluster (i.e. shard
replica set and config servers), the minimum size limit of
the \fBmongos\fP instance\(aqs connection pool to each
secondary of that replica set is equal to the size of its
connection pool to the primary.
.sp
In case of primary stepdown, \fBmatchPrimaryNode\fP ensures
that any secondary that becomes the primary can handle the
current level of primary reads and writes.
T}
_
T{
\fB"matchBusiestNode"\fP
T}	T{
For each replica set in the sharded cluster (i.e. shard
replica set and config servers), the minimum size limit of
the \fBmongos\fP instance\(aqs connection pool to each
member of that replica set is equal to the largest among
the active connections counts to the primary and each
secondary members.
.sp
With \fB"matchBusiestNode"\fP, \fBmongos\fP maintains
enough connections to each secondary to handle the current
level of primary and secondary reads and writes. The number
of connections to maintain in the pool decreases as the
number of active connections decreases.
T}
_
T{
\fB"disabled"\fP
T}	T{
For each replica set in the sharded cluster (i.e. shard
replica set and config servers), the minimum number of
connections in the \fBmongos\fP instance\(aqs
connection pool to each secondary is equal to the
\fI\%ShardingTaskExecutorPoolMinSize\fP\&.
T}
_
.TE
.sp
The following example sets the
\fI\%ShardingTaskExecutorPoolReplicaSetMatching\fP to
\fB"matchBusiestNode"\fP during startup:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter ShardingTaskExecutorPoolReplicaSetMatching="matchBusiestNode"
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
During runtime, you can also set the parameter with the
\fBsetParameter\fP command:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
db.adminCommand( { setParameter: 1,  ShardingTaskExecutorPoolReplicaSetMatching: "matchBusiestNode" } )
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B taskExecutorPoolSize
Changed in version 4.0.

.sp
Type: integer
.sp
Default: 1
.sp
Available for \fBmongos\fP only.
.sp
The number of Task Executor connection pools to use for a given
\fBmongos\fP\&.
.sp
If the parameter value is \fB0\fP or less, the number of Task Executor
connection pools is the number of cores with the following
exceptions:
.INDENT 7.0
.IP \(bu 2
If the number of cores is less than 4, the number of Task Executor
connection pools is 4.
.IP \(bu 2
If the number of cores is greater than 64, the number of Task
Executor connection pools is 64.
.UNINDENT
.sp
Starting in MongoDB 4.0, the default value of
\fI\%taskExecutorPoolSize\fP is \fB1\fP:
.INDENT 7.0
.IP \(bu 2
In MongoDB 4.0 deployment, you can set
\fI\%taskExecutorPoolSize\fP to \fB0\fP and, on Linux, set
\fI\%AsyncRequestsSenderUseBaton\fP to
\fBfalse\fP for the previous behavior.
.IP \(bu 2
In MongoDB 4.2+ deployment, MongoDB removes the
\fBAsyncRequestsSenderUseBaton\fP parameter and always enables the
performance enhancement controlled by the parameter.
.UNINDENT
.sp
You can only set this parameter during start\-up and cannot change
this setting using the \fBsetParameter\fP database command.
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongos \-\-setParameter taskExecutorPoolSize=6
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
\fBSEE ALSO:\fP
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
\fI\%ShardingTaskExecutorPoolMaxSize\fP
.IP \(bu 2
\fI\%ShardingTaskExecutorPoolMinSize\fP
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B loadRoutingTableOnStartup
New in version 4.4.

.sp
Type: boolean
.sp
\fIDefault\fP: true
.sp
Available for \fBmongos\fP only.
.sp
Configures a \fBmongos\fP instance to preload the routing
table for a sharded cluster on startup. With this setting
enabled, the \fBmongos\fP caches the cluster\-wide routing
table for each sharded collection as part of its startup procedure,
before it begins accepting client connections.
.sp
Without this setting enabled, the \fBmongos\fP only loads
a routing table as needed for incoming client connections, and only
loads the specific routing table for the namespace of a given
request.
.sp
A \fBmongos\fP instance with the
\fI\%loadRoutingTableOnStartup\fP parameter enabled may
experience longer startup times, but will result in faster servicing
of initial client connections once started.
.sp
\fI\%loadRoutingTableOnStartup\fP is enabled by default.
.sp
You can only set this parameter on startup, using either the
\fBsetParameter\fP configuration file setting or the
\fB\-\-setParameter\fP command line option.
.UNINDENT
.INDENT 0.0
.TP
.B warmMinConnectionsInShardingTaskExecutorPoolOnStartup
New in version 4.4.

.sp
Type: boolean
.sp
\fIDefault\fP: true
.sp
Available for \fBmongos\fP only.
.sp
Configures a \fBmongos\fP instance to prewarm its connection
pool on startup. With this parameter enabled, the
\fBmongos\fP attempts to establish
\fI\%ShardingTaskExecutorPoolMinSize\fP network
connections to each shard server as part of its startup procedure,
before it begins accepting client connections.
.sp
A timeout for this behavior can be configured with the
\fI\%warmMinConnectionsInShardingTaskExecutorPoolOnStartupWaitMS\fP
parameter. If this timeout is reached, the \fBmongos\fP will
begin accepting client connections regardless of the size of its
connection pool.
.sp
A \fBmongos\fP instance with this parameter enabled may
experience longer startup times, but will result in faster servicing
of initial client connections once started.
.sp
\fI\%warmMinConnectionsInShardingTaskExecutorPoolOnStartup\fP is
enabled by default.
.sp
You can only set this parameter on startup, using either the
\fBsetParameter\fP configuration file setting or the
\fB\-\-setParameter\fP command line option.
.sp
\fBSEE ALSO:\fP
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
\fI\%warmMinConnectionsInShardingTaskExecutorPoolOnStartupWaitMS\fP
.IP \(bu 2
\fI\%ShardingTaskExecutorPoolMinSize\fP
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B warmMinConnectionsInShardingTaskExecutorPoolOnStartupWaitMS
New in version 4.4.

.sp
Type: integer
.sp
\fIDefault\fP: 2000 (i.e. 2 seconds)
.sp
Available for \fBmongos\fP only.
.sp
Sets the timeout threshold in milliseconds for a
\fBmongos\fP to wait for \fI\%ShardingTaskExecutorPoolMinSize\fP
connections to be established per shard host when using the
\fI\%warmMinConnectionsInShardingTaskExecutorPoolOnStartup\fP
parameter. If this timeout is reached, the \fBmongos\fP will
begin accepting client connections regardless of the size of its
connection pool.
.sp
You can only set this parameter on startup, using either the
\fBsetParameter\fP configuration file setting or the
\fB\-\-setParameter\fP command line option.
.sp
\fBSEE ALSO:\fP
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
\fI\%warmMinConnectionsInShardingTaskExecutorPoolOnStartup\fP
.IP \(bu 2
\fI\%ShardingTaskExecutorPoolMinSize\fP
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B migrateCloneInsertionBatchDelayMS
New in version 4.0.5: The parameter is also available starting in 3.4.18 and 3.6.10

.sp
Available for \fBmongod\fP only.
.sp
Type: Non\-negative integer
.sp
Default: 0
.sp
Time in milliseconds to wait between batches of insertions during
cloning step of the migration process. This wait is in addition to
the \fBsecondaryThrottle\fP\&.
.sp
The default value of \fB0\fP indicates no additional wait.
.sp
The following sets the \fI\%migrateCloneInsertionBatchDelayMS\fP to 200
milliseconds:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter migrateCloneInsertionBatchDelayMS=200
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
The parameter may also be set using the \fBsetParameter\fP
command:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
db.adminCommand( { setParameter: 1, migrateCloneInsertionBatchDelayMS: 200 } )
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B migrateCloneInsertionBatchSize
New in version 4.0.5: The parameter is also available starting in 3.4.18 and 3.6.10

.sp
Available for \fBmongod\fP only.
.sp
Type: Non\-negative integer
.sp
Default: 0
.sp
The maximum number of documents to insert in a single batch during
the cloning step of the migration process.
.sp
The default value of \fB0\fP indicates no maximum number of documents
per batch. However, in practice, this results in batches that
contain up to 16 MB of documents.
.sp
The following sets the \fI\%migrateCloneInsertionBatchSize\fP to 100
documents:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter migrateCloneInsertionBatchSize=100
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
The parameter may also be set using the \fBsetParameter\fP
command:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
db.adminCommand( { setParameter: 1, migrateCloneInsertionBatchSize: 100 } )
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B orphanCleanupDelaySecs
New in version 3.6.

.sp
Default: 900 (15 minutes)
.sp
Available for \fBmongod\fP only.
.sp
Minimum delay before a migrated chunk is deleted from the source
shard.
.sp
Before deleting the chunk during chunk migration, MongoDB waits for
\fI\%orphanCleanupDelaySecs\fP or for in\-progress queries involving
the chunk to complete on the shard primary, whichever is longer.
.sp
However, because the shard primary has no knowledge of in\-progress queries
run on the shard secondaries, queries that use the chunk but are run on
secondaries may see documents disappear if these queries take longer than
the time to complete the shard primary queries and the
\fI\%orphanCleanupDelaySecs\fP\&.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
This behavior only affects in\-progress queries that start before the
chunk migration. Queries that start after the chunk migration starts
will not use the migrating chunk.
.UNINDENT
.UNINDENT
.sp
If a shard has storage constraints, consider reducing this value
temporarily. If running queries that exceed 15 minutes on shard
secondaries, consider increasing this value.
.sp
The following sets the \fI\%orphanCleanupDelaySecs\fP to 20 minutes:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter orphanCleanupDelaySecs=1200
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
This may also be set using the \fBsetParameter\fP command:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
db.adminCommand( { setParameter: 1, orphanCleanupDelaySecs: 1200 } )
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B rangeDeleterBatchDelayMS
New in version 4.0.1: The parameter is also available starting in 3.4.17 and 3.6.7.

.sp
Available for \fBmongod\fP only.
.sp
Type: Non\-negative integer
.sp
Default: 20
.sp
The amount of time in milliseconds to wait before the next batch of
deletion during the cleanup stage of chunk migration (or the \fBcleanupOrphaned\fP
command).
.sp
In MongoDB 3.4, consider whether _secondaryThrottle is set before modifying the
\fI\%rangeDeleterBatchDelayMS\fP\&. In MongoDB 3.4, the
_secondaryThrottle replication delay occurs after each document deletion
instead of after the batch deletion.
.sp
In MongoDB 3.6+, the _secondaryThrottle replication delay occurs after each batch deletion.
.sp
The following sets the \fI\%rangeDeleterBatchDelayMS\fP to 200
milliseconds:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter rangeDeleterBatchDelayMS=200
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
The parameter may also be set using the \fBsetParameter\fP
command:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
db.adminCommand( { setParameter: 1, rangeDeleterBatchDelayMS: 200 } )
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B rangeDeleterBatchSize
New in version 4.0.5: The parameter is also available starting in 3.4.19 and 3.6.10

.sp
Available for \fBmongod\fP only.
.sp
Type: Non\-negative integer
.sp
Default: 0
.sp
The maximum number of documents in each batch to delete during the
cleanup stage of chunk migration
(or the \fBcleanupOrphaned\fP command).
.sp
The default value of \fB0\fP indicates that the system chooses an
appropriate value, generally 128 documents.
.sp
The following sets the \fI\%rangeDeleterBatchSize\fP to 100
documents:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter rangeDeleterBatchSize=100
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
The parameter may also be set using the \fBsetParameter\fP
command:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
db.adminCommand( { setParameter: 1, rangeDeleterBatchSize: 100 } )
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B skipShardingConfigurationChecks
New in version 3.6.3.

.sp
Available for \fBmongod\fP only.
.sp
Type: boolean
.sp
Default: false
.sp
When \fBtrue\fP, allows for starting a shard member or config server
member as a standalone for maintenance operations. This parameter is
mutually exclusive with the \fB\-\-configsvr\fP or \fB\-\-shardsvr\fP options.
.sp
You can only set this parameter during start\-up and cannot change
this setting using the \fBsetParameter\fP database command.
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter skipShardingConfigurationChecks=true
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
\fBIMPORTANT:\fP
.INDENT 7.0
.INDENT 3.5
Once maintenance has completed, remove the
\fI\%skipShardingConfigurationChecks\fP parameter when
restarting the \fBmongod\fP\&.
.UNINDENT
.UNINDENT
.sp
The parameter is also available for MongoDB versions:
.INDENT 7.0
.IP \(bu 2
MongoDB 3.2.19+
.IP \(bu 2
MongoDB 3.4.11+
.UNINDENT
.UNINDENT
.SS Storage Parameters
.INDENT 0.0
.TP
.B journalCommitInterval
Available for \fBmongod\fP only.
.sp
Specify an integer between \fB1\fP and \fB500\fP signifying the number
of milliseconds (ms) between journal commits.
.sp
Consider the following example which sets the
\fI\%journalCommitInterval\fP to \fB200\fP ms:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
db.adminCommand( { setParameter: 1, journalCommitInterval: 200 } )
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
\fBSEE ALSO:\fP
.INDENT 7.0
.INDENT 3.5
\fBstorage.journal.commitIntervalMs\fP
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B syncdelay
Available for \fBmongod\fP only.
.sp
Specify the interval in seconds between fsync operations
where \fBmongod\fP flushes its working memory to disk. By
default, \fBmongod\fP flushes memory to disk every 60
seconds. In almost every situation you should not set this value
and use the default setting.
.sp
Consider the following example which sets the \fBsyncdelay\fP to
\fB60\fP seconds:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
db.adminCommand( { setParameter: 1, syncdelay: 60 } )
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
\fBSEE ALSO:\fP
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
\fI\%journalCommitInterval\fP
.IP \(bu 2
\fBstorage.syncPeriodSecs\fP
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B honorSystemUmask
New in version 3.6.

.sp
\fIDefault\fP: \fBfalse\fP
.sp
If \fI\%honorSystemUmask\fP is set to \fBtrue\fP, new files
created by MongoDB have permissions in accordance with the
user\(aqs \fBumask\fP settings.
.sp
If \fI\%honorSystemUmask\fP is set to \fBfalse\fP, new files
created by MongoDB have permissions set to \fB600\fP, which gives
read and write permissions only to the owner. New directories have
permissions set to \fB700\fP\&.
.sp
You can only set this parameter during start\-up and cannot change
this setting using the \fBsetParameter\fP database command.
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter honorSystemUmask=true
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
\fI\%honorSystemUmask\fP is not available on Windows systems.
.UNINDENT
.UNINDENT
.UNINDENT
.SS WiredTiger Parameters
.INDENT 0.0
.TP
.B wiredTigerMaxCacheOverflowSizeGB
.INDENT 7.0
.INDENT 3.5
.IP "Deprecated in MongoDB 4.4"
.sp
MongoDB deprecates the \fBwiredTigerMaxCacheOverflowSizeGB\fP
parameter. The parameter has no effect starting in MongoDB 4.4.
.UNINDENT
.UNINDENT
.sp
\fIDefault\fP: 0 (No specified maximum)
.sp
Available for \fBmongod\fP only.
.sp
Specify the maximum size (in GB) for the "lookaside (or cache
overflow) table" file \fBWiredTigerLAS.wt\fP for MongoDB
4.2.1\-4.2.x and 4.0.12\-4.0.x. The file no longer exists starting in
version 4.4.
.sp
The parameter can accept the following values:
.TS
center;
|l|l|.
_
T{
Value
T}	T{
Description
T}
_
T{
\fB0\fP
T}	T{
The default value. If set to \fB0\fP, the file size is
unbounded.
T}
_
T{
number >= 0.1
T}	T{
The maximum size (in GB). If the \fBWiredTigerLAS.wt\fP
file exceeds this size, \fBmongod\fP exits with a
fatal assertion. You can clear the \fBWiredTigerLAS.wt\fP
file and restart \fBmongod\fP\&.
T}
_
.TE
.sp
You can only set this parameter during runtime using the
\fBsetParameter\fP database command:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
db.adminCommand( { setParameter: 1, wiredTigerMaxCacheOverflowSizeGB: 100 } )
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
To set the maximum size during start up, use the
\fBstorage.wiredTiger.engineConfig.maxCacheOverflowFileSizeGB\fP
instead.
.sp
\fIAvailable starting in MongoDB 4.2.1 (and 4.0.12)\fP
.UNINDENT
.INDENT 0.0
.TP
.B wiredTigerConcurrentReadTransactions
Available for \fBmongod\fP only.
.sp
Available for the WiredTiger storage engine only.
.sp
Specify the maximum number of concurrent read transactions allowed
into the WiredTiger storage engine.
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
db.adminCommand( { setParameter: 1, wiredTigerConcurrentReadTransactions: <num> } )
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
\fBSEE ALSO:\fP
.INDENT 7.0
.INDENT 3.5
\fBwiredTiger.concurrentTransactions\fP
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B wiredTigerConcurrentWriteTransactions
Available for \fBmongod\fP only.
.sp
Available for the WiredTiger storage engine only.
.sp
Specify the maximum number of concurrent write transactions allowed
into the WiredTiger storage engine.
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
db.adminCommand( { setParameter: 1, wiredTigerConcurrentWriteTransactions: <num> } )
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
\fBSEE ALSO:\fP
.INDENT 7.0
.INDENT 3.5
\fBwiredTiger.concurrentTransactions\fP
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B wiredTigerEngineRuntimeConfig
Available for \fBmongod\fP only.
.sp
Specify \fBwiredTiger\fP storage engine configuration options for a
running \fBmongod\fP instance. You can \fIonly\fP set this
parameter using the \fBsetParameter\fP command and \fInot\fP
using the command line or configuration file option.
.sp
\fBWARNING:\fP
.INDENT 7.0
.INDENT 3.5
Avoid modifying the \fI\%wiredTigerEngineRuntimeConfig\fP
unless under the direction from MongoDB engineers as this setting has
major implication across both WiredTiger and MongoDB.
.UNINDENT
.UNINDENT
.sp
Consider the following operation prototype:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
db.adminCommand({
   "setParameter": 1,
   "wiredTigerEngineRuntimeConfig": "<option>=<setting>,<option>=<setting>"
})
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
See the WiredTiger documentation for all available \fI\%WiredTiger
configuration options\fP\&.
.UNINDENT
.SS Auditing Parameters
.INDENT 0.0
.TP
.B auditAuthorizationSuccess
\fIDefault\fP: \fBfalse\fP
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
Available only in \fI\%MongoDB Enterprise\fP
and \fI\%MongoDB Atlas\fP\&.
.UNINDENT
.UNINDENT
.sp
Available for both \fBmongod\fP and \fBmongos\fP\&.
.sp
Enables the auditing of authorization
successes for the authCheck
action.
.sp
When \fI\%auditAuthorizationSuccess\fP is \fBfalse\fP, the
audit system only logs the authorization
failures for \fBauthCheck\fP\&.
.sp
To enable the audit of authorization successes, issue the following
command:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
db.adminCommand( { setParameter: 1, auditAuthorizationSuccess: true } )
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Enabling \fI\%auditAuthorizationSuccess\fP degrades performance
more than logging only the authorization failures.
.UNINDENT
.sp
\fBSEE ALSO:\fP
.INDENT 0.0
.INDENT 3.5
\fBgetParameter\fP
.UNINDENT
.UNINDENT
.SS Transaction Parameters
.INDENT 0.0
.TP
.B transactionLifetimeLimitSeconds
New in version 4.0.

.sp
Available for \fBmongod\fP only.
.sp
\fIDefault\fP: 60
.sp
Specifies the lifetime of multi\-document transactions\&. Transactions that exceeds this limit are
considered expired and will be aborted by a periodic cleanup
process. The cleanup process runs every
\fI\%transactionLifetimeLimitSeconds\fP/2 seconds or at least
once per every 60 seconds.
.sp
The cleanup process helps relieve storage cache pressure.
.sp
The minimum value for transactionLifetimeLimitSeconds is \fB1\fP
second.
.sp
The following sets the
\fI\%transactionLifetimeLimitSeconds\fP to \fB30\fP
seconds:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
db.adminCommand( { setParameter: 1, transactionLifetimeLimitSeconds: 30 } )
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
You can also set parameter \fI\%transactionLifetimeLimitSeconds\fP at
startup time.
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter "transactionLifetimeLimitSeconds=30"
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
To set the parameter for a sharded cluster, the parameter must be
modified for all shard replica set members.
.UNINDENT
.INDENT 0.0
.TP
.B maxTransactionLockRequestTimeoutMillis
New in version 4.0.

.sp
Available for \fBmongod\fP only.
.sp
\fIType\fP: integer
.sp
\fIDefault\fP: 5
.sp
The maximum amount of time in milliseconds that multi\-document
transactions should wait to acquire locks
required by the operations in the transaction.
.sp
If the transaction cannot acquire the locks after waiting
\fI\%maxTransactionLockRequestTimeoutMillis\fP, the transaction
aborts.
.sp
By default, multi\-document transactions
wait \fB5\fP milliseconds. That is, if the transaction cannot acquire
the locks within \fB5\fP milliseconds, the transaction aborts. If an
operation provides a greater timeout in a lock request,
\fI\%maxTransactionLockRequestTimeoutMillis\fP overrides the
operation\-specific timeout.
.sp
You can set \fI\%maxTransactionLockRequestTimeoutMillis\fP to:
.INDENT 7.0
.IP \(bu 2
\fB0\fP such that if the transaction cannot acquire the required
locks immediately, the transaction aborts.
.IP \(bu 2
A number greater than \fB0\fP to wait the specified time to acquire
the required locks. This can help obviate transaction aborts on
momentary concurrent lock acquisitions, like fast\-running metadata
operations. However, this could possibly delay the abort of
deadlocked transaction operations.
.IP \(bu 2
\fB\-1\fP to use the operation specific timeout.
.UNINDENT
.sp
The following sets the
\fI\%maxTransactionLockRequestTimeoutMillis\fP to \fB20\fP
milliseconds:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
db.adminCommand( { setParameter: 1, maxTransactionLockRequestTimeoutMillis: 20 } )
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
You can also set this parameter during start\-up:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
mongod \-\-setParameter maxTransactionLockRequestTimeoutMillis=20
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.SH AUTHOR
MongoDB Documentation Project
.SH COPYRIGHT
2008-2020
.\" Generated by docutils manpage writer.
.

.\" Man page generated from reStructuredText.
.
.TH "MONGOKERBEROS" "1" "Jun 23, 2020" "4.4" "mongodb-manual"
.SH NAME
mongokerberos \- MongoDB Kerberos Validation Utility
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.SS On this page
.INDENT 0.0
.IP \(bu 2
\fI\%Synopsis\fP
.IP \(bu 2
\fI\%Installation\fP
.IP \(bu 2
\fI\%Usage\fP
.IP \(bu 2
\fI\%Options\fP
.UNINDENT
.sp
New in version 4.4: MongoDB Enterprise

.SH SYNOPSIS
.sp
Starting in version 4.4, MongoDB Enterprise provides
\fI\%mongokerberos\fP for testing MongoDB\(aqs Kerberos and GSSAPI
configuration options against a
running Kerberos deployment. \fI\%mongokerberos\fP can be used
in one of two modes: \fIserver\fP and \fIclient\fP\&.
.TS
center;
|l|l|.
_
T{
Mode
T}	T{
Description
T}
_
T{
Server
T}	T{
In \fIserver mode\fP, \fI\%mongokerberos\fP analyzes
Kerberos\-related configurations on the server, and returns a
report which includes error messages for any configurations that
are problematic. For usage, see \fI\%Server Mode\fP
T}
_
T{
Client
T}	T{
In \fIclient mode\fP, \fI\%mongokerberos\fP tests Kerberos
authentication for a provided username, and returns a report
which includes the success or failure of each step in the
Kerberos authentication procedure. For usage, see
\fI\%Client Mode\fP
T}
_
.TE
.sp
Error messages for both modes include information on specific errors
encountered and potential advice for resolving the error.
.sp
\fI\%mongokerberos\fP supports the following deployment types,
in both server and client modes:
.INDENT 0.0
.IP \(bu 2
Linux MongoDB clients authenticating to MIT Kerberos deployments on
supported Linux platforms\&.
.IP \(bu 2
Windows MongoDB clients authenticating to Windows Active Directory
deployments on
supported Windows platforms\&.
.IP \(bu 2
Linux MongoDB clients authenticating to Windows Active Directory
deployments.
.UNINDENT
.sp
\fBNOTE:\fP
.INDENT 0.0
.INDENT 3.5
MongoDB Enterprise and \fI\%mongokerberos\fP only support the
\fI\%MIT implementation\fP
of Kerberos.
.UNINDENT
.UNINDENT
.sp
Generally, when configuring options related to
Kerberos authentication, it is good practice
to verify your configuration with \fI\%mongokerberos\fP\&.
.sp
\fI\%mongokerberos\fP is a testing and verification tool; it does not
edit any files or configure any services. For configuring Kerberos on
your platform please consult the \fI\%MIT Kerberos documentation\fP, or your platform\(aqs
documentation. For configuring MongoDB to authenticate using Kerberos,
please reference the following tutorials:
.INDENT 0.0
.IP \(bu 2
/tutorial/control\-access\-to\-mongodb\-with\-kerberos\-authentication
.IP \(bu 2
/tutorial/control\-access\-to\-mongodb\-windows\-with\-kerberos\-authentication\&.
.UNINDENT
.sp
This document provides a complete overview of all command line options
for \fI\%mongokerberos\fP\&.
.SH INSTALLATION
.sp
The \fI\%mongokerberos\fP tool is part of the \fIMongoDB Database Tools Extra\fP
package, and can be \fI\%installed with the MongoDB Server\fP or as a
\fI\%standalone installation\fP\&.
.SS Install with Server
.sp
To install \fI\%mongokerberos\fP as part of a MongoDB Enterprise Server
installation:
.INDENT 0.0
.IP \(bu 2
Follow the instructions for your platform:
Install MongoDB Enterprise Server
.IP \(bu 2
After completing the installation, \fI\%mongokerberos\fP and the other
included tools are available in the same location as the Server.
.sp
\fBNOTE:\fP
.INDENT 2.0
.INDENT 3.5
For the Windows \fB\&.msi\fP installer wizard, the
Complete installation option includes \fI\%mongokerberos\fP\&.
.UNINDENT
.UNINDENT
.UNINDENT
.SS Install as Standalone
.sp
To install \fI\%mongokerberos\fP as a standalone installation:
.INDENT 0.0
.IP \(bu 2
Follow the download link for MongoDB Enterprise Edition:
\fI\%MongoDB Enterprise Download Center\fP
.IP \(bu 2
Select your Platform (operating system) from the dropdown
menu, then select the appropriate Package for your
platform according to the following chart:
.TS
center;
|l|l|.
_
T{
OS
T}	T{
Package
T}
_
T{
\fILinux\fP
T}	T{
\fBtgz\fP package
T}
_
T{
\fIWindows\fP
T}	T{
\fBzip\fP package
T}
_
T{
\fImacOS\fP
T}	T{
\fBtgz\fP package
T}
_
.TE
.IP \(bu 2
Once downloaded, unpack the archive and copy \fI\%mongokerberos\fP to a
location on your hard drive.
.INDENT 2.0
.INDENT 3.5
.SS Tip
.sp
Linux and macOS users may wish to copy \fI\%mongokerberos\fP to a filesystem
location that is defined in the \fB$PATH\fP environment variable, such
as \fB/usr/bin\fP\&. Doing so allows referencing \fI\%mongokerberos\fP directly
on the command line by name, without needing to specify its full
path, or first navigating to its parent directory. See the
installation guide for your platform
for more information.
.UNINDENT
.UNINDENT
.UNINDENT
.SH USAGE
.sp
\fI\%mongokerberos\fP can be run in two modes: \fIserver\fP and
\fIclient\fP\&.
.sp
Run \fI\%mongokerberos\fP from the system command line, not the \fBmongo\fP shell.
.SS Server Mode
.sp
Running \fI\%mongokerberos\fP in server mode performs a series of
verification steps against your system\(aqs Kerberos configuration,
including checking for proper DNS resolution, validation of the Kerberos
system keytab file, and testing against the MongoDB service principal
for your \fBmongod\fP or \fBmongos\fP instance.
.sp
Before you can use \fI\%mongokerberos\fP in server mode, you must:
.INDENT 0.0
.IP 1. 3
Configure Kerberos on your platform according to your platform\(aqs
documentation.
.IP 2. 3
Create the MongoDB service principal for use with your
\fBmongod\fP or \fBmongos\fP instance, as described
in the following steps:
.INDENT 3.0
.IP \(bu 2
Configure Service Principal on Linux
.IP \(bu 2
Configure Service Principal on Windows
.UNINDENT
.UNINDENT
.sp
Once you have completed these steps, you can run
\fI\%mongokerberos\fP in server mode using the
\fB\-\-server\fP flag as follows:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
mongokerberos \-\-server
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
If Kerberos has been configured properly on the server, and the service
principal created successfully, the output might resemble the following:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
Resolving kerberos environment...
[OK] Kerberos environment resolved without errors.

Verifying DNS resolution works with Kerberos service at <hostname>...
[OK] DNS test successful.

Getting MIT Kerberos KRB5 environment variables...
  * KRB5CCNAME: not set.
  * KRB5_CLIENT_KTNAME: not set.
  * KRB5_CONFIG: not set.
  * KRB5_KTNAME: not set.
  * KRB5_TRACE: not set.
[OK]

Verifying existence of KRB5 keytab FILE:/etc/krb5.keytab...
[OK] KRB5 keytab exists and is populated.

Checking principal(s) in KRB5 keytab...
Found the following principals for MongoDB service mongodb:
  * mongodb/server.example.com@SERVER.EXAMPLE.COM
Found the following kvnos in keytab entries for service mongodb:
  * 3
[OK] KRB5 keytab is valid.

Fetching KRB5 Config...
KRB5 config profile resolved as:
   <Your Kerberos profile file will be output here>
[OK] KRB5 config profile resolved without errors.

Attempting to initiate security context with service credentials...
[OK] Security context initiated successfully.
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
The final message indicates that the system\(aqs Kerberos configuration is
ready to be used with MongoDB. If any errors are encountered with
the configuration, they will be presented as part of the above output.
.SS Client Mode
.sp
Running \fI\%mongokerberos\fP in client mode tests authentication
against your system\(aqs Kerberos environment, performing each step in the
Kerberos authentication process, including checking for proper DNS
resolution, verification of the Kerberos client keytab file, and testing
whether a ticket can be successfully granted. Running
\fI\%mongokerberos\fP in client mode simulates the client
authentication procedure of the \fBmongo\fP shell.
.sp
Before you can use \fI\%mongokerberos\fP in client mode, you must
first have configured Kerberos on your platform according to your
platform\(aqs documentation. Optionally, you may also choose to run
\fI\%mongokerberos\fP in
\fI\%server mode\fP first to verify that your
platform\(aqs Kerberos configuration is valid before using client mode.
.sp
Once you have completed these steps, you can run
\fI\%mongokerberos\fP in client mode to test user authentication,
using the \fB\-\-client\fP flag as follows:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
mongokerberos \-\-client \-\-username <username>
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
You must provide a valid username, which is used to request a Kerberos
ticket as part of the authentication procedure. Your platform\(aqs
Kerberos infrastructure must be aware of this user.
.sp
If the provided credentials are valid, and the Kerberos options in the
configuration files are valid, the output might resemble the following:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
 Resolving kerberos environment...
 [OK] Kerberos environment resolved without errors.

 Verifying DNS resolution works with Kerberos service at <hostname>...
 [OK] DNS test successful.

 Getting MIT Kerberos KRB5 environment variables...
   * KRB5CCNAME: not set.
   * KRB5_CLIENT_KTNAME: not set.
   * KRB5_CONFIG: not set.
   * KRB5_KTNAME: not set.
   * KRB5_TRACE: not set.
 [OK]

 Verifying existence of KRB5 client keytab FILE:/path/to/client.keytab...
 [OK] KRB5 client keytab exists and is populated.

 Checking principal(s) in KRB5 keytab...
 [OK] KRB5 keytab is valid.

 Fetching KRB5 Config...
 KRB5 config profile resolved as:
    <Your Kerberos profile file will be output here>
 [OK] KRB5 config profile resolved without errors.

 Attempting client half of GSSAPI conversation...
 [OK] Client half of GSSAPI conversation completed successfully.
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
The final message indicates that client authentication completed
successfully for the user provided.  If any errors are encountered
during the authentication steps, they will be presented as part of the
above output.
.SH OPTIONS
.INDENT 0.0
.TP
.B \-\-server
Runs \fI\%mongokerberos\fP in server mode to test that your
platform\(aqs Kerberos configuration is valid for use with MongoDB.
.sp
See \fI\%Server Mode\fP for example usage and expected
output.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-client
Runs \fI\%mongokerberos\fP in client mode to test client
authentication against your system\(aqs Kerberos environment. Requires
specifying a valid username with \fI\%\-\-username\fP when running in
client mode. \fI\%mongokerberos\fP will request a Kerberos ticket
for this username as part of the validation procedure. Running
\fI\%mongokerberos\fP in client mode simulates the client
authentication procedure of the \fBmongo\fP shell.
.sp
See \fI\%Client Mode\fP for example usage and expected
output.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-config <filename>, \-f <filename>
Specifies a configuration file for runtime configuration options.
The options are equivalent to the command\-line
configuration options. See /reference/configuration\-options for
more information.
.sp
\fI\%mongokerberos\fP will read the values for
\fBsaslHostName\fP and \fBsaslServiceName\fP from this
file if present. These values can alteratively be specified with the
\fI\%\-\-setParameter\fP option instead.
.sp
Ensure the configuration file uses ASCII encoding. The
\fI\%mongokerberos\fP instance does not support configuration
files with non\-ASCII encoding, including UTF\-8.
.sp
Only valid in \fI\%server mode\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-setParameter <options>
Sets a configurable parameter. You can specify multiple
\fBsetParameter\fP fields.
.sp
While you can use any supported parameters with \fBsetParameter\fP,
\fI\%mongokerberos\fP only checks for the value of the following:
.INDENT 7.0
.IP \(bu 2
\fBsaslHostName\fP
.IP \(bu 2
\fBsaslServiceName\fP
.UNINDENT
.sp
If using the \fI\%\-\-config\fP option with a configuration file that
also contains these values, the \fBsetParameter\fP values will
override the values from the configuration file.
.sp
Valid in both \fI\%server mode\fP
and \fI\%client mode\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-host <hostname>
Specify the hostname of the MongoDB server to connect to when testing
authentication.
.sp
If \fI\%\-\-host\fP is not specified, \fI\%mongokerberos\fP does
not perform any DNS validation of the hostname (i.e. PTR record
verification)
.sp
Only valid in \fI\%client mode\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-username <username>, \-u <username>
Username for \fI\%mongokerberos\fP to use when attempting Kerberos
authentication. This value is required when running in
\fI\%client mode\fP\&.
.sp
Only valid in \fI\%client mode\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-gssapiServiceName <servicename>
\fIdefault: \(aqmongodb\(aq\fP
.sp
Service principal name to use when authenticating using
GSSAPI/Kerberos.
.sp
Only valid in \fI\%client mode\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-gssapiHostName <hostname>
Remote hostname to use for purpose of GSSAPI/Kerberos authentication.
.sp
Only valid in \fI\%client mode\fP\&.
.UNINDENT
.SH AUTHOR
MongoDB Documentation Project
.SH COPYRIGHT
2008-2020
.\" Generated by docutils manpage writer.
.

.\" Man page generated from reStructuredText.
.
.TH "MONGOLDAP" "1" "Jun 23, 2020" "4.4" "mongodb-manual"
.SH NAME
mongoldap \- MongoDB LDAP Configuration Testing Utility
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.SS On this page
.INDENT 0.0
.IP \(bu 2
\fI\%Synopsis\fP
.IP \(bu 2
\fI\%Installation\fP
.IP \(bu 2
\fI\%Usage\fP
.IP \(bu 2
\fI\%Options\fP
.UNINDENT
.sp
New in version 3.4: MongoDB Enterprise

.SH SYNOPSIS
.sp
Starting in version 3.4, MongoDB Enterprise provides
\fI\%mongoldap\fP for testing MongoDB\(aqs LDAP configuration
options against a running LDAP server or set
of servers.
.sp
To validate the LDAP options in the configuration file, set the
\fI\%mongoldap\fP \fI\%\-\-config\fP option to the configuration file\(aqs
path.
.sp
To test the LDAP configuration options, you must specify a \fI\%\-\-user\fP
and \fB\-\-password\fP\&. \fI\%mongoldap\fP simulates authentication to a
MongoDB server running with the provided configuration options and credentials.
.sp
\fI\%mongoldap\fP returns a report that includes the success or failure of
any step in the LDAP authentication or authorization procedure. Error messages
include information on specific errors encountered and potential advice for
resolving the error.
.sp
When configuring options related to LDAP authorization, \fI\%mongoldap\fP executes an LDAP query
constructed using the provided configuration options and username, and returns
a list of roles on the \fBadmin\fP database which the user is authorized for.
.sp
You can use this information when configuring LDAP authorization roles for user access control. For example, use
\fI\%mongoldap\fP to ensure your configuration allows privileged users to
gain the necessary roles to perform their expected tasks. Similarly, use
\fI\%mongoldap\fP to ensure your configuration disallows non\-privileged
users from gaining roles for accessing the MongoDB server, or performing
unauthorized actions.
.sp
When configuring options related to LDAP authentication, use \fI\%mongoldap\fP to ensure that the authentication
operation works as expected.
.sp
Run \fI\%mongoldap\fP from the system command line, not the \fBmongo\fP shell.
.sp
This document provides a complete overview of all command line options for
\fI\%mongoldap\fP\&.
.SH INSTALLATION
.sp
The \fI\%mongoldap\fP tool is part of the \fIMongoDB Database Tools Extra\fP
package, and can be \fI\%installed with the MongoDB Server\fP or as a
\fI\%standalone installation\fP\&.
.SS Install with Server
.sp
To install \fI\%mongoldap\fP as part of a MongoDB Enterprise Server
installation:
.INDENT 0.0
.IP \(bu 2
Follow the instructions for your platform:
Install MongoDB Enterprise Server
.IP \(bu 2
After completing the installation, \fI\%mongoldap\fP and the other
included tools are available in the same location as the Server.
.sp
\fBNOTE:\fP
.INDENT 2.0
.INDENT 3.5
For the Windows \fB\&.msi\fP installer wizard, the
Complete installation option includes \fI\%mongoldap\fP\&.
.UNINDENT
.UNINDENT
.UNINDENT
.SS Install as Standalone
.sp
To install \fI\%mongoldap\fP as a standalone installation:
.INDENT 0.0
.IP \(bu 2
Follow the download link for MongoDB Enterprise Edition:
\fI\%MongoDB Enterprise Download Center\fP
.IP \(bu 2
Select your Platform (operating system) from the dropdown
menu, then select the appropriate Package for your
platform according to the following chart:
.TS
center;
|l|l|.
_
T{
OS
T}	T{
Package
T}
_
T{
\fILinux\fP
T}	T{
\fBtgz\fP package
T}
_
T{
\fIWindows\fP
T}	T{
\fBzip\fP package
T}
_
T{
\fImacOS\fP
T}	T{
\fBtgz\fP package
T}
_
.TE
.IP \(bu 2
Once downloaded, unpack the archive and copy \fI\%mongoldap\fP to a
location on your hard drive.
.INDENT 2.0
.INDENT 3.5
.SS Tip
.sp
Linux and macOS users may wish to copy \fI\%mongoldap\fP to a filesystem
location that is defined in the \fB$PATH\fP environment variable, such
as \fB/usr/bin\fP\&. Doing so allows referencing \fI\%mongoldap\fP directly
on the command line by name, without needing to specify its full
path, or first navigating to its parent directory. See the
installation guide for your platform
for more information.
.UNINDENT
.UNINDENT
.UNINDENT
.SH USAGE
.sp
\fBNOTE:\fP
.INDENT 0.0
.INDENT 3.5
A full description of LDAP or Active Directory is beyond the scope of
this documentation.
.UNINDENT
.UNINDENT
.sp
Consider the following sample configuration file, designed to support
LDAP authentication and authorization via Active Directory:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
security:
   authorization: "enabled"
   ldap:
      servers: "activedirectory.example.net"
      bind:
         queryUser: "mongodbadmin@dba.example.com"
         queryPassword: "secret123"
      userToDNMapping:
         \(aq[
            {
               match : "(.+)",
               ldapQuery: "DC=example,DC=com??sub?(userPrincipalName={0})"
            }
         ]\(aq
      authz:
         queryTemplate: "DC=example,DC=com??sub?(&(objectClass=group)(member:1.2.840.113556.1.4.1941:={USER}))"
setParameter:
   authenticationMechanisms: "PLAIN"
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
You can use \fI\%mongoldap\fP to validate the configuration file, which
returns a report of the procedure. You must specify a username and password
for \fI\%mongoldap\fP\&.
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
mongoldap \-\-config=<path\-to\-config> \-\-user="bob@dba.example.com" \-\-password="secret123"
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
If the provided credentials are valid, and the LDAP options in the
configuration files are valid, the output might be as follows:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
Checking that an LDAP server has been specified...
[OK] LDAP server found

Connecting to LDAP server...
[OK] Connected to LDAP server

Parsing MongoDB to LDAP DN mappings..
[OK] MongoDB to LDAP DN mappings appear to be valid

Attempting to authenticate against the LDAP server...
[OK] Successful authentication performed

Checking if LDAP authorization has been enabled by configuration...
[OK] LDAP authorization enabled

Parsing LDAP query template..
[OK] LDAP query configuration template appears valid

Executing query against LDAP server...
[OK] Successfully acquired the following roles:
\&...
.ft P
.fi
.UNINDENT
.UNINDENT
.SH OPTIONS
.INDENT 0.0
.TP
.B \-\-config=<filename>, \-f=<filename>
Specifies a configuration file for runtime configuration options.
The options are equivalent to the command\-line
configuration options. See /reference/configuration\-options for
more information.
.sp
\fBmongoldap\fP uses any configuration options related to security\-ldap
or security\-ldap\-external for testing LDAP authentication or
authorization.
.sp
Requires specifying \fI\%\-\-user\fP\&. May accept \fI\%\-\-password\fP for
testing LDAP authentication.
.sp
Ensure the configuration file uses ASCII encoding. The \fBmongoldap\fP
instance does not support configuration files with non\-ASCII encoding,
including UTF\-8.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-user=<string>
Username for \fBmongoldap\fP to use when attempting LDAP authentication or
authorization.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-password=<string>
Password of the \fI\%\-\-user\fP for
\fBmongoldap\fP to use when attempting LDAP authentication. Not
required for LDAP authorization.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-ldapServers=<host1>:<port>,<host2>:<port>,...,<hostN>:<port>
New in version 3.4: Available in MongoDB Enterprise only.

.sp
The LDAP server against which the \fBmongoldap\fP authenticates users or
determines what actions a user is authorized to perform on a given
database. If the LDAP server specified has any replicated instances,
you may specify the host and port of each replicated server in a
comma\-delimited list.
.sp
If your LDAP infrastructure partitions the LDAP directory over multiple LDAP
servers, specify \fIone\fP LDAP server or any of its replicated instances to
\fI\%\-\-ldapServers\fP\&. MongoDB supports following LDAP referrals as defined in \fI\%RFC 4511
4.1.10\fP\&. Do not use \fI\%\-\-ldapServers\fP
for listing every LDAP server in your infrastructure.
.sp
This setting can be configured on a running \fBmongoldap\fP using
\fBsetParameter\fP\&.
.sp
If unset, \fBmongoldap\fP cannot use LDAP authentication or authorization\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-ldapQueryUser=<string>
New in version 3.4: Available in MongoDB Enterprise only.

.sp
The identity with which \fBmongoldap\fP binds as, when connecting to or
performing queries on an LDAP server.
.sp
Only required if any of the following are true:
.INDENT 7.0
.IP \(bu 2
Using LDAP authorization\&.
.IP \(bu 2
Using an LDAP query for \fI\%username transformation\fP\&.
.IP \(bu 2
The LDAP server disallows anonymous binds
.UNINDENT
.sp
You must use \fI\%\-\-ldapQueryUser\fP with \fI\%\-\-ldapQueryPassword\fP\&.
.sp
If unset, \fBmongoldap\fP will not attempt to bind to the LDAP server.
.sp
This setting can be configured on a running \fBmongoldap\fP using
\fBsetParameter\fP\&.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
Windows MongoDB deployments can use \fI\%\-\-ldapBindWithOSDefaults\fP
instead of \fI\%\-\-ldapQueryUser\fP and \fI\%\-\-ldapQueryPassword\fP\&. You cannot specify
both \fI\%\-\-ldapQueryUser\fP and \fI\%\-\-ldapBindWithOSDefaults\fP at the same time.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-ldapQueryPassword=<string>
New in version 3.4: Available in MongoDB Enterprise only.
.sp
The password used to bind to an LDAP server when using
\fI\%\-\-ldapQueryUser\fP\&. You must use \fI\%\-\-ldapQueryPassword\fP with
\fI\%\-\-ldapQueryUser\fP\&.

.sp
If unset, \fBmongoldap\fP will not attempt to bind to the LDAP server.
.sp
This setting can be configured on a running \fBmongoldap\fP using
\fBsetParameter\fP\&.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
Windows MongoDB deployments can use \fI\%\-\-ldapBindWithOSDefaults\fP
instead of \fI\%\-\-ldapQueryPassword\fP and \fI\%\-\-ldapQueryPassword\fP\&. You cannot specify
both \fI\%\-\-ldapQueryPassword\fP and \fI\%\-\-ldapBindWithOSDefaults\fP at the same time.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-ldapBindWithOSDefaults=<bool>
\fIDefault\fP: false
.sp
New in version 3.4: Available in MongoDB Enterprise for the Windows platform only.

.sp
Allows \fBmongoldap\fP to authenticate, or bind, using your Windows login
credentials when connecting to the LDAP server.
.sp
Only required if:
.INDENT 7.0
.IP \(bu 2
Using LDAP authorization\&.
.IP \(bu 2
Using an LDAP query for \fI\%username transformation\fP\&.
.IP \(bu 2
The LDAP server disallows anonymous binds
.UNINDENT
.sp
Use \fI\%\-\-ldapBindWithOSDefaults\fP to replace \fI\%\-\-ldapQueryUser\fP and
\fI\%\-\-ldapQueryPassword\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-ldapBindMethod=<string>
\fIDefault\fP: simple
.sp
New in version 3.4: Available in MongoDB Enterprise only.

.sp
The method \fBmongoldap\fP uses to authenticate to an LDAP
server. Use with \fI\%\-\-ldapQueryUser\fP and \fI\%\-\-ldapQueryPassword\fP to connect to the LDAP server.
.sp
\fI\%\-\-ldapBindMethod\fP supports
the following values:
.TS
center;
|l|l|.
_
T{
Value
T}	T{
Description
T}
_
T{
\fBsimple\fP
T}	T{
\fBmongoldap\fP uses simple authentication.
T}
_
T{
\fBsasl\fP
T}	T{
\fBmongoldap\fP uses SASL protocol for authentication.
T}
_
.TE
.sp
If you specify \fBsasl\fP, you can configure the available SASL mechanisms
using \fI\%\-\-ldapBindSaslMechanisms\fP\&. \fBmongoldap\fP defaults to
using \fBDIGEST\-MD5\fP mechanism.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-ldapBindSaslMechanisms=<string>
\fIDefault\fP: DIGEST\-MD5
.sp
New in version 3.4: Available in MongoDB Enterprise only.

.sp
A comma\-separated list of SASL mechanisms \fBmongoldap\fP can
use when authenticating to the LDAP server. The \fBmongoldap\fP and the
LDAP server must agree on at least one mechanism. The \fBmongoldap\fP
dynamically loads any SASL mechanism libraries installed on the host
machine at runtime.
.sp
Install and configure the appropriate libraries for the selected
SASL mechanism(s) on both the \fBmongoldap\fP host and the remote
LDAP server host. Your operating system may include certain SASL
libraries by default. Defer to the documentation associated with each
SASL mechanism for guidance on installation and configuration.
.sp
If using the \fBGSSAPI\fP SASL mechanism for use with
security\-kerberos, verify the following for the
\fBmongoldap\fP host machine:
.INDENT 7.0
.TP
.B \fBLinux\fP
.INDENT 7.0
.IP \(bu 2
The \fBKRB5_CLIENT_KTNAME\fP environment
variable resolves to the name of the client keytab\-files
for the host machine. For more on Kerberos environment
variables, please defer to the
\fI\%Kerberos documentation\fP\&.
.IP \(bu 2
The client keytab includes a
kerberos\-user\-principal for the \fBmongoldap\fP to use when
connecting to the LDAP server and execute LDAP queries.
.UNINDENT
.TP
.B \fBWindows\fP
If connecting to an Active Directory server, the Windows
Kerberos configuration automatically generates a
\fI\%Ticket\-Granting\-Ticket\fP
when the user logs onto the system. Set \fI\%\-\-ldapBindWithOSDefaults\fP to
\fBtrue\fP to allow \fBmongoldap\fP to use the generated credentials when
connecting to the Active Directory server and execute queries.
.UNINDENT
.sp
Set \fI\%\-\-ldapBindMethod\fP to \fBsasl\fP to use this option.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
For a complete list of SASL mechanisms see the
\fI\%IANA listing\fP\&.
Defer to the documentation for your LDAP or Active Directory
service for identifying the SASL mechanisms compatible with the
service.
.sp
MongoDB is not a source of SASL mechanism libraries, nor
is the MongoDB documentation a definitive source for
installing or configuring any given SASL mechanism. For
documentation and support, defer to the SASL mechanism
library vendor or owner.
.sp
For more information on SASL, defer to the following resources:
.INDENT 0.0
.IP \(bu 2
For Linux, please see the \fI\%Cyrus SASL documentation\fP\&.
.IP \(bu 2
For Windows, please see the \fI\%Windows SASL documentation\fP\&.
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-ldapTransportSecurity=<string>
\fIDefault\fP: tls
.sp
New in version 3.4: Available in MongoDB Enterprise only.

.sp
By default, \fBmongoldap\fP creates a TLS/SSL secured connection to the LDAP
server.
.sp
For Linux deployments, you must configure the appropriate TLS Options in
\fB/etc/openldap/ldap.conf\fP file. Your operating system\(aqs package manager
creates this file as part of the MongoDB Enterprise installation, via the
\fBlibldap\fP dependency. See the documentation for \fBTLS Options\fP in the
\fI\%ldap.conf OpenLDAP documentation\fP
for more complete instructions.
.sp
For Windows deployment, you must add the LDAP server CA certificates to the
Windows certificate management tool. The exact name and functionality of the
tool may vary depending on operating system version. Please see the
documentation for your version of Windows for more information on
certificate management.
.sp
Set \fI\%\-\-ldapTransportSecurity\fP to \fBnone\fP to disable TLS/SSL between \fBmongoldap\fP and the LDAP
server.
.sp
\fBWARNING:\fP
.INDENT 7.0
.INDENT 3.5
Setting \fI\%\-\-ldapTransportSecurity\fP to \fBnone\fP transmits plaintext information and possibly
credentials between \fBmongoldap\fP and the LDAP server.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-ldapTimeoutMS=<long>
\fIDefault\fP: 10000
.sp
New in version 3.4: Available in MongoDB Enterprise only.

.sp
The amount of time in milliseconds \fBmongoldap\fP should wait for an LDAP server
to respond to a request.
.sp
Increasing the value of \fI\%\-\-ldapTimeoutMS\fP may prevent connection failure between the
MongoDB server and the LDAP server, if the source of the failure is a
connection timeout. Decreasing the value of \fI\%\-\-ldapTimeoutMS\fP reduces the time
MongoDB waits for a response from the LDAP server.
.sp
This setting can be configured on a running \fBmongoldap\fP using
\fBsetParameter\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-ldapUserToDNMapping=<string>
New in version 3.4: Available in MongoDB Enterprise only.

.sp
Maps the username provided to \fBmongoldap\fP for authentication to a LDAP
Distinguished Name (DN). You may need to use \fI\%\-\-ldapUserToDNMapping\fP to transform a
username into an LDAP DN in the following scenarios:
.INDENT 7.0
.IP \(bu 2
Performing LDAP authentication with simple LDAP binding, where users
authenticate to MongoDB with usernames that are not full LDAP DNs.
.IP \(bu 2
Using an \fBLDAP authorization query template\fP that requires a DN.
.IP \(bu 2
Transforming the usernames of clients authenticating to Mongo DB using
different authentication mechanisms (e.g. x.509, kerberos) to a full LDAP
DN for authorization.
.UNINDENT
.sp
\fI\%\-\-ldapUserToDNMapping\fP expects a quote\-enclosed JSON\-string representing an ordered array
of documents. Each document contains a regular expression \fBmatch\fP and
either a \fBsubstitution\fP or \fBldapQuery\fP template used for transforming the
incoming username.
.sp
Each document in the array has the following form:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
{
  match: "<regex>"
  substitution: "<LDAP DN>" | ldapQuery: "<LDAP Query>"
}
.ft P
.fi
.UNINDENT
.UNINDENT
.TS
center;
|l|l|l|.
_
T{
Field
T}	T{
Description
T}	T{
Example
T}
_
T{
\fBmatch\fP
T}	T{
An ECMAScript\-formatted regular expression (regex) to match against a
provided username. Each parenthesis\-enclosed section represents a
regex capture group used by \fBsubstitution\fP or \fBldapQuery\fP\&.
T}	T{
\fB"(.+)ENGINEERING"\fP
\fB"(.+)DBA"\fP
T}
_
T{
\fBsubstitution\fP
T}	T{
An LDAP distinguished name (DN) formatting template that converts the
authentication name matched by the \fBmatch\fP regex into a LDAP DN.
Each curly bracket\-enclosed numeric value is replaced by the
corresponding \fI\%regex capture group\fP extracted
from the authentication username via the \fBmatch\fP regex.
.sp
The result of the substitution must be an \fI\%RFC4514\fP escaped string.
T}	T{
\fB"cn={0},ou=engineering,
dc=example,dc=com"\fP
T}
_
T{
\fBldapQuery\fP
T}	T{
A LDAP query formatting template that inserts the authentication
name matched by the \fBmatch\fP regex into an LDAP query URI encoded
respecting RFC4515 and RFC4516. Each curly bracket\-enclosed numeric
value is replaced by the corresponding \fI\%regex capture group\fP extracted
from the authentication username via the \fBmatch\fP expression.
\fBmongoldap\fP executes the query against the LDAP server to retrieve
the LDAP DN for the authenticated user. \fBmongoldap\fP requires
exactly one returned result for the transformation to be
successful, or \fBmongoldap\fP skips this transformation.
T}	T{
\fB"ou=engineering,dc=example,
dc=com??one?(user={0})"\fP
T}
_
.TE
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
An explanation of  \fI\%RFC4514\fP,
\fI\%RFC4515\fP,
\fI\%RFC4516\fP, or LDAP queries is out
of scope for the MongoDB Documentation. Please review the RFC directly or
use your preferred LDAP resource.
.UNINDENT
.UNINDENT
.sp
For each document in the array, you must use either \fBsubstitution\fP or
\fBldapQuery\fP\&. You \fIcannot\fP specify both in the same document.
.sp
When performing authentication or authorization, \fBmongoldap\fP steps through
each document in the array in the given order, checking the authentication
username against the \fBmatch\fP filter.  If a match is found,
\fBmongoldap\fP applies the transformation and uses the output for
authenticating the user. \fBmongoldap\fP does not check the remaining documents
in the array.
.sp
If the given document does not match the provided authentication
name, \fBmongoldap\fP continues through the list of documents
to find additional matches. If no matches are found in any document,
or the transformation the document describes fails,
\fBmongoldap\fP returns an error.
.sp
Starting in MongoDB 4.4, \fBmongoldap\fP also returns an error
if one of the transformations cannot be evaluated due to networking
or authentication failures to the LDAP server. \fBmongoldap\fP
rejects the connection request and does not check the remaining
documents in the array.
.INDENT 7.0
.INDENT 3.5
.SH EXAMPLE
.sp
The following shows two transformation documents. The first
document matches against any string ending in \fB@ENGINEERING\fP, placing
anything preceeding the suffix into a regex capture group. The
second document matches against any string ending in \fB@DBA\fP, placing
anything preceeding the suffix into a regex capture group.
.sp
\fBIMPORTANT:\fP
.INDENT 0.0
.INDENT 3.5
You must pass the array to \fI\%\-\-ldapUserToDNMapping\fP as a string.
.UNINDENT
.UNINDENT
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
"[
   {
      match: "(.+)@ENGINEERING.EXAMPLE.COM",
      substitution: "cn={0},ou=engineering,dc=example,dc=com"
   },
   {
      match: "(.+)@DBA.EXAMPLE.COM",
      ldapQuery: "ou=dba,dc=example,dc=com??one?(user={0})"

   }

]"
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
A user with username \fBalice@ENGINEERING.EXAMPLE.COM\fP matches the first
document. The regex capture group \fB{0}\fP corresponds to the string
\fBalice\fP\&. The resulting output is the DN
\fB"cn=alice,ou=engineering,dc=example,dc=com"\fP\&.
.sp
A user with username \fBbob@DBA.EXAMPLE.COM\fP matches the second document.
The regex capture group \fB{0}\fP corresponds to the string \fBbob\fP\&.  The
resulting output is the LDAP query
\fB"ou=dba,dc=example,dc=com??one?(user=bob)"\fP\&. \fBmongoldap\fP executes this
query against the LDAP server, returning the result
\fB"cn=bob,ou=dba,dc=example,dc=com"\fP\&.
.UNINDENT
.UNINDENT
.sp
If \fI\%\-\-ldapUserToDNMapping\fP is unset, \fBmongoldap\fP applies no transformations to the username
when attempting to authenticate or authorize a user against the LDAP server.
.sp
This setting can be configured on a running \fBmongoldap\fP using the
\fBsetParameter\fP database command.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-ldapAuthzQueryTemplate=<string>
New in version 3.4: Available in MongoDB Enterprise only.

.sp
A relative LDAP query URL formatted conforming to \fI\%RFC4515\fP and \fI\%RFC4516\fP that \fBmongoldap\fP executes to obtain
the LDAP groups to which the authenticated user belongs to. The query is
relative to the host or hosts specified in \fI\%\-\-ldapServers\fP\&.
.sp
In the URL, you can use the following substituion tokens:
.TS
center;
|l|l|.
_
T{
Substitution Token
T}	T{
Description
T}
_
T{
\fB{USER}\fP
T}	T{
Substitutes the authenticated username, or the
\fBtransformed\fP
username if a \fI\%username mapping\fP is specified.
T}
_
T{
\fB{PROVIDED_USER}\fP
T}	T{
Substitutes the supplied username, i.e. before either
authentication or \fBLDAP transformation\fP\&.
.sp
New in version 4.2.
T}
_
.TE
.sp
When constructing the query URL, ensure that the order of LDAP parameters
respects RFC4516:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
[ dn  [ ? [attributes] [ ? [scope] [ ? [filter] [ ? [Extensions] ] ] ] ] ]
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
If your query includes an attribute, \fBmongoldap\fP assumes that the query
retrieves a the DNs which this entity is member of.
.sp
If your query does not include an attribute, \fBmongoldap\fP assumes
the query retrieves all entities which the user is member of.
.sp
For each LDAP DN returned by the query, \fBmongoldap\fP assigns the authorized
user a corresponding role on the \fBadmin\fP database. If a role on the on the
\fBadmin\fP database exactly matches the DN, \fBmongoldap\fP grants the user the
roles and privileges assigned to that role. See the
\fBdb.createRole()\fP method for more information on creating roles.
.INDENT 7.0
.INDENT 3.5
.SH EXAMPLE
.sp
This LDAP query returns any groups listed in the LDAP user object\(aqs
\fBmemberOf\fP attribute.
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
"{USER}?memberOf?base"
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Your LDAP configuration may not include the \fBmemberOf\fP attribute as part
of the user schema, may possess a different attribute for reporting group
membership, or may not track group membership through attributes.
Configure your query with respect to your own unique LDAP configuration.
.UNINDENT
.UNINDENT
.sp
If unset, \fBmongoldap\fP cannot authorize users using LDAP.
.sp
This setting can be configured on a running \fBmongoldap\fP using the
\fBsetParameter\fP database command.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
An explanation of \fI\%RFC4515\fP,
\fI\%RFC4516\fP or LDAP queries is out
of scope for the MongoDB Documentation. Please review the RFC directly or
use your preferred LDAP resource.
.UNINDENT
.UNINDENT
.UNINDENT
.SH AUTHOR
MongoDB Documentation Project
.SH COPYRIGHT
2008-2020
.\" Generated by docutils manpage writer.
.

.\" Man page generated from reStructuredText.
.
.TH "MONGOS" "1" "Jun 23, 2020" "4.4" "mongodb-manual"
.SH NAME
mongos \- MongoDB Sharded Cluster Query Router
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.SS On this page
.INDENT 0.0
.IP \(bu 2
\fI\%Synopsis\fP
.IP \(bu 2
\fI\%Considerations\fP
.IP \(bu 2
\fI\%Options\fP
.UNINDENT
.SH SYNOPSIS
.sp
For a sharded cluster, the \fI\%mongos\fP
instances provide the interface between the client applications and the
sharded cluster. The \fI\%mongos\fP instances route queries and
write operations to the shards. From the perspective of the
application, a \fI\%mongos\fP instance behaves identically to
any other MongoDB instance.
.SH CONSIDERATIONS
.INDENT 0.0
.IP \(bu 2
Never change the name of the \fI\%mongos\fP binary.
.IP \(bu 2
Starting in version 4.4, \fI\%mongos\fP
can support hedged reads to minimize
latencies.
.IP \(bu 2
Starting in version 4.0, MongoDB disables support for TLS 1.0
encryption on systems where TLS 1.1+ is available. For
more details, see 4.0\-disable\-tls\&.
.IP \(bu 2
Starting in MongoDB 4.0, the \fI\%mongos\fP binary will crash when
attempting to connect to \fBmongod\fP instances whose
feature compatibility version (fCV) is greater than
that of the \fI\%mongos\fP\&. For example, you cannot connect
a MongoDB 4.0 version \fI\%mongos\fP to a 4.2
sharded cluster with fCV set to 4.2\&. You
can, however, connect a MongoDB 4.0 version
\fI\%mongos\fP to a 4.2 sharded cluster with fCV set to 4.0\&.
.UNINDENT
.SH OPTIONS
.sp
\fBSEE ALSO:\fP
.INDENT 0.0
.INDENT 3.5
conf\-file\-command\-line\-mapping
.UNINDENT
.UNINDENT
.INDENT 0.0
.INDENT 3.5
.IP "Starting in version 4.2"
.INDENT 0.0
.IP \(bu 2
MongoDB deprecates the SSL options and insteads adds new
corresponding TLS options.
.IP \(bu 2
MongoDB adds
\fI\%\-\-tlsClusterCAFile\fP/\fBnet.tls.clusterCAFile\fP\&. (Also availalbe
in 3.4.18+, 3.6.9+, 4.0.3+)
.UNINDENT
.UNINDENT
.UNINDENT
.SS Core Options
.INDENT 0.0
.TP
.B \-\-help, \-h
Returns information on the options and use of \fBmongos\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-version
Returns the \fBmongos\fP release number.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-config <filename>, \-f <filename>
Specifies a configuration file for runtime configuration options. The
configuration file is the preferred method for runtime configuration of
\fBmongos\fP\&. The options are equivalent to the command\-line
configuration options. See /reference/configuration\-options for
more information.
.sp
Ensure the configuration file uses ASCII encoding. The \fBmongos\fP
instance does not support configuration files with non\-ASCII encoding,
including UTF\-8.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-configExpand <none|rest|exec>
\fIDefault\fP: none
.sp
New in version 4.2.

.sp
Enables using Expansion Directives
in configuration files. Expansion directives allow you to set
externally sourced values for configuration file options.
.sp
\fI\%\-\-configExpand\fP supports the following expansion directives:
.TS
center;
|l|l|.
_
T{
Value
T}	T{
Description
T}
_
T{
\fBnone\fP
T}	T{
Default. \fBmongos\fP does not expand expansion directives.
\fBmongos\fP fails to start if any configuration file settings
use expansion directives.
T}
_
T{
\fBrest\fP
T}	T{
\fBmongos\fP expands \fB__rest\fP expansion directives when
parsing the configuration file.
T}
_
T{
\fBexec\fP
T}	T{
\fBmongos\fP expands \fB__exec\fP expansion directives when
parsing the configuration file.
T}
_
.TE
.sp
You can specify multiple expansion directives as a comma\-separated
list, e.g. \fBrest, exec\fP\&. If the configuration file contains
expansion directives not specified to \fI\%\-\-configExpand\fP, the \fBmongos\fP
returns an error and terminates.
.sp
See externally\-sourced\-values for configuration files
for more information on expansion directives.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-verbose, \-v
Increases the amount of internal reporting returned on standard output
or in log files. Increase the verbosity with the \fB\-v\fP form by
including the option multiple times, (e.g. \fB\-vvvvv\fP\&.)
.UNINDENT
.INDENT 0.0
.TP
.B \-\-quiet
Runs \fBmongos\fP in a quiet mode that attempts to limit the amount
of output.
.sp
This option suppresses:
.INDENT 7.0
.IP \(bu 2
output from database commands
.IP \(bu 2
replication activity
.IP \(bu 2
connection accepted events
.IP \(bu 2
connection closed events
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-port <port>
\fIDefault\fP: 27017
.sp
The TCP port on which the \fI\%mongos\fP instance listens for
client connections.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-bind_ip <hostnames|ipaddresses|Unix domain socket paths>
\fIDefault\fP: localhost
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
Starting in MongoDB 3.6, \fBmongos\fP bind to localhost
by default. See 3.6\-bind\-to\-localhost\&.
.UNINDENT
.UNINDENT
.sp
The hostnames and/or IP addresses and/or full Unix domain socket
paths on which \fBmongos\fP should listen for client connections. You
may attach \fBmongos\fP to any interface. To bind to multiple
addresses, enter a list of comma\-separated values.
.INDENT 7.0
.INDENT 3.5
.SS Example
.sp
\fBlocalhost,/tmp/mongod.sock\fP
.UNINDENT
.UNINDENT
.sp
You can specify both IPv4 and IPv6 addresses, or hostnames that
resolve to an IPv4 or IPv6 address.
.INDENT 7.0
.INDENT 3.5
.SS Example
.sp
\fBlocalhost, 2001:0DB8:e132:ba26:0d5c:2774:e7f9:d513\fP
.UNINDENT
.UNINDENT
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
If specifying an IPv6 address \fIor\fP a hostname that resolves to an
IPv6 address to \fI\%\-\-bind_ip\fP, you must start \fBmongos\fP with
\fI\%\-\-ipv6\fP to enable IPv6 support. Specifying an IPv6 address
to \fI\%\-\-bind_ip\fP does not enable IPv6 support.
.UNINDENT
.UNINDENT
.sp
If specifying a
\fI\%link\-local IPv6 address\fP
(\fBfe80::/10\fP), you must append the
\fI\%zone index\fP
to that address (i.e. \fBfe80::<address>%<adapter\-name>\fP).
.INDENT 7.0
.INDENT 3.5
.SS Example
.sp
\fBlocalhost,fe80::a00:27ff:fee0:1fcf%enp0s3\fP
.UNINDENT
.UNINDENT
.INDENT 7.0
.INDENT 3.5
.SS Tip
.sp
When possible, use a logical DNS hostname instead of an ip address,
particularly when configuring replica set members or sharded cluster
members. The use of logical DNS hostnames avoids configuration
changes due to ip address changes.
.UNINDENT
.UNINDENT
.sp
\fBWARNING:\fP
.INDENT 7.0
.INDENT 3.5
Before binding to a non\-localhost (e.g. publicly accessible)
IP address, ensure you have secured your cluster from unauthorized
access. For a complete list of security recommendations, see
/administration/security\-checklist\&. At minimum, consider
enabling authentication and
hardening network infrastructure\&.
.UNINDENT
.UNINDENT
.sp
For more information about IP Binding, refer to the
/core/security\-mongodb\-configuration documentation.
.sp
To bind to all IPv4 addresses, enter \fB0.0.0.0\fP\&.
.sp
To bind to all IPv4 and IPv6 addresses, enter \fB::,0.0.0.0\fP or
starting in MongoDB 4.2, an asterisk \fB"*"\fP (enclose the asterisk in
quotes to avoid filename pattern expansion). Alternatively, use the
\fBnet.bindIpAll\fP setting.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
\fB\-\-bind_ip\fP and \fB\-\-bind_ip_all\fP are mutually exclusive.
Specifying both options causes \fBmongos\fP to throw an error and
terminate.
.IP \(bu 2
The command\-line option \fB\-\-bind\fP overrides the configuration
file setting \fBnet.bindIp\fP\&.
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-bind_ip_all
New in version 3.6.

.sp
If specified, the \fBmongos\fP instance binds to all IPv4
addresses (i.e. \fB0.0.0.0\fP). If \fBmongos\fP starts with
\fI\%\-\-ipv6\fP, \fI\%\-\-bind_ip_all\fP also binds to all IPv6 addresses
(i.e. \fB::\fP).
.sp
\fBmongos\fP only supports IPv6 if started with \fI\%\-\-ipv6\fP\&. Specifying
\fI\%\-\-bind_ip_all\fP alone does not enable IPv6 support.
.sp
\fBWARNING:\fP
.INDENT 7.0
.INDENT 3.5
Before binding to a non\-localhost (e.g. publicly accessible)
IP address, ensure you have secured your cluster from unauthorized
access. For a complete list of security recommendations, see
/administration/security\-checklist\&. At minimum, consider
enabling authentication and
hardening network infrastructure\&.
.UNINDENT
.UNINDENT
.sp
For more information about IP Binding, refer to the
/core/security\-mongodb\-configuration documentation.
.sp
Alternatively, you can set the \fB\-\-bind_ip\fP option to \fB::,0.0.0.0\fP
or, starting in MongoDB 4.2, to an asterisk \fB"*"\fP (enclose the
asterisk in quotes to avoid filename pattern expansion).
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
\fB\-\-bind_ip\fP and \fB\-\-bind_ip_all\fP are mutually exclusive. That
is, you can specify one or the other, but not both.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-maxConns <number>
The maximum number of simultaneous connections that \fBmongos\fP will
accept. This setting has no effect if it is higher than your operating
system\(aqs configured maximum connection tracking threshold.
.sp
Do not assign too low of a value to this option, or you will
encounter errors during normal application operation.
.sp
This is particularly useful for a \fI\%mongos\fP if you have a client
that creates multiple connections and allows them to timeout rather
than closing them.
.sp
In this case, set \fBmaxIncomingConnections\fP to a value slightly
higher than the maximum number of connections that the client creates, or the
maximum size of the connection pool.
.sp
This setting prevents the \fI\%mongos\fP from causing connection spikes on
the individual shards\&. Spikes like these may disrupt the
operation and memory allocation of the sharded cluster\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-logpath <path>
Sends all diagnostic logging information to a log file instead of to
standard output or to the host\(aqs syslog system. MongoDB creates
the log file at the path you specify.
.sp
By default, MongoDB will move any existing log file rather than overwrite
it. To instead append to the log file, set the \fI\%\-\-logappend\fP option.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-syslog
Sends all logging output to the host\(aqs syslog system rather
than to standard output or to a log file (\fI\%\-\-logpath\fP).
.sp
The \fI\%\-\-syslog\fP option is not supported on Windows.
.sp
\fBWARNING:\fP
.INDENT 7.0
.INDENT 3.5
The \fBsyslog\fP daemon generates timestamps when it logs a message, not
when MongoDB issues the message. This can lead to misleading timestamps
for log entries, especially when the system is under heavy load. We
recommend using the \fI\%\-\-logpath\fP option for production systems to
ensure accurate timestamps.
.UNINDENT
.UNINDENT
.sp
Starting in version 4.2, MongoDB includes the component in its log messages to \fBsyslog\fP\&.
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
\&...  ACCESS   [repl writer worker 5] Unsupported modification to roles collection ...
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-syslogFacility <string>
\fIDefault\fP: user
.sp
Specifies the facility level used when logging messages to syslog.
The value you specify must be supported by your
operating system\(aqs implementation of syslog. To use this option, you
must  enable the \fI\%\-\-syslog\fP option.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-logappend
Appends new entries to the end of the existing log file when the \fBmongos\fP
instance restarts. Without this option, \fBmongod\fP will back up the
existing log and create a new file.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-logRotate <string>
\fIDefault\fP: rename
.sp
Determines the behavior for the \fBlogRotate\fP command.
Specify either \fBrename\fP or \fBreopen\fP:
.INDENT 7.0
.IP \(bu 2
\fBrename\fP renames the log file.
.IP \(bu 2
\fBreopen\fP closes and reopens the log file following the typical
Linux/Unix log rotate behavior. Use \fBreopen\fP when using the
Linux/Unix logrotate utility to avoid log loss.
.sp
If you specify \fBreopen\fP, you must also use \fI\%\-\-logappend\fP\&.
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-redactClientLogData
New in version 3.4: Available in MongoDB Enterprise only.

.sp
A \fBmongos\fP running with \fI\%\-\-redactClientLogData\fP redacts any message accompanying a given
log event before logging. This prevents the \fBmongos\fP from writing
potentially sensitive data stored on the database to the diagnostic log.
Metadata such as error or operation codes, line numbers, and source file
names are still visible in the logs.
.sp
Use \fI\%\-\-redactClientLogData\fP in conjunction with
/core/security\-encryption\-at\-rest and
/core/security\-transport\-encryption to assist compliance with
regulatory requirements.
.sp
For example, a MongoDB deployment might store Personally Identifiable
Information (PII) in one or more collections. The \fBmongos\fP logs events
such as those related to CRUD operations, sharding metadata, etc. It is
possible that the \fBmongos\fP may expose PII as a part of these logging
operations. A \fBmongos\fP running with \fI\%\-\-redactClientLogData\fP removes any message
accompanying these events before being output to the log, effectively
removing the PII.
.sp
Diagnostics on a \fBmongos\fP running with \fI\%\-\-redactClientLogData\fP may be more difficult
due to the lack of data related to a log event. See the
process logging manual page for an
example of the effect of \fI\%\-\-redactClientLogData\fP on log output.
.sp
On a running \fBmongos\fP, use \fBsetParameter\fP with the
\fBredactClientLogData\fP parameter to configure this setting.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-timeStampFormat <string>
\fIDefault\fP: iso8601\-local
.sp
The time format for timestamps in log messages. Specify one of the
following values:
.TS
center;
|l|l|.
_
T{
Value
T}	T{
Description
T}
_
T{
\fBiso8601\-utc\fP
T}	T{
Displays timestamps in Coordinated Universal Time (UTC) in the
ISO\-8601 format. For example, for New York at the start of the
Epoch: \fB1970\-01\-01T00:00:00.000Z\fP
T}
_
T{
\fBiso8601\-local\fP
T}	T{
Displays timestamps in local time in the ISO\-8601
format. For example, for New York at the start of the Epoch:
\fB1969\-12\-31T19:00:00.000\-05:00\fP
T}
_
.TE
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
Starting in MongoDB 4.4, \fI\%\-\-timeStampFormat\fP no longer supports \fBctime\fP\&.
An example of \fBctime\fP formatted date is: \fBWed Dec 31
18:17:54.811\fP\&.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-pidfilepath <path>
Specifies a file location to store the process ID (PID) of the \fBmongos\fP
process. The user running the \fBmongod\fP or \fBmongos\fP
process must be able to write to this path. If the \fI\%\-\-pidfilepath\fP option is not
specified, the process does not create a PID file. This option is generally
only useful in combination with the \fI\%\-\-fork\fP option.
.INDENT 7.0
.INDENT 3.5
.IP "Linux"
.sp
On Linux, PID file management is generally the responsibility of
your distro\(aqs init system: usually a service file in the \fB/etc/init.d\fP
directory, or a systemd unit file registered with \fBsystemctl\fP\&. Only
use the \fI\%\-\-pidfilepath\fP option if you are not using one of these init
systems. For more information, please see the respective
Installation Guide for your operating system.
.UNINDENT
.UNINDENT
.INDENT 7.0
.INDENT 3.5
.IP "macOS"
.sp
On macOS, PID file management is generally handled by \fBbrew\fP\&. Only use
the \fI\%\-\-pidfilepath\fP option if you are not using \fBbrew\fP on your macOS system.
For more information, please see the respective
Installation Guide for your operating system.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-keyFile <file>
Specifies the path to a key file that stores the shared secret
that MongoDB instances use to authenticate to each other in a
sharded cluster or replica set\&. \fI\%\-\-keyFile\fP implies
\fBclient authorization\fP\&. See inter\-process\-auth for more
information.
.sp
Starting in MongoDB 4.2, keyfiles for internal membership
authentication use YAML format to allow for
multiple keys in a keyfile. The YAML format accepts content of:
.INDENT 7.0
.IP \(bu 2
a single key string (same as in earlier versions),
.IP \(bu 2
multiple key strings (each string must be enclosed in quotes), or
.IP \(bu 2
sequence of key strings.
.UNINDENT
.sp
The YAML format is compatible with the existing single\-key
keyfiles that use the text file format.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-setParameter <options>
Specifies one of the MongoDB parameters described in
/reference/parameters\&. You can specify multiple \fBsetParameter\fP
fields.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-noscripting
Disables the scripting engine.  When disabled, you cannot use
operations that perform server\-side execution of JavaScript code,
such as the \fB$where\fP query operator, \fBmapReduce\fP
command, \fB$accumulator\fP, and \fB$function\fP\&.
.sp
If you do not use these operations, disable server\-side scripting.
.sp
New in version 4.4.

.UNINDENT
.INDENT 0.0
.TP
.B \-\-nounixsocket
Disables listening on the UNIX domain socket. \fI\%\-\-nounixsocket\fP applies only
to Unix\-based systems.
.sp
The \fBmongos\fP process
always listens on the UNIX socket unless one of the following is true:
.INDENT 7.0
.IP \(bu 2
\fI\%\-\-nounixsocket\fP is set
.IP \(bu 2
\fBnet.bindIp\fP is not set
.IP \(bu 2
\fBnet.bindIp\fP does not specify \fBlocalhost\fP or its associated IP address
.UNINDENT
.sp
\fBmongos\fP installed from official \&.deb and \&.rpm packages
have the \fBbind_ip\fP configuration set to \fB127.0.0.1\fP by
default.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-unixSocketPrefix <path>
\fIDefault\fP: /tmp
.sp
The path for the UNIX socket. \fI\%\-\-unixSocketPrefix\fP applies only
to Unix\-based systems.
.sp
If this option has no value, the
\fBmongos\fP process creates a socket with \fB/tmp\fP as a prefix. MongoDB
creates and listens on a UNIX socket unless one of the following is true:
.INDENT 7.0
.IP \(bu 2
\fBnet.unixDomainSocket.enabled\fP is \fBfalse\fP
.IP \(bu 2
\fI\%\-\-nounixsocket\fP is set
.IP \(bu 2
\fBnet.bindIp\fP is not set
.IP \(bu 2
\fBnet.bindIp\fP does not specify \fBlocalhost\fP or its associated IP address
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-filePermissions <path>
\fIDefault\fP: \fB0700\fP
.sp
Sets the permission for the UNIX domain socket file.
.sp
\fI\%\-\-filePermissions\fP applies only to Unix\-based systems.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-fork
Enables a daemon mode that runs the \fBmongos\fP process in the
background. By default \fBmongos\fP does not run as a daemon:
typically you will run \fBmongos\fP as a daemon, either by using
\fI\%\-\-fork\fP or by using a controlling process that handles the
daemonization process (e.g. as with \fBupstart\fP and \fBsystemd\fP).
.sp
The \fI\%\-\-fork\fP option is not supported on Windows.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-transitionToAuth
New in version 3.4: Allows the \fBmongos\fP to accept and create authenticated and
non\-authenticated connections to and from other \fBmongod\fP
and \fI\%mongos\fP instances in the deployment. Used for
performing rolling transition of replica sets or sharded clusters
from a no\-auth configuration to internal authentication\&. Requires specifying a internal
authentication mechanism such as
\fI\%\-\-keyFile\fP\&.

.sp
For example, if using keyfiles for
internal authentication, the \fBmongos\fP creates
an authenticated connection with any \fBmongod\fP or \fI\%mongos\fP
in the deployment using a matching keyfile. If the security mechanisms do
not match, the \fBmongos\fP utilizes a non\-authenticated connection instead.
.sp
A \fBmongos\fP running with \fI\%\-\-transitionToAuth\fP does not enforce user access
controls\&. Users may connect to your deployment without any
access control checks and perform read, write, and administrative operations.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
A \fBmongos\fP running with internal authentication and \fIwithout\fP \fI\%\-\-transitionToAuth\fP requires clients to connect
using user access controls\&. Update clients to
connect to the \fBmongos\fP using the appropriate user
prior to restarting \fBmongos\fP without \fI\%\-\-transitionToAuth\fP\&.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-networkMessageCompressors <string>
\fIDefault\fP: snappy,zstd,zlib
.sp
New in version 3.4.

.sp
Specifies the default compressor(s) to use for
communication between this \fBmongos\fP instance and:
.INDENT 7.0
.IP \(bu 2
other members of the sharded cluster
.IP \(bu 2
a \fBmongo\fP shell
.IP \(bu 2
drivers that support the \fBOP_COMPRESSED\fP message format.
.UNINDENT
.sp
MongoDB supports the following compressors:
.INDENT 7.0
.IP \(bu 2
snappy
.IP \(bu 2
zlib (Available starting in MongoDB 3.6)
.IP \(bu 2
zstd (Available  starting in MongoDB 4.2)
.UNINDENT
.sp
\fBIn versions 3.6 and 4.0\fP, \fBmongod\fP and
\fI\%mongos\fP enable network compression by default with
\fBsnappy\fP as the compressor.
.sp
\fBStarting in version 4.2\fP, \fBmongod\fP and
\fI\%mongos\fP instances default to both \fBsnappy,zstd,zlib\fP
compressors, in that order.
.sp
To disable network compression, set the value to \fBdisabled\fP\&.
.sp
\fBIMPORTANT:\fP
.INDENT 7.0
.INDENT 3.5
Messages are compressed when both parties enable network
compression. Otherwise, messages between the parties are
uncompressed.
.UNINDENT
.UNINDENT
.sp
If you specify multiple compressors, then the order in which you list
the compressors matter as well as the communication initiator. For
example, if a \fBmongo\fP shell specifies the following network
compressors \fBzlib,snappy\fP and the \fBmongod\fP specifies
\fBsnappy,zlib\fP, messages between \fBmongo\fP shell and
\fBmongod\fP uses \fBzlib\fP\&.
.sp
If the parties do not share at least one common compressor, messages
between the parties are uncompressed. For example, if a
\fBmongo\fP shell specifies the network compressor
\fBzlib\fP and \fBmongod\fP specifies \fBsnappy\fP, messages
between \fBmongo\fP shell and \fBmongod\fP are not compressed.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-serviceExecutor <string>
\fIDefault\fP: synchronous
.sp
New in version 3.6.

.sp
Determines the threading and execution model \fBmongos\fP uses to
execute client requests. The \fB\-\-serviceExecutor\fP option accepts one
of the following values:
.TS
center;
|l|l|.
_
T{
Value
T}	T{
Description
T}
_
T{
\fBsynchronous\fP
T}	T{
The \fBmongos\fP uses synchronous networking and manages its
networking thread pool on a per connection basis. Previous
versions of MongoDB managed threads in this way.
T}
_
T{
\fBadaptive\fP
T}	T{
The \fBmongos\fP uses the new experimental asynchronous
networking mode with an adaptive thread pool which manages
threads on a per request basis. This mode should have more
consistent performance and use less resources when there are
more inactive connections than database requests.
T}
_
.TE
.UNINDENT
.INDENT 0.0
.TP
.B \-\-timeZoneInfo <path>
The full path from which to load the time zone database. If this option
is not provided, then MongoDB will use its built\-in time zone database.
.sp
The configuration file included with Linux and macOS packages sets the time
zone database path to \fB/usr/share/zoneinfo\fP by default.
.sp
The built\-in time zone database is a copy of the \fI\%Olson/IANA time zone
database\fP\&. It is updated along with MongoDB
releases, but the release cycle of the time zone database differs from the
release cycle of MongoDB. A copy of the most recent release of the time zone
database can be downloaded from
\fI\%https://downloads.mongodb.org/olson_tz_db/timezonedb\-latest.zip\fP\&.
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
wget https://downloads.mongodb.org/olson_tz_db/timezonedb\-latest.zip
unzip timezonedb\-latest.zip
mongos \-\-timeZoneInfo timezonedb\-2017b/
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-outputConfig
New in version 4.2.

.sp
Outputs the \fBmongos\fP instance\(aqs configuration options, formatted
in YAML, to \fBstdout\fP and exits the \fBmongos\fP instance. For
configuration options that uses externally\-sourced\-values,
\fI\%\-\-outputConfig\fP returns the resolved value for those options.
.sp
\fBWARNING:\fP
.INDENT 7.0
.INDENT 3.5
This may include any configured passwords or secrets previously
obfuscated through the external source.
.UNINDENT
.UNINDENT
.sp
For usage examples, see:
.INDENT 7.0
.IP \(bu 2
expansion\-directive\-output
.IP \(bu 2
/tutorial/convert\-command\-line\-options\-to\-yaml
.UNINDENT
.UNINDENT
.SS Sharded Cluster Options
.INDENT 0.0
.TP
.B \-\-configdb <replicasetName>/<config1>,<config2>...
Changed in version 3.2.

.sp
Specifies the configuration servers for the
sharded cluster\&.
.sp
Starting in MongoDB 3.2, config servers for sharded clusters can be
deployed as a replica set\&. The
replica set config servers must run the WiredTiger storage engine\&. MongoDB 3.2 deprecates the use of three mirrored
\fBmongod\fP instances for config servers.
.sp
Specify the config server replica set name and the hostname and port of
at least one of the members of the config server replica set.
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
sharding:
  configDB: <configReplSetName>/cfg1.example.net:27019, cfg2.example.net:27019,...
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
The \fI\%mongos\fP instances for the sharded cluster must specify
the same config server replica set name but can specify hostname and
port of different members of the replica set.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-localThreshold
\fIDefault\fP: 15
.sp
Specifies the ping time, in milliseconds, that \fI\%mongos\fP uses
to determine which secondary replica set members to pass read
operations from clients. The default value of \fB15\fP corresponds to
the default value in all of the client \fI\%drivers\fP\&.
.sp
When \fI\%mongos\fP receives a request that permits reads to
secondary members, the \fI\%mongos\fP will:
.INDENT 7.0
.IP \(bu 2
Find the member of the set with the lowest ping time.
.IP \(bu 2
Construct a list of replica set members that is within a ping time of
15 milliseconds of the nearest suitable member of the set.
.sp
If you specify a value for the \fI\%\-\-localThreshold\fP option, \fI\%mongos\fP will
construct the list of replica members that are within the latency
allowed by this value.
.IP \(bu 2
Select a member to read from at random from this list.
.UNINDENT
.sp
The ping time used for a member compared by the \fI\%\-\-localThreshold\fP setting is a
moving average of recent ping times, calculated at most every 10
seconds. As a result, some queries may reach members above the threshold
until the \fI\%mongos\fP recalculates the average.
.sp
See the replica\-set\-read\-preference\-behavior\-member\-selection
section of the read preference
documentation for more information.
.UNINDENT
.SS TLS Options
.INDENT 0.0
.INDENT 3.5
.SS See
.sp
/tutorial/configure\-ssl for full
documentation of MongoDB\(aqs support.
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-tlsMode <mode>
New in version 4.2.

.sp
Enables TLS used for all network connections. The
argument to the \fI\%\-\-tlsMode\fP option can be one of the following:
.TS
center;
|l|l|.
_
T{
Value
T}	T{
Description
T}
_
T{
\fBdisabled\fP
T}	T{
The server does not use TLS.
T}
_
T{
\fBallowTLS\fP
T}	T{
Connections between servers do not use TLS. For incoming
connections, the server accepts both TLS and non\-TLS.
T}
_
T{
\fBpreferTLS\fP
T}	T{
Connections between servers use TLS. For incoming
connections, the server accepts both TLS and non\-TLS.
T}
_
T{
\fBrequireTLS\fP
T}	T{
The server uses and accepts only TLS encrypted connections.
T}
_
.TE
.sp
If \fB\-\-tlsCAFile\fP or \fBtls.CAFile\fP is not
specified and you are not using x.509 authentication, the
system\-wide CA certificate store will be used when connecting to an
TLS\-enabled server.
.sp
If using x.509 authentication, \fB\-\-tlsCAFile\fP or \fBtls.CAFile\fP
must be specified unless using \fB\-\-tlsCertificateSelector\fP\&.
.sp
For more information about TLS and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-tlsCertificateKeyFile <filename>
New in version 4.2.

.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
Starting in 4.0, on macOS or Windows, you can use a certificate from
the operating system\(aqs secure store instead of specifying a PEM file. See
\fI\%\-\-tlsCertificateSelector\fP\&.
.UNINDENT
.UNINDENT
.sp
Specifies the \fB\&.pem\fP file that contains both the TLS certificate
and key.
.INDENT 7.0
.IP \(bu 2
On Linux/BSD, you must specify \fI\%\-\-tlsCertificateKeyFile\fP when TLS is enabled.
.IP \(bu 2
On Windows or macOS, you must specify either \fI\%\-\-tlsCertificateKeyFile\fP or
\fI\%\-\-tlsCertificateSelector\fP when TLS is enabled.
.UNINDENT
.sp
For more information about TLS and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-tlsCertificateKeyFilePassword <value>
New in version 4.2.

.sp
Specifies the password to de\-crypt the certificate\-key file (i.e.
\fI\%\-\-tlsCertificateKeyFile\fP). Use the \fI\%\-\-tlsCertificateKeyFilePassword\fP option only if the
certificate\-key file is encrypted. In all cases, the \fBmongos\fP will
redact the password from all logging and reporting output.
.sp
Starting in MongoDB 4.0:
.INDENT 7.0
.IP \(bu 2
On Linux/BSD, if the private key in the PEM file is encrypted and
you do not specify the \fI\%\-\-tlsCertificateKeyFilePassword\fP option, MongoDB will prompt for a
passphrase. See ssl\-certificate\-password\&.
.IP \(bu 2
On macOS or Windows, if the private key in the PEM file is
encrypted, you must explicitly specify the \fI\%\-\-tlsCertificateKeyFilePassword\fP option.
Alternatively, you can use a certificate from the secure system
store (see \fI\%\-\-tlsCertificateSelector\fP) instead of a PEM file or use an
unencrypted PEM file.
.UNINDENT
.sp
For more information about TLS and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-clusterAuthMode <option>
\fIDefault\fP: keyFile
.sp
The authentication mode used for cluster authentication. If you use
internal x.509 authentication,
specify so here. This option can have one of the following values:
.TS
center;
|l|l|.
_
T{
Value
T}	T{
Description
T}
_
T{
\fBkeyFile\fP
T}	T{
Use a keyfile for authentication.
Accept only keyfiles.
T}
_
T{
\fBsendKeyFile\fP
T}	T{
For rolling upgrade purposes. Send a keyfile for
authentication but can accept both keyfiles and x.509
certificates.
T}
_
T{
\fBsendX509\fP
T}	T{
For rolling upgrade purposes. Send the x.509 certificate for
authentication but can accept both keyfiles and x.509
certificates.
T}
_
T{
\fBx509\fP
T}	T{
Recommended. Send the x.509 certificate for authentication and
accept only x.509 certificates.
T}
_
.TE
.sp
If \fB\-\-tlsCAFile\fP or \fBtls.CAFile\fP is not
specified and you are not using x.509 authentication, the
system\-wide CA certificate store will be used when connecting to an
TLS\-enabled server.
.sp
If using x.509 authentication, \fB\-\-tlsCAFile\fP or \fBtls.CAFile\fP
must be specified unless using \fB\-\-tlsCertificateSelector\fP\&.
.sp
For more information about TLS and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-tlsClusterFile <filename>
New in version 4.2.

.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
Starting in 4.0, on macOS or Windows, you can use a certificate
from the operating system\(aqs secure store instead of a PEM
file. See \fI\%\-\-tlsClusterCertificateSelector\fP\&.
.UNINDENT
.UNINDENT
.sp
Specifies the \fB\&.pem\fP file that contains the x.509 certificate\-key
file for membership authentication
for the cluster or replica set.
.sp
If \fI\%\-\-tlsClusterFile\fP does not specify the \fB\&.pem\fP file for internal cluster
authentication or the alternative
\fI\%\-\-tlsClusterCertificateSelector\fP, the cluster uses the
\fB\&.pem\fP file specified in the \fI\%\-\-tlsCertificateKeyFile\fP option or
the certificate returned by the \fI\%\-\-tlsCertificateSelector\fP\&.
.sp
If using x.509 authentication, \fB\-\-tlsCAFile\fP or \fBtls.CAFile\fP
must be specified unless using \fB\-\-tlsCertificateSelector\fP\&.
.sp
Changed in version 4.4: \fBmongod\fP / \fI\%mongos\fP logs a warning on
connection if the presented x.509 certificate expires within \fB30\fP
days of the \fBmongod/mongos\fP host system time. See
4.4\-rel\-notes\-certificate\-expiration\-warning for more
information.

.sp
For more information about TLS and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-tlsClusterPassword <value>
New in version 4.2.

.sp
Specifies the password to de\-crypt the x.509 certificate\-key file
specified with \fB\-\-tlsClusterFile\fP\&. Use the \fI\%\-\-tlsClusterPassword\fP option only
if the certificate\-key file is encrypted. In all cases, the \fBmongos\fP
will redact the password from all logging and reporting output.
.sp
Starting in MongoDB 4.0:
.INDENT 7.0
.IP \(bu 2
On Linux/BSD, if the private key in the x.509 file is encrypted and
you do not specify the \fI\%\-\-tlsClusterPassword\fP option, MongoDB will prompt for a
passphrase. See ssl\-certificate\-password\&.
.IP \(bu 2
On macOS or Windows, if the private key in the x.509 file is
encrypted, you must explicitly specify the \fI\%\-\-tlsClusterPassword\fP option.
Alternatively, you can either use a certificate from the secure
system store (see \fI\%\-\-tlsClusterCertificateSelector\fP) instead of a cluster PEM file or
use an unencrypted PEM file.
.UNINDENT
.sp
For more information about TLS and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-tlsCAFile <filename>
New in version 4.2.

.sp
Specifies the \fB\&.pem\fP file that contains the root certificate chain
from the Certificate Authority. Specify the file name of the
\fB\&.pem\fP file using relative or absolute paths.
.sp
Starting in 4.0, on macOS or Windows, you can use a certificate from
the operating system\(aqs secure store instead of a PEM key file. See
\fI\%\-\-tlsCertificateSelector\fP\&. When using the secure store, you
do not need to, but can, also specify the \fI\%\-\-tlsCAFile\fP\&.
.sp
For more information about TLS and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-tlsClusterCAFile <filename>
New in version 4.2.

.sp
Specifies the \fB\&.pem\fP file that contains the root certificate chain
from the Certificate Authority used to validate the certificate
presented by a client establishing a connection. Specify the file
name of the \fB\&.pem\fP file using relative or absolute paths.
.sp
If \fI\%\-\-tlsClusterCAFile\fP does not specify the \fB\&.pem\fP file for validating the
certificate from a client establishing a connection, the cluster uses
the \fB\&.pem\fP file specified in the \fI\%\-\-tlsCAFile\fP option.
.sp
\fI\%\-\-tlsClusterCAFile\fP lets you use separate Certificate Authorities to verify the
client to server and server to client portions of the TLS handshake.
.sp
Starting in 4.0, on macOS or Windows, you can use a certificate from
the operating system\(aqs secure store instead of a PEM key file. See
\fI\%\-\-tlsClusterCertificateSelector\fP\&. When using the secure store, you
do not need to, but can, also specify the \fI\%\-\-tlsClusterCAFile\fP\&.
.sp
Requires that \fI\%\-\-tlsCAFile\fP is set.
.sp
For more information about TLS and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-tlsCertificateSelector <parameter>=<value>
New in version 4.2: Available on Windows and macOS as an alternative to \fI\%\-\-tlsCertificateKeyFile\fP\&.
.sp
The \fI\%\-\-tlsCertificateKeyFile\fP and \fI\%\-\-tlsCertificateSelector\fP options are mutually exclusive. You can only
specify one.

.sp
Specifies a certificate property in order to select a matching
certificate from the operating system\(aqs certificate store.
.sp
\fI\%\-\-tlsCertificateSelector\fP accepts an argument of the format \fB<property>=<value>\fP
where the property can be one of the following:
.TS
center;
|l|l|l|.
_
T{
Property
T}	T{
Value type
T}	T{
Description
T}
_
T{
\fBsubject\fP
T}	T{
ASCII string
T}	T{
Subject name or common name on certificate
T}
_
T{
\fBthumbprint\fP
T}	T{
hex string
T}	T{
A sequence of bytes, expressed as hexadecimal, used to
identify a public key by its SHA\-1 digest.
.sp
The \fBthumbprint\fP is sometimes referred to as a
\fBfingerprint\fP\&.
T}
_
.TE
.sp
When using the system SSL certificate store, OCSP (Online
Certificate Status Protocol) is used to validate the revocation
status of certificates.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-tlsClusterCertificateSelector <parameter>=<value>
New in version 4.2: Available on Windows and macOS as an alternative to
\fI\%\-\-tlsClusterFile\fP\&.
.sp
\fI\%\-\-tlsClusterFile\fP and \fI\%\-\-tlsClusterCertificateSelector\fP options are mutually exclusive. You can only
specify one.

.sp
Specifies a certificate property in order to select a matching
certificate from the operating system\(aqs certificate store to use for
internal authentication.
.sp
\fI\%\-\-tlsClusterCertificateSelector\fP accepts an argument of the format \fB<property>=<value>\fP
where the property can be one of the following:
.TS
center;
|l|l|l|.
_
T{
Property
T}	T{
Value type
T}	T{
Description
T}
_
T{
\fBsubject\fP
T}	T{
ASCII string
T}	T{
Subject name or common name on certificate
T}
_
T{
\fBthumbprint\fP
T}	T{
hex string
T}	T{
A sequence of bytes, expressed as hexadecimal, used to
identify a public key by its SHA\-1 digest.
.sp
The \fBthumbprint\fP is sometimes referred to as a
\fBfingerprint\fP\&.
T}
_
.TE
.sp
Changed in version 4.4: \fBmongod\fP / \fI\%mongos\fP logs a warning on
connection if the presented x.509 certificate expires within \fB30\fP
days of the \fBmongod/mongos\fP host system time. See
4.4\-rel\-notes\-certificate\-expiration\-warning for more
information.

.UNINDENT
.INDENT 0.0
.TP
.B \-\-tlsCRLFile <filename>
New in version 4.2: For MongoDB 4.0 and earlier, see \fI\%\-\-sslCRLFile\fP\&.

.sp
Specifies the \fB\&.pem\fP file that contains the Certificate Revocation
List. Specify the file name of the \fB\&.pem\fP file using relative or
absolute paths.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
Starting in MongoDB 4.0, you cannot specify a CRL file on
macOS. Instead, you can use the system SSL certificate store,
which uses OCSP (Online Certificate Status Protocol) to
validate the revocation status of certificates. See
\fI\%\-\-sslCertificateSelector\fP in MongoDB 4.0 and
\fI\%\-\-tlsCertificateSelector\fP in MongoDB 4.2+ to use the
system SSL certificate store.
.IP \(bu 2
Starting in version 4.4, to check for certificate revocation,
MongoDB \fBenables\fP the use of OCSP
(Online Certificate Status Protocol) by default as an
alternative to specifying a CRL file or using the system SSL
certificate store.
.UNINDENT
.UNINDENT
.UNINDENT
.sp
For more information about TLS and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-tlsAllowConnectionsWithoutCertificates
New in version 4.2.

.sp
For clients that do not present certificates, \fBmongos\fP bypasses
TLS/SSL certificate validation when establishing the connection.
.sp
For clients that present a certificate, however, \fBmongos\fP performs
certificate validation using the root certificate chain specified by
\fB\-\-tlsCAFile\fP and reject clients with invalid certificates.
.sp
Use the \fI\%\-\-tlsAllowConnectionsWithoutCertificates\fP option if you have a mixed deployment that includes
clients that do not or cannot present certificates to the \fBmongos\fP\&.
.sp
For more information about TLS and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-tlsAllowInvalidCertificates
New in version 4.2.

.sp
Bypasses the validation checks for TLS certificates on other
servers in the cluster and allows the use of invalid certificates to
connect.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
If you specify
\fB\-\-tlsAllowInvalidCertificates\fP or \fBtls.allowInvalidCertificates:
true\fP when using x.509 authentication, an invalid certificate is
only sufficient to establish a TLS connection but is
\fIinsufficient\fP for authentication.
.UNINDENT
.UNINDENT
.sp
When using
the \fI\%\-\-tlsAllowInvalidCertificates\fP setting, MongoDB
logs a warning regarding the use of the invalid certificate.
.sp
For more information about TLS and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-tlsAllowInvalidHostnames
New in version 4.2.

.sp
Disables the validation of the hostnames in TLS certificates,
when connecting to other members of the replica set or sharded cluster
for inter\-process authentication. This allows \fBmongos\fP to connect
to other members if the hostnames in their certificates do not match
their configured hostname.
.sp
For more information about TLS and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-tlsDisabledProtocols <protocol(s)>
New in version 4.2.

.sp
Prevents a MongoDB server running with TLS from accepting
incoming connections that use a specific protocol or protocols. To
specify multiple protocols, use a comma separated list of protocols.
.sp
\fI\%\-\-tlsDisabledProtocols\fP recognizes the following protocols: \fBTLS1_0\fP, \fBTLS1_1\fP,
\fBTLS1_2\fP, and starting in version 4.0.4 (and 3.6.9), \fBTLS1_3\fP\&.
.INDENT 7.0
.IP \(bu 2
On macOS, you cannot disable \fBTLS1_1\fP and leave both \fBTLS1_0\fP and
\fBTLS1_2\fP enabled. You must disable at least one of the other
two, for example, \fBTLS1_0,TLS1_1\fP\&.
.IP \(bu 2
To list multiple protocols, specify as a comma separated list of
protocols. For example \fBTLS1_0,TLS1_1\fP\&.
.IP \(bu 2
Specifying an unrecognized protocol will prevent the server from
starting.
.IP \(bu 2
The specified disabled protocols overrides any default disabled
protocols.
.UNINDENT
.sp
Starting in version 4.0, MongoDB disables the use of TLS 1.0 if TLS
1.1+ is available on the system. To enable the disabled TLS 1.0,
specify \fBnone\fP to \fI\%\-\-tlsDisabledProtocols\fP\&. See 4.0\-disable\-tls\&.
.sp
Members of replica sets and sharded clusters must speak at least one
protocol in common.
.sp
\fBSEE ALSO:\fP
.INDENT 7.0
.INDENT 3.5
ssl\-disallow\-protocols
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-tlsFIPSMode
New in version 4.2.

.sp
Directs the \fBmongos\fP to use the FIPS mode of the  TLS
library. Your system must have a FIPS
compliant library to use the \fI\%\-\-tlsFIPSMode\fP option.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
FIPS\-compatible TLS/SSL is
available only in \fI\%MongoDB Enterprise\fP\&. See
/tutorial/configure\-fips for more information.
.UNINDENT
.UNINDENT
.UNINDENT
.SS SSL Options (Deprecated)
.sp
\fBIMPORTANT:\fP
.INDENT 0.0
.INDENT 3.5
All SSL options are deprecated since 4.2. Use the TLS counterparts
instead, as they have identical functionality to the SSL options.  The SSL
protocol is deprecated and MongoDB supports TLS 1.0 and later.
.UNINDENT
.UNINDENT
.INDENT 0.0
.INDENT 3.5
.SS See
.sp
/tutorial/configure\-ssl for full
documentation of MongoDB\(aqs support.
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslOnNormalPorts
Deprecated since version 2.6: Use \fI\%\-\-tlsMode requireTLS\fP instead.

.sp
Enables TLS/SSL for \fBmongos\fP\&.
.sp
With \fI\%\-\-sslOnNormalPorts\fP, a \fBmongos\fP requires TLS/SSL encryption for all
connections on the default MongoDB port, or the port specified by
\fI\%\-\-port\fP\&. By default, \fI\%\-\-sslOnNormalPorts\fP is
disabled.
.sp
For more information about TLS/SSL and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslMode <mode>
Deprecated since version 4.2: Use \fI\%\-\-tlsMode\fP instead.

.sp
Enables TLS/SSL or mixed TLS/SSL used for all network connections. The
argument to the \fI\%\-\-sslMode\fP option can be one of the following:
.TS
center;
|l|l|.
_
T{
Value
T}	T{
Description
T}
_
T{
\fBdisabled\fP
T}	T{
The server does not use TLS/SSL.
T}
_
T{
\fBallowSSL\fP
T}	T{
Connections between servers do not use TLS/SSL. For incoming
connections, the server accepts both TLS/SSL and non\-TLS/non\-SSL.
T}
_
T{
\fBpreferSSL\fP
T}	T{
Connections between servers use TLS/SSL. For incoming
connections, the server accepts both TLS/SSL and non\-TLS/non\-SSL.
T}
_
T{
\fBrequireSSL\fP
T}	T{
The server uses and accepts only TLS/SSL encrypted connections.
T}
_
.TE
.sp
Starting in version 3.4, if \fB\-\-tlsCAFile\fP/\fBnet.tls.CAFile\fP (or
their aliases \fB\-\-sslCAFile\fP/\fBnet.ssl.CAFile\fP) is not specified
and you are not using x.509 authentication, the system\-wide CA
certificate store will be used when connecting to an TLS/SSL\-enabled
server.
.sp
To use x.509 authentication, \fB\-\-tlsCAFile\fP or \fBnet.tls.CAFile\fP
must be specified unless using \fB\-\-tlsCertificateSelector\fP or
\fB\-\-net.tls.certificateSelector\fP\&. Or if using the \fBssl\fP aliases,
\fB\-\-sslCAFile\fP or \fBnet.ssl.CAFile\fP must be specified unless using
\fB\-\-sslCertificateSelector\fP or \fBnet.ssl.certificateSelector\fP\&.
.sp
For more information about TLS/SSL and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslPEMKeyFile <filename>
Deprecated since version 4.2: Use \fI\%\-\-tlsPEMKeyFile\fP instead.

.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
Starting in 4.0, on macOS or Windows, you can use a certificate from
the operating system\(aqs secure store instead of a PEM file. See
\fI\%\-\-sslCertificateSelector\fP\&.
.UNINDENT
.UNINDENT
.sp
Specifies the \fB\&.pem\fP file that contains both the TLS/SSL certificate
and key.
.INDENT 7.0
.IP \(bu 2
On Linux/BSD, you must specify \fI\%\-\-sslPEMKeyFile\fP when TLS/SSL is enabled.
.IP \(bu 2
On Windows or macOS, you must specify either \fI\%\-\-sslPEMKeyFile\fP or
\fI\%\-\-sslCertificateSelector\fP when TLS/SSL is enabled.
.UNINDENT
.sp
For more information about TLS/SSL and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslPEMKeyPassword <value>
Deprecated since version 4.2: Use \fI\%\-\-tlsPEMKeyPassword\fP instead.

.sp
Specifies the password to de\-crypt the certificate\-key file (i.e.
\fI\%\-\-sslPEMKeyFile\fP). Use the \fI\%\-\-sslPEMKeyPassword\fP option only if the
certificate\-key file is encrypted. In all cases, the \fBmongos\fP will
redact the password from all logging and reporting output.
.sp
Starting in MongoDB 4.0:
.INDENT 7.0
.IP \(bu 2
On Linux/BSD, if the private key in the PEM file is encrypted and
you do not specify the \fI\%\-\-sslPEMKeyPassword\fP option, MongoDB will prompt for a
passphrase. See ssl\-certificate\-password\&.
.IP \(bu 2
On macOS or Windows, if the private key in the PEM file is
encrypted, you must explicitly specify the \fI\%\-\-sslPEMKeyPassword\fP option.
Alternatively, you can use a certificate from the secure system
store (see \fI\%\-\-sslCertificateSelector\fP) instead of a PEM key file or use an
unencrypted PEM file.
.UNINDENT
.sp
For more information about TLS/SSL and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslClusterFile <filename>
Deprecated since version 4.2: Use \fI\%\-\-tlsClusterFile\fP instead.

.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
Starting in 4.0, on macOS or Windows, you can use a certificate
from the operating system\(aqs secure store instead of a PEM key
file. See \fI\%\-\-sslClusterCertificateSelector\fP\&.
.UNINDENT
.UNINDENT
.sp
Specifies the \fB\&.pem\fP file that contains the x.509 certificate\-key
file for membership authentication
for the cluster or replica set.
.sp
If \fI\%\-\-sslClusterFile\fP does not specify the \fB\&.pem\fP file for internal cluster
authentication or the alternative
\fI\%\-\-sslClusterCertificateSelector\fP, the cluster uses the
\fB\&.pem\fP file specified in the \fI\%\-\-sslPEMKeyFile\fP option or
the certificate returned by the \fI\%\-\-sslCertificateSelector\fP\&.
.sp
To use x.509 authentication, \fB\-\-tlsCAFile\fP or \fBnet.tls.CAFile\fP
must be specified unless using \fB\-\-tlsCertificateSelector\fP or
\fB\-\-net.tls.certificateSelector\fP\&. Or if using the \fBssl\fP aliases,
\fB\-\-sslCAFile\fP or \fBnet.ssl.CAFile\fP must be specified unless using
\fB\-\-sslCertificateSelector\fP or \fBnet.ssl.certificateSelector\fP\&.
.sp
For more information about TLS/SSL and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslClusterPassword <value>
Deprecated since version 4.2: Use \fI\%\-\-tlsClusterPassword\fP instead.

.sp
Specifies the password to de\-crypt the x.509 certificate\-key file
specified with \fB\-\-sslClusterFile\fP\&. Use the \fI\%\-\-sslClusterPassword\fP option only
if the certificate\-key file is encrypted. In all cases, the \fBmongos\fP
will redact the password from all logging and reporting output.
.sp
Starting in MongoDB 4.0:
.INDENT 7.0
.IP \(bu 2
On Linux/BSD, if the private key in the x.509 file is encrypted and
you do not specify the \fI\%\-\-sslClusterPassword\fP option, MongoDB will prompt for a
passphrase. See ssl\-certificate\-password\&.
.IP \(bu 2
On macOS or Windows, if the private key in the x.509 file is
encrypted, you must explicitly specify the \fI\%\-\-sslClusterPassword\fP option.
Alternatively, you can either use a certificate from the secure
system store (see \fI\%\-\-sslClusterCertificateSelector\fP) instead of a cluster PEM file or
use an unencrypted PEM file.
.UNINDENT
.sp
For more information about TLS/SSL and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslCAFile <filename>
Deprecated since version 4.2: Use \fI\%\-\-tlsCAFile\fP instead.

.sp
Specifies the \fB\&.pem\fP file that contains the root certificate chain
from the Certificate Authority. Specify the file name of the
\fB\&.pem\fP file using relative or absolute paths.
.sp
Starting in 4.0, on macOS or Windows, you can use a certificate from
the operating system\(aqs secure store instead of a PEM key file. See
\fI\%\-\-sslCertificateSelector\fP\&. When using the secure store, you
do not need to, but can, also specify the \fI\%\-\-sslCAFile\fP\&.
.sp
For more information about TLS/SSL and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslClusterCAFile <filename>
Deprecated since version 4.2: Use \fI\%\-\-tlsClusterCAFile\fP instead.

.sp
Specifies the \fB\&.pem\fP file that contains the root certificate chain
from the Certificate Authority used to validate the certificate
presented by a client establishing a connection. Specify the file
name of the \fB\&.pem\fP file using relative or absolute paths.
.sp
If \fI\%\-\-sslClusterCAFile\fP does not specify the \fB\&.pem\fP file for validating the
certificate from a client establishing a connection, the cluster uses
the \fB\&.pem\fP file specified in the \fI\%\-\-sslCAFile\fP option.
.sp
\fI\%\-\-sslClusterCAFile\fP lets you use separate Certificate Authorities to verify the
client to server and server to client portions of the TLS handshake.
.sp
Starting in 4.0, on macOS or Windows, you can use a certificate from
the operating system\(aqs secure store instead of a PEM key file. See
\fI\%\-\-sslClusterCertificateSelector\fP\&. When using the secure store, you
do not need to, but can, also specify the \fI\%\-\-sslClusterCAFile\fP\&.
.sp
Requires that \fI\%\-\-sslCAFile\fP is set.
.sp
For more information about TLS/SSL and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslCertificateSelector <parameter>=<value>
Deprecated since version 4.2: Use \fI\%\-\-tlsCertificateSelector\fP instead.

.sp
New in version 4.0: Available on Windows and macOS as an alternative to \fI\%\-\-tlsCertificateKeyFile\fP\&.
.sp
\fI\%\-\-tlsCertificateKeyFile\fP and \fI\%\-\-sslCertificateSelector\fP options are mutually exclusive. You can only
specify one.

.sp
Specifies a certificate property in order to select a matching
certificate from the operating system\(aqs certificate store.
.sp
\fI\%\-\-sslCertificateSelector\fP accepts an argument of the format \fB<property>=<value>\fP
where the property can be one of the following:
.TS
center;
|l|l|l|.
_
T{
Property
T}	T{
Value type
T}	T{
Description
T}
_
T{
\fBsubject\fP
T}	T{
ASCII string
T}	T{
Subject name or common name on certificate
T}
_
T{
\fBthumbprint\fP
T}	T{
hex string
T}	T{
A sequence of bytes, expressed as hexadecimal, used to
identify a public key by its SHA\-1 digest.
.sp
The \fBthumbprint\fP is sometimes referred to as a
\fBfingerprint\fP\&.
T}
_
.TE
.sp
When using the system SSL certificate store, OCSP (Online
Certificate Status Protocol) is used to validate the revocation
status of certificates.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslClusterCertificateSelector <parameter>=<value>
Deprecated since version 4.2: Use \fI\%\-\-tlsClusterCertificateSelector\fP instead.

.sp
New in version 4.0: Available on Windows and macOS as an alternative to
\fI\%\-\-sslClusterFile\fP\&.
.sp
\fI\%\-\-sslClusterFile\fP and \fI\%\-\-sslClusterCertificateSelector\fP options are mutually exclusive. You can only
specify one.

.sp
Specifies a certificate property in order to select a matching
certificate from the operating system\(aqs certificate store to use for
internal authentication.
.sp
\fI\%\-\-sslClusterCertificateSelector\fP accepts an argument of the format \fB<property>=<value>\fP
where the property can be one of the following:
.TS
center;
|l|l|l|.
_
T{
Property
T}	T{
Value type
T}	T{
Description
T}
_
T{
\fBsubject\fP
T}	T{
ASCII string
T}	T{
Subject name or common name on certificate
T}
_
T{
\fBthumbprint\fP
T}	T{
hex string
T}	T{
A sequence of bytes, expressed as hexadecimal, used to
identify a public key by its SHA\-1 digest.
.sp
The \fBthumbprint\fP is sometimes referred to as a
\fBfingerprint\fP\&.
T}
_
.TE
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslCRLFile <filename>
Deprecated since version 4.2: Use \fI\%\-\-tlsCRLFile\fP instead.

.sp
Specifies the \fB\&.pem\fP file that contains the Certificate Revocation
List. Specify the file name of the \fB\&.pem\fP file using relative or
absolute paths.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
Starting in MongoDB 4.0, you cannot specify a CRL file on
macOS. Instead, you can use the system SSL certificate store,
which uses OCSP (Online Certificate Status Protocol) to
validate the revocation status of certificates. See
\fI\%\-\-sslCertificateSelector\fP in MongoDB 4.0 and
\fI\%\-\-tlsCertificateSelector\fP in MongoDB 4.2+ to use the
system SSL certificate store.
.IP \(bu 2
Starting in version 4.4, to check for certificate revocation,
MongoDB \fBenables\fP the use of OCSP
(Online Certificate Status Protocol) by default as an
alternative to specifying a CRL file or using the system SSL
certificate store.
.UNINDENT
.UNINDENT
.UNINDENT
.sp
For more information about TLS/SSL and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslAllowConnectionsWithoutCertificates
Deprecated since version 4.2: Use \fI\%\-\-tlsAllowConnectionsWithoutCertificates\fP instead.

.sp
For clients that do not present certificates, \fBmongos\fP bypasses
TLS/SSL certificate validation when establishing the connection.
.sp
For clients that present a certificate, however, \fBmongos\fP performs
certificate validation using the root certificate chain specified by
\fB\-\-sslCAFile\fP and reject clients with invalid certificates.
.sp
Use the \fI\%\-\-sslAllowConnectionsWithoutCertificates\fP option if you have a mixed deployment that includes
clients that do not or cannot present certificates to the \fBmongos\fP\&.
.sp
For more information about TLS/SSL and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslAllowInvalidCertificates
Deprecated since version 4.2: Use \fI\%\-\-tlsAllowInvalidCertificates\fP instead.

.sp
Bypasses the validation checks for TLS/SSL certificates on other
servers in the cluster and allows the use of invalid certificates to
connect.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
Starting in MongoDB 4.0, if you specify
\fB\-\-sslAllowInvalidCertificates\fP or
\fBnet.ssl.allowInvalidCertificates: true\fP (or in MongoDB 4.2, the
alias \fB\-\-tlsAllowInvalidateCertificates\fP or
\fBnet.tls.allowInvalidCertificates: true\fP) when using x.509
authentication, an invalid certificate is only sufficient to
establish a TLS/SSL connection but is \fIinsufficient\fP for
authentication.
.UNINDENT
.UNINDENT
.sp
When using
the \fI\%\-\-sslAllowInvalidCertificates\fP setting, MongoDB
logs a warning regarding the use of the invalid certificate.
.sp
For more information about TLS/SSL and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslAllowInvalidHostnames
Deprecated since version 4.2: Use \fI\%\-\-tlsAllowInvalidHostnames\fP instead.

.sp
Disables the validation of the hostnames in TLS/SSL certificates,
when connecting to other members of the replica set or sharded cluster
for inter\-process authentication. This allows \fBmongos\fP to connect
to other members if the hostnames in their certificates do not match
their configured hostname.
.sp
For more information about TLS/SSL and MongoDB, see
/tutorial/configure\-ssl and
/tutorial/configure\-ssl\-clients .
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslDisabledProtocols <protocol(s)>
Deprecated since version 4.2: Use \fI\%\-\-tlsDisabledProtocols\fP instead.

.sp
Prevents a MongoDB server running with TLS/SSL from accepting
incoming connections that use a specific protocol or protocols. To
specify multiple protocols, use a comma separated list of protocols.
.sp
\fI\%\-\-sslDisabledProtocols\fP recognizes the following protocols: \fBTLS1_0\fP, \fBTLS1_1\fP,
\fBTLS1_2\fP, and starting in version 4.0.4 (and 3.6.9), \fBTLS1_3\fP\&.
.INDENT 7.0
.IP \(bu 2
On macOS, you cannot disable \fBTLS1_1\fP and leave both \fBTLS1_0\fP and
\fBTLS1_2\fP enabled. You must disable at least one of the other
two, for example, \fBTLS1_0,TLS1_1\fP\&.
.IP \(bu 2
To list multiple protocols, specify as a comma separated list of
protocols. For example \fBTLS1_0,TLS1_1\fP\&.
.IP \(bu 2
Specifying an unrecognized protocol will prevent the server from
starting.
.IP \(bu 2
The specified disabled protocols overrides any default disabled
protocols.
.UNINDENT
.sp
Starting in version 4.0, MongoDB disables the use of TLS 1.0 if TLS
1.1+ is available on the system. To enable the disabled TLS 1.0,
specify \fBnone\fP to \fI\%\-\-sslDisabledProtocols\fP\&. See 4.0\-disable\-tls\&.
.sp
Members of replica sets and sharded clusters must speak at least one
protocol in common.
.sp
\fBSEE ALSO:\fP
.INDENT 7.0
.INDENT 3.5
ssl\-disallow\-protocols
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslFIPSMode
Deprecated since version 4.2: Use \fI\%\-\-tlsFIPSMode\fP instead.

.sp
Directs the \fBmongos\fP to use the FIPS mode of the  TLS/SSL
library. Your system must have a FIPS
compliant library to use the \fI\%\-\-sslFIPSMode\fP option.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
FIPS\-compatible TLS/SSL is
available only in \fI\%MongoDB Enterprise\fP\&. See
/tutorial/configure\-fips for more information.
.UNINDENT
.UNINDENT
.UNINDENT
.SS Audit Options
.INDENT 0.0
.TP
.B \-\-auditDestination
Enables auditing and specifies where
\fBmongos\fP sends all audit events.
.sp
\fI\%\-\-auditDestination\fP can have one of the following values:
.TS
center;
|l|l|.
_
T{
Value
T}	T{
Description
T}
_
T{
\fBsyslog\fP
T}	T{
Output the audit events to syslog in JSON format. Not available on
Windows. Audit messages have a syslog severity level of \fBinfo\fP
and a facility level of \fBuser\fP\&.
.sp
The syslog message limit can result in the truncation of
audit messages. The auditing system will neither detect the
truncation nor error upon its occurrence.
T}
_
T{
\fBconsole\fP
T}	T{
Output the audit events to \fBstdout\fP in JSON format.
T}
_
T{
\fBfile\fP
T}	T{
Output the audit events to the file specified in
\fI\%\-\-auditPath\fP in the format specified in
\fI\%\-\-auditFormat\fP\&.
T}
_
.TE
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
Available only in \fI\%MongoDB Enterprise\fP
and \fI\%MongoDB Atlas\fP\&.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-auditFormat
Specifies the format of the output file for auditing if \fI\%\-\-auditDestination\fP is \fBfile\fP\&. The
\fI\%\-\-auditFormat\fP option can have one of the following values:
.TS
center;
|l|l|.
_
T{
Value
T}	T{
Description
T}
_
T{
\fBJSON\fP
T}	T{
Output the audit events in JSON format to the file specified
in \fI\%\-\-auditPath\fP\&.
T}
_
T{
\fBBSON\fP
T}	T{
Output the audit events in BSON binary format to the file
specified in \fI\%\-\-auditPath\fP\&.
T}
_
.TE
.sp
Printing audit events to a file in JSON format degrades server
performance more than printing to a file in BSON format.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
Available only in \fI\%MongoDB Enterprise\fP
and \fI\%MongoDB Atlas\fP\&.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-auditPath
Specifies the output file for auditing if
\fI\%\-\-auditDestination\fP has value of \fBfile\fP\&. The \fI\%\-\-auditPath\fP
option can take either a full path name or a relative path name.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
Available only in \fI\%MongoDB Enterprise\fP
and \fI\%MongoDB Atlas\fP\&.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-auditFilter
Specifies the filter to limit the types of operations the audit system records. The option takes a string representation
of a query document of the form:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
{ <field1>: <expression1>, ... }
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
The \fB<field>\fP can be any field in the audit message, including fields returned in the
param document. The
\fB<expression>\fP is a query condition expression\&.
.sp
To specify an audit filter, enclose the filter document in single
quotes to pass the document as a string.
.sp
To specify the audit filter in a configuration file, you must use the YAML format of
the configuration file.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
Available only in \fI\%MongoDB Enterprise\fP
and \fI\%MongoDB Atlas\fP\&.
.UNINDENT
.UNINDENT
.UNINDENT
.SS Profiler Options
.sp
New in version 4.0.

.INDENT 0.0
.TP
.B \-\-slowms <integer>
\fIDefault\fP: 100
.sp
The \fIslow\fP operation time threshold, in milliseconds. Operations
that run for longer than this threshold are considered \fIslow\fP\&.
.sp
When \fBlogLevel\fP is set to \fB0\fP, MongoDB records \fIslow\fP
operations to the diagnostic log at a rate determined by
\fBslowOpSampleRate\fP\&.
.sp
At higher \fBlogLevel\fP settings, all operations appear
in the diagnostic log regardless of their latency.
.sp
For \fI\%mongos\fP instances,  affects the diagnostic
log only and not the profiler since profiling is not available on
\fI\%mongos\fP\&.
.sp
New in version 4.0.

.UNINDENT
.INDENT 0.0
.TP
.B \-\-slowOpSampleRate <double>
\fIDefault\fP: 1.0
.sp
The fraction of \fIslow\fP operations that should be logged.
\fI\%\-\-slowOpSampleRate\fP accepts values between 0 and 1, inclusive.
.sp
For \fI\%mongos\fP instances, \fI\%\-\-slowOpSampleRate\fP affects the diagnostic log
only and not the profiler since profiling is not available on
\fI\%mongos\fP\&.
.sp
New in version 4.0.

.UNINDENT
.SS LDAP Authentication and Authorization Options
.INDENT 0.0
.TP
.B \-\-ldapServers <host1>:<port>,<host2>:<port>,...,<hostN>:<port>
New in version 3.4: Available in MongoDB Enterprise only.

.sp
The LDAP server against which the \fBmongos\fP authenticates users or
determines what actions a user is authorized to perform on a given
database. If the LDAP server specified has any replicated instances,
you may specify the host and port of each replicated server in a
comma\-delimited list.
.sp
If your LDAP infrastructure partitions the LDAP directory over multiple LDAP
servers, specify \fIone\fP LDAP server or any of its replicated instances to
\fI\%\-\-ldapServers\fP\&. MongoDB supports following LDAP referrals as defined in \fI\%RFC 4511
4.1.10\fP\&. Do not use \fI\%\-\-ldapServers\fP
for listing every LDAP server in your infrastructure.
.sp
This setting can be configured on a running \fBmongos\fP using
\fBsetParameter\fP\&.
.sp
If unset, \fBmongos\fP cannot use LDAP authentication or authorization\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-ldapValidateLDAPServerConfig <boolean>
\fIAvailable in MongoDB Enterprise\fP
.sp
A flag that determines if the \fI\%mongos\fP instance checks
the availability of the \fI\%LDAP server(s)\fP as part of its startup:
.INDENT 7.0
.IP \(bu 2
If \fBtrue\fP, the \fI\%mongos\fP instance performs the
availability check and only continues to start up if the LDAP
server is available.
.IP \(bu 2
If \fBfalse\fP, the \fI\%mongos\fP instance skips the
availability check; i.e. the instance starts up even if the LDAP
server is unavailable.
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-ldapQueryUser <string>
New in version 3.4: Available in MongoDB Enterprise only.

.sp
The identity with which \fBmongos\fP binds as, when connecting to or
performing queries on an LDAP server.
.sp
Only required if any of the following are true:
.INDENT 7.0
.IP \(bu 2
Using LDAP authorization\&.
.IP \(bu 2
Using an LDAP query for \fI\%username transformation\fP\&.
.IP \(bu 2
The LDAP server disallows anonymous binds
.UNINDENT
.sp
You must use \fI\%\-\-ldapQueryUser\fP with \fI\%\-\-ldapQueryPassword\fP\&.
.sp
If unset, \fBmongos\fP will not attempt to bind to the LDAP server.
.sp
This setting can be configured on a running \fBmongos\fP using
\fBsetParameter\fP\&.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
Windows MongoDB deployments can use \fI\%\-\-ldapBindWithOSDefaults\fP
instead of \fI\%\-\-ldapQueryUser\fP and \fI\%\-\-ldapQueryPassword\fP\&. You cannot specify
both \fI\%\-\-ldapQueryUser\fP and \fI\%\-\-ldapBindWithOSDefaults\fP at the same time.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-ldapQueryPassword <string>
New in version 3.4: Available in MongoDB Enterprise only.
.sp
The password used to bind to an LDAP server when using
\fI\%\-\-ldapQueryUser\fP\&. You must use \fI\%\-\-ldapQueryPassword\fP with
\fI\%\-\-ldapQueryUser\fP\&.

.sp
If unset, \fBmongos\fP will not attempt to bind to the LDAP server.
.sp
This setting can be configured on a running \fBmongos\fP using
\fBsetParameter\fP\&.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
Windows MongoDB deployments can use \fI\%\-\-ldapBindWithOSDefaults\fP
instead of \fI\%\-\-ldapQueryPassword\fP and \fI\%\-\-ldapQueryPassword\fP\&. You cannot specify
both \fI\%\-\-ldapQueryPassword\fP and \fI\%\-\-ldapBindWithOSDefaults\fP at the same time.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-ldapBindWithOSDefaults <bool>
\fIDefault\fP: false
.sp
New in version 3.4: Available in MongoDB Enterprise for the Windows platform only.

.sp
Allows \fBmongos\fP to authenticate, or bind, using your Windows login
credentials when connecting to the LDAP server.
.sp
Only required if:
.INDENT 7.0
.IP \(bu 2
Using LDAP authorization\&.
.IP \(bu 2
Using an LDAP query for \fI\%username transformation\fP\&.
.IP \(bu 2
The LDAP server disallows anonymous binds
.UNINDENT
.sp
Use \fI\%\-\-ldapBindWithOSDefaults\fP to replace \fI\%\-\-ldapQueryUser\fP and
\fI\%\-\-ldapQueryPassword\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-ldapBindMethod <string>
\fIDefault\fP: simple
.sp
New in version 3.4: Available in MongoDB Enterprise only.

.sp
The method \fBmongos\fP uses to authenticate to an LDAP server.
Use with \fI\%\-\-ldapQueryUser\fP and \fI\%\-\-ldapQueryPassword\fP to
connect to the LDAP server.
.sp
\fI\%\-\-ldapBindMethod\fP supports the following values:
.INDENT 7.0
.IP \(bu 2
\fBsimple\fP \- \fBmongos\fP uses simple authentication.
.IP \(bu 2
\fBsasl\fP \- \fBmongos\fP uses SASL protocol for authentication
.UNINDENT
.sp
If you specify \fBsasl\fP, you can configure the available SASL mechanisms
using \fI\%\-\-ldapBindSaslMechanisms\fP\&. \fBmongos\fP defaults to
using \fBDIGEST\-MD5\fP mechanism.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-ldapBindSaslMechanisms <string>
\fIDefault\fP: DIGEST\-MD5
.sp
New in version 3.4: Available in MongoDB Enterprise only.

.sp
A comma\-separated list of SASL mechanisms \fBmongos\fP can
use when authenticating to the LDAP server. The \fBmongos\fP and the
LDAP server must agree on at least one mechanism. The \fBmongos\fP
dynamically loads any SASL mechanism libraries installed on the host
machine at runtime.
.sp
Install and configure the appropriate libraries for the selected
SASL mechanism(s) on both the \fBmongos\fP host and the remote
LDAP server host. Your operating system may include certain SASL
libraries by default. Defer to the documentation associated with each
SASL mechanism for guidance on installation and configuration.
.sp
If using the \fBGSSAPI\fP SASL mechanism for use with
security\-kerberos, verify the following for the
\fBmongos\fP host machine:
.INDENT 7.0
.TP
.B \fBLinux\fP
.INDENT 7.0
.IP \(bu 2
The \fBKRB5_CLIENT_KTNAME\fP environment
variable resolves to the name of the client keytab\-files
for the host machine. For more on Kerberos environment
variables, please defer to the
\fI\%Kerberos documentation\fP\&.
.IP \(bu 2
The client keytab includes a
kerberos\-user\-principal for the \fBmongos\fP to use when
connecting to the LDAP server and execute LDAP queries.
.UNINDENT
.TP
.B \fBWindows\fP
If connecting to an Active Directory server, the Windows
Kerberos configuration automatically generates a
\fI\%Ticket\-Granting\-Ticket\fP
when the user logs onto the system. Set \fI\%\-\-ldapBindWithOSDefaults\fP to
\fBtrue\fP to allow \fBmongos\fP to use the generated credentials when
connecting to the Active Directory server and execute queries.
.UNINDENT
.sp
Set \fI\%\-\-ldapBindMethod\fP to \fBsasl\fP to use this option.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
For a complete list of SASL mechanisms see the
\fI\%IANA listing\fP\&.
Defer to the documentation for your LDAP or Active Directory
service for identifying the SASL mechanisms compatible with the
service.
.sp
MongoDB is not a source of SASL mechanism libraries, nor
is the MongoDB documentation a definitive source for
installing or configuring any given SASL mechanism. For
documentation and support, defer to the SASL mechanism
library vendor or owner.
.sp
For more information on SASL, defer to the following resources:
.INDENT 0.0
.IP \(bu 2
For Linux, please see the \fI\%Cyrus SASL documentation\fP\&.
.IP \(bu 2
For Windows, please see the \fI\%Windows SASL documentation\fP\&.
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-ldapTransportSecurity <string>
\fIDefault\fP: tls
.sp
New in version 3.4: Available in MongoDB Enterprise only.

.sp
By default, \fBmongos\fP creates a TLS/SSL secured connection to the LDAP
server.
.sp
For Linux deployments, you must configure the appropriate TLS Options in
\fB/etc/openldap/ldap.conf\fP file. Your operating system\(aqs package manager
creates this file as part of the MongoDB Enterprise installation, via the
\fBlibldap\fP dependency. See the documentation for \fBTLS Options\fP in the
\fI\%ldap.conf OpenLDAP documentation\fP
for more complete instructions.
.sp
For Windows deployment, you must add the LDAP server CA certificates to the
Windows certificate management tool. The exact name and functionality of the
tool may vary depending on operating system version. Please see the
documentation for your version of Windows for more information on
certificate management.
.sp
Set \fI\%\-\-ldapTransportSecurity\fP to \fBnone\fP to disable TLS/SSL between \fBmongos\fP and the LDAP
server.
.sp
\fBWARNING:\fP
.INDENT 7.0
.INDENT 3.5
Setting \fI\%\-\-ldapTransportSecurity\fP to \fBnone\fP transmits plaintext information and possibly
credentials between \fBmongos\fP and the LDAP server.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-ldapTimeoutMS <long>
\fIDefault\fP: 10000
.sp
New in version 3.4: Available in MongoDB Enterprise only.

.sp
The amount of time in milliseconds \fBmongos\fP should wait for an LDAP server
to respond to a request.
.sp
Increasing the value of \fI\%\-\-ldapTimeoutMS\fP may prevent connection failure between the
MongoDB server and the LDAP server, if the source of the failure is a
connection timeout. Decreasing the value of \fI\%\-\-ldapTimeoutMS\fP reduces the time
MongoDB waits for a response from the LDAP server.
.sp
This setting can be configured on a running \fBmongos\fP using
\fBsetParameter\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-ldapUserToDNMapping <string>
New in version 3.4: Available in MongoDB Enterprise only.

.sp
Maps the username provided to \fBmongos\fP for authentication to a LDAP
Distinguished Name (DN). You may need to use \fI\%\-\-ldapUserToDNMapping\fP to transform a
username into an LDAP DN in the following scenarios:
.INDENT 7.0
.IP \(bu 2
Performing LDAP authentication with simple LDAP binding, where users
authenticate to MongoDB with usernames that are not full LDAP DNs.
.IP \(bu 2
Using an \fBLDAP authorization query template\fP that requires a DN.
.IP \(bu 2
Transforming the usernames of clients authenticating to Mongo DB using
different authentication mechanisms (e.g. x.509, kerberos) to a full LDAP
DN for authorization.
.UNINDENT
.sp
\fI\%\-\-ldapUserToDNMapping\fP expects a quote\-enclosed JSON\-string representing an ordered array
of documents. Each document contains a regular expression \fBmatch\fP and
either a \fBsubstitution\fP or \fBldapQuery\fP template used for transforming the
incoming username.
.sp
Each document in the array has the following form:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
{
  match: "<regex>"
  substitution: "<LDAP DN>" | ldapQuery: "<LDAP Query>"
}
.ft P
.fi
.UNINDENT
.UNINDENT
.TS
center;
|l|l|l|.
_
T{
Field
T}	T{
Description
T}	T{
Example
T}
_
T{
\fBmatch\fP
T}	T{
An ECMAScript\-formatted regular expression (regex) to match against a
provided username. Each parenthesis\-enclosed section represents a
regex capture group used by \fBsubstitution\fP or \fBldapQuery\fP\&.
T}	T{
\fB"(.+)ENGINEERING"\fP
\fB"(.+)DBA"\fP
T}
_
T{
\fBsubstitution\fP
T}	T{
An LDAP distinguished name (DN) formatting template that converts the
authentication name matched by the \fBmatch\fP regex into a LDAP DN.
Each curly bracket\-enclosed numeric value is replaced by the
corresponding \fI\%regex capture group\fP extracted
from the authentication username via the \fBmatch\fP regex.
.sp
The result of the substitution must be an \fI\%RFC4514\fP escaped string.
T}	T{
\fB"cn={0},ou=engineering,
dc=example,dc=com"\fP
T}
_
T{
\fBldapQuery\fP
T}	T{
A LDAP query formatting template that inserts the authentication
name matched by the \fBmatch\fP regex into an LDAP query URI encoded
respecting RFC4515 and RFC4516. Each curly bracket\-enclosed numeric
value is replaced by the corresponding \fI\%regex capture group\fP extracted
from the authentication username via the \fBmatch\fP expression.
\fBmongos\fP executes the query against the LDAP server to retrieve
the LDAP DN for the authenticated user. \fBmongos\fP requires
exactly one returned result for the transformation to be
successful, or \fBmongos\fP skips this transformation.
T}	T{
\fB"ou=engineering,dc=example,
dc=com??one?(user={0})"\fP
T}
_
.TE
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
An explanation of  \fI\%RFC4514\fP,
\fI\%RFC4515\fP,
\fI\%RFC4516\fP, or LDAP queries is out
of scope for the MongoDB Documentation. Please review the RFC directly or
use your preferred LDAP resource.
.UNINDENT
.UNINDENT
.sp
For each document in the array, you must use either \fBsubstitution\fP or
\fBldapQuery\fP\&. You \fIcannot\fP specify both in the same document.
.sp
When performing authentication or authorization, \fBmongos\fP steps through
each document in the array in the given order, checking the authentication
username against the \fBmatch\fP filter.  If a match is found,
\fBmongos\fP applies the transformation and uses the output for
authenticating the user. \fBmongos\fP does not check the remaining documents
in the array.
.sp
If the given document does not match the provided authentication
name, \fI\%mongos\fP continues through the list of documents
to find additional matches. If no matches are found in any document,
or the transformation the document describes fails,
\fI\%mongos\fP returns an error.
.sp
Starting in MongoDB 4.4, \fI\%mongos\fP also returns an error
if one of the transformations cannot be evaluated due to networking
or authentication failures to the LDAP server. \fI\%mongos\fP
rejects the connection request and does not check the remaining
documents in the array.
.INDENT 7.0
.INDENT 3.5
.SS Example
.sp
The following shows two transformation documents. The first
document matches against any string ending in \fB@ENGINEERING\fP, placing
anything preceeding the suffix into a regex capture group. The
second document matches against any string ending in \fB@DBA\fP, placing
anything preceeding the suffix into a regex capture group.
.sp
\fBIMPORTANT:\fP
.INDENT 0.0
.INDENT 3.5
You must pass the array to \fI\%\-\-ldapUserToDNMapping\fP as a string.
.UNINDENT
.UNINDENT
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
"[
   {
      match: "(.+)@ENGINEERING.EXAMPLE.COM",
      substitution: "cn={0},ou=engineering,dc=example,dc=com"
   },
   {
      match: "(.+)@DBA.EXAMPLE.COM",
      ldapQuery: "ou=dba,dc=example,dc=com??one?(user={0})"

   }

]"
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
A user with username \fBalice@ENGINEERING.EXAMPLE.COM\fP matches the first
document. The regex capture group \fB{0}\fP corresponds to the string
\fBalice\fP\&. The resulting output is the DN
\fB"cn=alice,ou=engineering,dc=example,dc=com"\fP\&.
.sp
A user with username \fBbob@DBA.EXAMPLE.COM\fP matches the second document.
The regex capture group \fB{0}\fP corresponds to the string \fBbob\fP\&.  The
resulting output is the LDAP query
\fB"ou=dba,dc=example,dc=com??one?(user=bob)"\fP\&. \fBmongos\fP executes this
query against the LDAP server, returning the result
\fB"cn=bob,ou=dba,dc=example,dc=com"\fP\&.
.UNINDENT
.UNINDENT
.sp
If \fI\%\-\-ldapUserToDNMapping\fP is unset, \fBmongos\fP applies no transformations to the username
when attempting to authenticate or authorize a user against the LDAP server.
.sp
This setting can be configured on a running \fBmongos\fP using the
\fBsetParameter\fP database command.
.UNINDENT
.SS Additional Options
.INDENT 0.0
.TP
.B \-\-ipv6
Enables IPv6 support. \fBmongos\fP disables IPv6 support by default.
.sp
Setting \fI\%\-\-ipv6\fP does \fInot\fP direct the \fBmongos\fP to listen on any
local IPv6 addresses or interfaces. To configure the \fBmongos\fP to
listen on an IPv6 interface, you must either:
.INDENT 7.0
.IP \(bu 2
Configure \fI\%\-\-bind_ip\fP with one or more IPv6 addresses or
hostnames that resolve to IPv6 addresses, \fBor\fP
.IP \(bu 2
Set \fI\%\-\-bind_ip_all\fP to \fBtrue\fP\&.
.UNINDENT
.UNINDENT
.SH AUTHOR
MongoDB Documentation Project
.SH COPYRIGHT
2008-2020
.\" Generated by docutils manpage writer.
.
